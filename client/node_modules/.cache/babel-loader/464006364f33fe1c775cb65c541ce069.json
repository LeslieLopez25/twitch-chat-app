{"ast":null,"code":"import { systemToComponent as t } from \"@virtuoso.dev/react-urx\";\nimport * as e from \"@virtuoso.dev/urx\";\nimport * as n from \"react\";\nimport { useLayoutEffect as r, useEffect as o, useRef as i, useCallback as a, createElement as l } from \"react\";\nimport { flushSync as s } from \"react-dom\";\n\nfunction u() {\n  return u = Object.assign || function (t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var n = arguments[e];\n\n      for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (t[r] = n[r]);\n    }\n\n    return t;\n  }, u.apply(this, arguments);\n}\n\nfunction c(t, e) {\n  if (null == t) return {};\n  var n,\n      r,\n      o = {},\n      i = Object.keys(t);\n\n  for (r = 0; r < i.length; r++) e.indexOf(n = i[r]) >= 0 || (o[n] = t[n]);\n\n  return o;\n}\n\nfunction m(t, e) {\n  (null == e || e > t.length) && (e = t.length);\n\n  for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n];\n\n  return r;\n}\n\nfunction d(t, e) {\n  var n = \"undefined\" != typeof Symbol && t[Symbol.iterator] || t[\"@@iterator\"];\n  if (n) return (n = n.call(t)).next.bind(n);\n\n  if (Array.isArray(t) || (n = function (t, e) {\n    if (t) {\n      if (\"string\" == typeof t) return m(t, e);\n      var n = Object.prototype.toString.call(t).slice(8, -1);\n      return \"Object\" === n && t.constructor && (n = t.constructor.name), \"Map\" === n || \"Set\" === n ? Array.from(t) : \"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? m(t, e) : void 0;\n    }\n  }(t)) || e && t && \"number\" == typeof t.length) {\n    n && (t = n);\n    var r = 0;\n    return function () {\n      return r >= t.length ? {\n        done: !0\n      } : {\n        done: !1,\n        value: t[r++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar f,\n    p,\n    h = \"undefined\" != typeof document ? r : o;\n!function (t) {\n  t[t.DEBUG = 0] = \"DEBUG\", t[t.INFO = 1] = \"INFO\", t[t.WARN = 2] = \"WARN\", t[t.ERROR = 3] = \"ERROR\";\n}(p || (p = {}));\nvar g = ((f = {})[p.DEBUG] = \"debug\", f[p.INFO] = \"log\", f[p.WARN] = \"warn\", f[p.ERROR] = \"error\", f),\n    v = e.system(function () {\n  var t = e.statefulStream(p.ERROR);\n  return {\n    log: e.statefulStream(function (n, r, o) {\n      var i;\n      void 0 === o && (o = p.INFO), o >= (null != (i = (\"undefined\" == typeof globalThis ? window : globalThis).VIRTUOSO_LOG_LEVEL) ? i : e.getValue(t)) && console[g[o]](\"%creact-virtuoso: %c%s %o\", \"color: #0253b3; font-weight: bold\", \"color: initial\", n, r);\n    }),\n    logLevel: t\n  };\n}, [], {\n  singleton: !0\n});\n\nfunction S(t, e) {\n  void 0 === e && (e = !0);\n\n  var n = i(null),\n      r = function (t) {};\n\n  if (\"undefined\" != typeof ResizeObserver) {\n    var o = new ResizeObserver(function (e) {\n      var n = e[0].target;\n      null !== n.offsetParent && t(n);\n    });\n\n    r = function (t) {\n      t && e ? (o.observe(t), n.current = t) : (n.current && o.unobserve(n.current), n.current = null);\n    };\n  }\n\n  return {\n    ref: n,\n    callbackRef: r\n  };\n}\n\nfunction I(t, e) {\n  return void 0 === e && (e = !0), S(t, e).callbackRef;\n}\n\nfunction C(t, e, n, r, o, i, a) {\n  return S(function (n) {\n    for (var l = function (t, e, n, r) {\n      var o = t.length;\n      if (0 === o) return null;\n\n      for (var i = [], a = 0; a < o; a++) {\n        var l = t.item(a);\n\n        if (l && void 0 !== l.dataset.index) {\n          var s = parseInt(l.dataset.index),\n              u = parseFloat(l.dataset.knownSize),\n              c = e(l, \"offsetHeight\");\n\n          if (0 === c && r(\"Zero-sized element, this should not happen\", {\n            child: l\n          }, p.ERROR), c !== u) {\n            var m = i[i.length - 1];\n            0 === i.length || m.size !== c || m.endIndex !== s - 1 ? i.push({\n              startIndex: s,\n              endIndex: s,\n              size: c\n            }) : i[i.length - 1].endIndex++;\n          }\n        }\n      }\n\n      return i;\n    }(n.children, e, 0, o), s = n.parentElement; !s.dataset.virtuosoScroller;) s = s.parentElement;\n\n    var u = \"window\" === s.firstElementChild.dataset.viewportType,\n        c = a ? a.scrollTop : u ? window.pageYOffset || document.documentElement.scrollTop : s.scrollTop,\n        m = a ? a.scrollHeight : u ? document.documentElement.scrollHeight : s.scrollHeight,\n        d = a ? a.offsetHeight : u ? window.innerHeight : s.offsetHeight;\n    r({\n      scrollTop: Math.max(c, 0),\n      scrollHeight: m,\n      viewportHeight: d\n    }), null == i || i(function (t, e, n) {\n      return \"normal\" === e || null != e && e.endsWith(\"px\") || n(\"row-gap was not resolved to pixel value correctly\", e, p.WARN), \"normal\" === e ? 0 : parseInt(null != e ? e : \"0\", 10);\n    }(0, getComputedStyle(n).rowGap, o)), null !== l && t(l);\n  }, n);\n}\n\nfunction T(t, e) {\n  return Math.round(t.getBoundingClientRect()[e]);\n}\n\nfunction w(t, e) {\n  return Math.abs(t - e) < 1.01;\n}\n\nfunction x(t, n, r, l, u) {\n  void 0 === l && (l = e.noop);\n  var c = i(null),\n      m = i(null),\n      d = i(null),\n      f = i(!1),\n      p = a(function (e) {\n    var r = e.target,\n        o = r === window || r === document,\n        i = o ? window.pageYOffset || document.documentElement.scrollTop : r.scrollTop,\n        a = o ? document.documentElement.scrollHeight : r.scrollHeight,\n        l = o ? window.innerHeight : r.offsetHeight,\n        u = function () {\n      t({\n        scrollTop: Math.max(i, 0),\n        scrollHeight: a,\n        viewportHeight: l\n      });\n    };\n\n    f.current ? s(u) : u(), f.current = !1, null !== m.current && (i === m.current || i <= 0 || i === a - l) && (m.current = null, n(!0), d.current && (clearTimeout(d.current), d.current = null));\n  }, [t, n]);\n  return o(function () {\n    var t = u || c.current;\n    return l(u || c.current), p({\n      target: t\n    }), t.addEventListener(\"scroll\", p, {\n      passive: !0\n    }), function () {\n      l(null), t.removeEventListener(\"scroll\", p);\n    };\n  }, [c, p, r, l, u]), {\n    scrollerRef: c,\n    scrollByCallback: function (t) {\n      f.current = !0, c.current.scrollBy(t);\n    },\n    scrollToCallback: function (e) {\n      var r = c.current;\n\n      if (r && (!(\"offsetHeight\" in r) || 0 !== r.offsetHeight)) {\n        var o,\n            i,\n            a,\n            l = \"smooth\" === e.behavior;\n        if (r === window ? (i = Math.max(T(document.documentElement, \"height\"), document.documentElement.scrollHeight), o = window.innerHeight, a = document.documentElement.scrollTop) : (i = r.scrollHeight, o = T(r, \"height\"), a = r.scrollTop), e.top = Math.ceil(Math.max(Math.min(i - o, e.top), 0)), w(o, i) || e.top === a) return t({\n          scrollTop: a,\n          scrollHeight: i,\n          viewportHeight: o\n        }), void (l && n(!0));\n        l ? (m.current = e.top, d.current && clearTimeout(d.current), d.current = setTimeout(function () {\n          d.current = null, m.current = null, n(!0);\n        }, 1e3)) : m.current = null, r.scrollTo(e);\n      }\n    }\n  };\n}\n\nvar b = e.system(function () {\n  var t = e.stream(),\n      n = e.stream(),\n      r = e.statefulStream(0),\n      o = e.stream(),\n      i = e.statefulStream(0),\n      a = e.stream(),\n      l = e.stream(),\n      s = e.statefulStream(0),\n      u = e.statefulStream(0),\n      c = e.statefulStream(0),\n      m = e.stream(),\n      d = e.stream(),\n      f = e.statefulStream(!1),\n      p = e.statefulStream(!1);\n  return e.connect(e.pipe(t, e.map(function (t) {\n    return t.scrollTop;\n  })), n), e.connect(e.pipe(t, e.map(function (t) {\n    return t.scrollHeight;\n  })), l), e.connect(n, i), {\n    scrollContainerState: t,\n    scrollTop: n,\n    viewportHeight: a,\n    headerHeight: s,\n    fixedHeaderHeight: u,\n    footerHeight: c,\n    scrollHeight: l,\n    smoothScrollTargetReached: o,\n    react18ConcurrentRendering: p,\n    scrollTo: m,\n    scrollBy: d,\n    statefulScrollTop: i,\n    deviation: r,\n    scrollingInProgress: f\n  };\n}, [], {\n  singleton: !0\n}),\n    y = {\n  lvl: 0\n};\n\nfunction E(t, e, n, r, o) {\n  return void 0 === r && (r = y), void 0 === o && (o = y), {\n    k: t,\n    v: e,\n    lvl: n,\n    l: r,\n    r: o\n  };\n}\n\nfunction H(t) {\n  return t === y;\n}\n\nfunction R() {\n  return y;\n}\n\nfunction L(t, e) {\n  if (H(t)) return y;\n  var n = t.k,\n      r = t.l,\n      o = t.r;\n\n  if (e === n) {\n    if (H(r)) return o;\n    if (H(o)) return r;\n    var i = P(r);\n    return U(M(t, {\n      k: i[0],\n      v: i[1],\n      l: O(r)\n    }));\n  }\n\n  return U(M(t, e < n ? {\n    l: L(r, e)\n  } : {\n    r: L(o, e)\n  }));\n}\n\nfunction k(t, e, n) {\n  if (void 0 === n && (n = \"k\"), H(t)) return [-Infinity, void 0];\n  if (t[n] === e) return [t.k, t.v];\n\n  if (t[n] < e) {\n    var r = k(t.r, e, n);\n    return -Infinity === r[0] ? [t.k, t.v] : r;\n  }\n\n  return k(t.l, e, n);\n}\n\nfunction z(t, e, n) {\n  return H(t) ? E(e, n, 1) : e === t.k ? M(t, {\n    k: e,\n    v: n\n  }) : function (t) {\n    return N(D(t));\n  }(M(t, e < t.k ? {\n    l: z(t.l, e, n)\n  } : {\n    r: z(t.r, e, n)\n  }));\n}\n\nfunction B(t, e, n) {\n  if (H(t)) return [];\n  var r = t.k,\n      o = t.v,\n      i = t.r,\n      a = [];\n  return r > e && (a = a.concat(B(t.l, e, n))), r >= e && r <= n && a.push({\n    k: r,\n    v: o\n  }), r <= n && (a = a.concat(B(i, e, n))), a;\n}\n\nfunction F(t) {\n  return H(t) ? [] : [].concat(F(t.l), [{\n    k: t.k,\n    v: t.v\n  }], F(t.r));\n}\n\nfunction P(t) {\n  return H(t.r) ? [t.k, t.v] : P(t.r);\n}\n\nfunction O(t) {\n  return H(t.r) ? t.l : U(M(t, {\n    r: O(t.r)\n  }));\n}\n\nfunction M(t, e) {\n  return E(void 0 !== e.k ? e.k : t.k, void 0 !== e.v ? e.v : t.v, void 0 !== e.lvl ? e.lvl : t.lvl, void 0 !== e.l ? e.l : t.l, void 0 !== e.r ? e.r : t.r);\n}\n\nfunction V(t) {\n  return H(t) || t.lvl > t.r.lvl;\n}\n\nfunction U(t) {\n  var e = t.l,\n      n = t.r,\n      r = t.lvl;\n  if (n.lvl >= r - 1 && e.lvl >= r - 1) return t;\n\n  if (r > n.lvl + 1) {\n    if (V(e)) return D(M(t, {\n      lvl: r - 1\n    }));\n    if (H(e) || H(e.r)) throw new Error(\"Unexpected empty nodes\");\n    return M(e.r, {\n      l: M(e, {\n        r: e.r.l\n      }),\n      r: M(t, {\n        l: e.r.r,\n        lvl: r - 1\n      }),\n      lvl: r\n    });\n  }\n\n  if (V(t)) return N(M(t, {\n    lvl: r - 1\n  }));\n  if (H(n) || H(n.l)) throw new Error(\"Unexpected empty nodes\");\n  var o = n.l,\n      i = V(o) ? n.lvl - 1 : n.lvl;\n  return M(o, {\n    l: M(t, {\n      r: o.l,\n      lvl: r - 1\n    }),\n    r: N(M(n, {\n      l: o.r,\n      lvl: i\n    })),\n    lvl: o.lvl + 1\n  });\n}\n\nfunction A(t, e, n) {\n  return H(t) ? [] : W(B(t, k(t, e)[0], n), function (t) {\n    return {\n      index: t.k,\n      value: t.v\n    };\n  });\n}\n\nfunction W(t, e) {\n  var n = t.length;\n  if (0 === n) return [];\n\n  for (var r = e(t[0]), o = r.index, i = r.value, a = [], l = 1; l < n; l++) {\n    var s = e(t[l]),\n        u = s.index,\n        c = s.value;\n    a.push({\n      start: o,\n      end: u - 1,\n      value: i\n    }), o = u, i = c;\n  }\n\n  return a.push({\n    start: o,\n    end: Infinity,\n    value: i\n  }), a;\n}\n\nfunction N(t) {\n  var e = t.r,\n      n = t.lvl;\n  return H(e) || H(e.r) || e.lvl !== n || e.r.lvl !== n ? t : M(e, {\n    l: M(t, {\n      r: e.l\n    }),\n    lvl: n + 1\n  });\n}\n\nfunction D(t) {\n  var e = t.l;\n  return H(e) || e.lvl !== t.lvl ? t : M(e, {\n    r: M(t, {\n      l: e.r\n    })\n  });\n}\n\nfunction G(t, e, n, r) {\n  void 0 === r && (r = 0);\n\n  for (var o = t.length - 1; r <= o;) {\n    var i = Math.floor((r + o) / 2),\n        a = n(t[i], e);\n    if (0 === a) return i;\n\n    if (-1 === a) {\n      if (o - r < 2) return i - 1;\n      o = i - 1;\n    } else {\n      if (o === r) return i;\n      r = i + 1;\n    }\n  }\n\n  throw new Error(\"Failed binary finding record in array - \" + t.join(\",\") + \", searched for \" + e);\n}\n\nfunction _(t, e, n) {\n  return t[G(t, e, n)];\n}\n\nvar j = e.system(function () {\n  return {\n    recalcInProgress: e.statefulStream(!1)\n  };\n}, [], {\n  singleton: !0\n});\n\nfunction K(t) {\n  var e = t.size,\n      n = t.startIndex,\n      r = t.endIndex;\n  return function (t) {\n    return t.start === n && (t.end === r || Infinity === t.end) && t.value === e;\n  };\n}\n\nfunction Y(t, e) {\n  var n = t.index;\n  return e === n ? 0 : e < n ? -1 : 1;\n}\n\nfunction q(t, e) {\n  var n = t.offset;\n  return e === n ? 0 : e < n ? -1 : 1;\n}\n\nfunction Z(t) {\n  return {\n    index: t.index,\n    value: t\n  };\n}\n\nfunction J(t, e, n, r) {\n  var o = t,\n      i = 0,\n      a = 0,\n      l = 0,\n      s = 0;\n\n  if (0 !== e) {\n    l = o[s = G(o, e - 1, Y)].offset;\n    var u = k(n, e - 1);\n    i = u[0], a = u[1], o.length && o[s].size === k(n, e)[1] && (s -= 1), o = o.slice(0, s + 1);\n  } else o = [];\n\n  for (var c, m = d(A(n, e, Infinity)); !(c = m()).done;) {\n    var f = c.value,\n        p = f.start,\n        h = f.value,\n        g = p - i,\n        v = g * a + l + g * r;\n    o.push({\n      offset: v,\n      size: h,\n      index: p\n    }), i = p, l = v, a = h;\n  }\n\n  return {\n    offsetTree: o,\n    lastIndex: i,\n    lastOffset: l,\n    lastSize: a\n  };\n}\n\nfunction $(t, e) {\n  var n = e[0],\n      r = e[1],\n      o = e[3];\n  n.length > 0 && (0, e[2])(\"received item sizes\", n, p.DEBUG);\n  var i = t.sizeTree,\n      a = i,\n      l = 0;\n\n  if (r.length > 0 && H(i) && 2 === n.length) {\n    var s = n[0].size,\n        u = n[1].size;\n    a = r.reduce(function (t, e) {\n      return z(z(t, e, s), e + 1, u);\n    }, a);\n  } else {\n    var c = function (t, e) {\n      for (var n, r = H(t) ? 0 : Infinity, o = d(e); !(n = o()).done;) {\n        var i = n.value,\n            a = i.size,\n            l = i.startIndex,\n            s = i.endIndex;\n        if (r = Math.min(r, l), H(t)) t = z(t, 0, a);else {\n          var u = A(t, l - 1, s + 1);\n\n          if (!u.some(K(i))) {\n            for (var c, m = !1, f = !1, p = d(u); !(c = p()).done;) {\n              var h = c.value,\n                  g = h.start,\n                  v = h.end,\n                  S = h.value;\n              m ? (s >= g || a === S) && (t = L(t, g)) : (f = S !== a, m = !0), v > s && s >= g && S !== a && (t = z(t, s + 1, S));\n            }\n\n            f && (t = z(t, l, a));\n          }\n        }\n      }\n\n      return [t, r];\n    }(a, n);\n\n    a = c[0], l = c[1];\n  }\n\n  if (a === i) return t;\n  var m = J(t.offsetTree, l, a, o),\n      f = m.offsetTree;\n  return {\n    sizeTree: a,\n    offsetTree: f,\n    lastIndex: m.lastIndex,\n    lastOffset: m.lastOffset,\n    lastSize: m.lastSize,\n    groupOffsetTree: r.reduce(function (t, e) {\n      return z(t, e, Q(e, f, o));\n    }, R()),\n    groupIndices: r\n  };\n}\n\nfunction Q(t, e, n) {\n  if (0 === e.length) return 0;\n\n  var r = _(e, t, Y),\n      o = t - r.index,\n      i = r.size * o + (o - 1) * n + r.offset;\n\n  return i > 0 ? i + n : i;\n}\n\nfunction X(t, e, n) {\n  if (function (t) {\n    return void 0 !== t.groupIndex;\n  }(t)) return e.groupIndices[t.groupIndex] + 1;\n  var r = tt(\"LAST\" === t.index ? n : t.index, e);\n  return Math.max(0, r, Math.min(n, r));\n}\n\nfunction tt(t, e) {\n  if (!et(e)) return t;\n\n  for (var n = 0; e.groupIndices[n] <= t + n;) n++;\n\n  return t + n;\n}\n\nfunction et(t) {\n  return !H(t.groupOffsetTree);\n}\n\nvar nt = {\n  offsetHeight: \"height\",\n  offsetWidth: \"width\"\n},\n    rt = e.system(function (t) {\n  var n = t[0].log,\n      r = t[1].recalcInProgress,\n      o = e.stream(),\n      i = e.stream(),\n      a = e.statefulStreamFromEmitter(i, 0),\n      l = e.stream(),\n      s = e.stream(),\n      c = e.statefulStream(0),\n      m = e.statefulStream([]),\n      d = e.statefulStream(void 0),\n      f = e.statefulStream(void 0),\n      h = e.statefulStream(function (t, e) {\n    return T(t, nt[e]);\n  }),\n      g = e.statefulStream(void 0),\n      v = e.statefulStream(0),\n      S = {\n    offsetTree: [],\n    sizeTree: R(),\n    groupOffsetTree: R(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: []\n  },\n      I = e.statefulStreamFromEmitter(e.pipe(o, e.withLatestFrom(m, n, v), e.scan($, S), e.distinctUntilChanged()), S);\n  e.connect(e.pipe(m, e.filter(function (t) {\n    return t.length > 0;\n  }), e.withLatestFrom(I, v), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        r = t[2],\n        o = e.reduce(function (t, e, o) {\n      return z(t, e, Q(e, n.offsetTree, r) || o);\n    }, R());\n    return u({}, n, {\n      groupIndices: e,\n      groupOffsetTree: o\n    });\n  })), I), e.connect(e.pipe(i, e.withLatestFrom(I), e.filter(function (t) {\n    return t[0] < t[1].lastIndex;\n  }), e.map(function (t) {\n    var e = t[1];\n    return [{\n      startIndex: t[0],\n      endIndex: e.lastIndex,\n      size: e.lastSize\n    }];\n  })), o), e.connect(d, f);\n  var C = e.statefulStreamFromEmitter(e.pipe(d, e.map(function (t) {\n    return void 0 === t;\n  })), !0);\n  e.connect(e.pipe(f, e.filter(function (t) {\n    return void 0 !== t && H(e.getValue(I).sizeTree);\n  }), e.map(function (t) {\n    return [{\n      startIndex: 0,\n      endIndex: 0,\n      size: t\n    }];\n  })), o);\n  var w = e.streamFromEmitter(e.pipe(o, e.withLatestFrom(I), e.scan(function (t, e) {\n    var n = e[1];\n    return {\n      changed: n !== t.sizes,\n      sizes: n\n    };\n  }, {\n    changed: !1,\n    sizes: S\n  }), e.map(function (t) {\n    return t.changed;\n  })));\n  e.subscribe(e.pipe(c, e.scan(function (t, e) {\n    return {\n      diff: t.prev - e,\n      prev: e\n    };\n  }, {\n    diff: 0,\n    prev: 0\n  }), e.map(function (t) {\n    return t.diff;\n  })), function (t) {\n    t > 0 ? (e.publish(r, !0), e.publish(l, t)) : t < 0 && e.publish(s, t);\n  }), e.subscribe(e.pipe(c, e.withLatestFrom(n)), function (t) {\n    t[0] < 0 && (0, t[1])(\"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\", {\n      firstItemIndex: c\n    }, p.ERROR);\n  });\n  var x = e.streamFromEmitter(l);\n  e.connect(e.pipe(l, e.withLatestFrom(I), e.map(function (t) {\n    var e = t[0],\n        n = t[1];\n    if (n.groupIndices.length > 0) throw new Error(\"Virtuoso: prepending items does not work with groups\");\n    return F(n.sizeTree).reduce(function (t, n) {\n      var r = n.k,\n          o = n.v;\n      return {\n        ranges: [].concat(t.ranges, [{\n          startIndex: t.prevIndex,\n          endIndex: r + e - 1,\n          size: t.prevSize\n        }]),\n        prevIndex: r + e,\n        prevSize: o\n      };\n    }, {\n      ranges: [],\n      prevIndex: 0,\n      prevSize: n.lastSize\n    }).ranges;\n  })), o);\n  var b = e.streamFromEmitter(e.pipe(s, e.withLatestFrom(I, v), e.map(function (t) {\n    return Q(-t[0], t[1].offsetTree, t[2]);\n  })));\n  return e.connect(e.pipe(s, e.withLatestFrom(I, v), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        r = t[2];\n    if (n.groupIndices.length > 0) throw new Error(\"Virtuoso: shifting items does not work with groups\");\n    var o = F(n.sizeTree).reduce(function (t, n) {\n      var r = n.v;\n      return z(t, Math.max(0, n.k + e), r);\n    }, R());\n    return u({}, n, {\n      sizeTree: o\n    }, J(n.offsetTree, 0, o, r));\n  })), I), {\n    data: g,\n    totalCount: i,\n    sizeRanges: o,\n    groupIndices: m,\n    defaultItemSize: f,\n    fixedItemSize: d,\n    unshiftWith: l,\n    shiftWith: s,\n    shiftWithOffset: b,\n    beforeUnshiftWith: x,\n    firstItemIndex: c,\n    gap: v,\n    sizes: I,\n    listRefresh: w,\n    statefulTotalCount: a,\n    trackItemSizes: C,\n    itemSize: h\n  };\n}, e.tup(v, j), {\n  singleton: !0\n}),\n    ot = \"undefined\" != typeof document && \"scrollBehavior\" in document.documentElement.style;\n\nfunction it(t) {\n  var e = \"number\" == typeof t ? {\n    index: t\n  } : t;\n  return e.align || (e.align = \"start\"), e.behavior && ot || (e.behavior = \"auto\"), e.offset || (e.offset = 0), e;\n}\n\nvar at = e.system(function (t) {\n  var n = t[0],\n      r = n.sizes,\n      o = n.totalCount,\n      i = n.listRefresh,\n      a = n.gap,\n      l = t[1],\n      s = l.scrollingInProgress,\n      u = l.viewportHeight,\n      c = l.scrollTo,\n      m = l.smoothScrollTargetReached,\n      d = l.headerHeight,\n      f = l.footerHeight,\n      h = t[2].log,\n      g = e.stream(),\n      v = e.statefulStream(0),\n      S = null,\n      I = null,\n      C = null;\n\n  function T() {\n    S && (S(), S = null), C && (C(), C = null), I && (clearTimeout(I), I = null), e.publish(s, !1);\n  }\n\n  return e.connect(e.pipe(g, e.withLatestFrom(r, u, o, v, d, f, h), e.withLatestFrom(a), e.map(function (t) {\n    var n = t[0],\n        r = n[0],\n        o = n[1],\n        a = n[2],\n        l = n[3],\n        u = n[4],\n        c = n[5],\n        d = n[6],\n        f = n[7],\n        h = t[1],\n        v = it(r),\n        w = v.align,\n        x = v.behavior,\n        b = v.offset,\n        y = l - 1,\n        E = X(v, o, y),\n        H = Q(E, o.offsetTree, h) + c;\n    \"end\" === w ? (H = H - a + k(o.sizeTree, E)[1], E === y && (H += d)) : \"center\" === w ? H = H - a / 2 + k(o.sizeTree, E)[1] / 2 : H -= u, b && (H += b);\n\n    var R = function (t) {\n      T(), t ? (f(\"retrying to scroll to\", {\n        location: r\n      }, p.DEBUG), e.publish(g, r)) : f(\"list did not change, scroll successful\", {}, p.DEBUG);\n    };\n\n    if (T(), \"smooth\" === x) {\n      var L = !1;\n      C = e.subscribe(i, function (t) {\n        L = L || t;\n      }), S = e.handleNext(m, function () {\n        R(L);\n      });\n    } else S = e.handleNext(e.pipe(i, function (t) {\n      var e = setTimeout(function () {\n        t(!1);\n      }, 150);\n      return function (n) {\n        n && (t(!0), clearTimeout(e));\n      };\n    }), R);\n\n    return I = setTimeout(function () {\n      T();\n    }, 1200), e.publish(s, !0), f(\"scrolling from index to\", {\n      index: E,\n      top: H,\n      behavior: x\n    }, p.DEBUG), {\n      top: H,\n      behavior: x\n    };\n  })), c), {\n    scrollToIndex: g,\n    topListHeight: v\n  };\n}, e.tup(rt, b, v), {\n  singleton: !0\n}),\n    lt = \"up\",\n    st = {\n  atBottom: !1,\n  notAtBottomBecause: \"NOT_SHOWING_LAST_ITEM\",\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0\n  }\n},\n    ut = e.system(function (t) {\n  var n = t[0],\n      r = n.scrollContainerState,\n      o = n.scrollTop,\n      i = n.viewportHeight,\n      a = n.headerHeight,\n      l = n.footerHeight,\n      s = n.scrollBy,\n      u = e.statefulStream(!1),\n      c = e.statefulStream(!0),\n      m = e.stream(),\n      d = e.stream(),\n      f = e.statefulStream(4),\n      p = e.statefulStream(0),\n      h = e.statefulStreamFromEmitter(e.pipe(e.merge(e.pipe(e.duc(o), e.skip(1), e.mapTo(!0)), e.pipe(e.duc(o), e.skip(1), e.mapTo(!1), e.debounceTime(100))), e.distinctUntilChanged()), !1),\n      g = e.statefulStreamFromEmitter(e.pipe(e.merge(e.pipe(s, e.mapTo(!0)), e.pipe(s, e.mapTo(!1), e.debounceTime(200))), e.distinctUntilChanged()), !1);\n  e.connect(e.pipe(e.combineLatest(e.duc(o), e.duc(p)), e.map(function (t) {\n    return t[0] <= t[1];\n  }), e.distinctUntilChanged()), c), e.connect(e.pipe(c, e.throttleTime(50)), d);\n  var v = e.streamFromEmitter(e.pipe(e.combineLatest(r, e.duc(i), e.duc(a), e.duc(l), e.duc(f)), e.scan(function (t, e) {\n    var n,\n        r,\n        o = e[0],\n        i = o.scrollTop,\n        a = o.scrollHeight,\n        l = e[1],\n        s = {\n      viewportHeight: l,\n      scrollTop: i,\n      scrollHeight: a\n    };\n    return i + l - a > -e[4] ? (i > t.state.scrollTop ? (n = \"SCROLLED_DOWN\", r = t.state.scrollTop - i) : (n = \"SIZE_DECREASED\", r = t.state.scrollTop - i || t.scrollTopDelta), {\n      atBottom: !0,\n      state: s,\n      atBottomBecause: n,\n      scrollTopDelta: r\n    }) : {\n      atBottom: !1,\n      notAtBottomBecause: s.scrollHeight > t.state.scrollHeight ? \"SIZE_INCREASED\" : l < t.state.viewportHeight ? \"VIEWPORT_HEIGHT_DECREASING\" : i < t.state.scrollTop ? \"SCROLLING_UPWARDS\" : \"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM\",\n      state: s\n    };\n  }, st), e.distinctUntilChanged(function (t, e) {\n    return t && t.atBottom === e.atBottom;\n  }))),\n      S = e.statefulStreamFromEmitter(e.pipe(r, e.scan(function (t, e) {\n    var n = e.scrollTop,\n        r = e.scrollHeight,\n        o = e.viewportHeight;\n    return w(t.scrollHeight, r) ? {\n      scrollTop: n,\n      scrollHeight: r,\n      jump: 0,\n      changed: !1\n    } : t.scrollTop !== n && r - (n + o) < 1 ? {\n      scrollHeight: r,\n      scrollTop: n,\n      jump: t.scrollTop - n,\n      changed: !0\n    } : {\n      scrollHeight: r,\n      scrollTop: n,\n      jump: 0,\n      changed: !0\n    };\n  }, {\n    scrollHeight: 0,\n    jump: 0,\n    scrollTop: 0,\n    changed: !1\n  }), e.filter(function (t) {\n    return t.changed;\n  }), e.map(function (t) {\n    return t.jump;\n  })), 0);\n  e.connect(e.pipe(v, e.map(function (t) {\n    return t.atBottom;\n  })), u), e.connect(e.pipe(u, e.throttleTime(50)), m);\n  var I = e.statefulStream(\"down\");\n  e.connect(e.pipe(r, e.map(function (t) {\n    return t.scrollTop;\n  }), e.distinctUntilChanged(), e.scan(function (t, n) {\n    return e.getValue(g) ? {\n      direction: t.direction,\n      prevScrollTop: n\n    } : {\n      direction: n < t.prevScrollTop ? lt : \"down\",\n      prevScrollTop: n\n    };\n  }, {\n    direction: \"down\",\n    prevScrollTop: 0\n  }), e.map(function (t) {\n    return t.direction;\n  })), I), e.connect(e.pipe(r, e.throttleTime(50), e.mapTo(\"none\")), I);\n  var C = e.statefulStream(0);\n  return e.connect(e.pipe(h, e.filter(function (t) {\n    return !t;\n  }), e.mapTo(0)), C), e.connect(e.pipe(o, e.throttleTime(100), e.withLatestFrom(h), e.filter(function (t) {\n    return !!t[1];\n  }), e.scan(function (t, e) {\n    return [t[1], e[0]];\n  }, [0, 0]), e.map(function (t) {\n    return t[1] - t[0];\n  })), C), {\n    isScrolling: h,\n    isAtTop: c,\n    isAtBottom: u,\n    atBottomState: v,\n    atTopStateChange: d,\n    atBottomStateChange: m,\n    scrollDirection: I,\n    atBottomThreshold: f,\n    atTopThreshold: p,\n    scrollVelocity: C,\n    lastJumpDueToItemResize: S\n  };\n}, e.tup(b)),\n    ct = e.system(function (t) {\n  var n = t[0].log,\n      r = e.statefulStream(!1),\n      o = e.streamFromEmitter(e.pipe(r, e.filter(function (t) {\n    return t;\n  }), e.distinctUntilChanged()));\n  return e.subscribe(r, function (t) {\n    t && e.getValue(n)(\"props updated\", {}, p.DEBUG);\n  }), {\n    propsReady: r,\n    didMount: o\n  };\n}, e.tup(v), {\n  singleton: !0\n}),\n    mt = e.system(function (t) {\n  var n = t[0],\n      r = n.sizes,\n      o = n.listRefresh,\n      i = n.defaultItemSize,\n      a = t[1].scrollTop,\n      l = t[2].scrollToIndex,\n      s = t[3].didMount,\n      u = e.statefulStream(!0),\n      c = e.statefulStream(0);\n  return e.connect(e.pipe(s, e.withLatestFrom(c), e.filter(function (t) {\n    return !!t[1];\n  }), e.mapTo(!1)), u), e.subscribe(e.pipe(e.combineLatest(o, s), e.withLatestFrom(u, r, i), e.filter(function (t) {\n    var e = t[1],\n        n = t[3];\n    return t[0][1] && (!H(t[2].sizeTree) || void 0 !== n) && !e;\n  }), e.withLatestFrom(c)), function (t) {\n    var n = t[1];\n    setTimeout(function () {\n      e.handleNext(a, function () {\n        e.publish(u, !0);\n      }), e.publish(l, n);\n    });\n  }), {\n    scrolledToInitialItem: u,\n    initialTopMostItemIndex: c\n  };\n}, e.tup(rt, b, at, ct), {\n  singleton: !0\n});\n\nfunction dt(t) {\n  return !!t && (\"smooth\" === t ? \"smooth\" : \"auto\");\n}\n\nvar ft = e.system(function (t) {\n  var n = t[0],\n      r = n.totalCount,\n      o = n.listRefresh,\n      i = t[1],\n      a = i.isAtBottom,\n      l = i.atBottomState,\n      s = t[2].scrollToIndex,\n      u = t[3].scrolledToInitialItem,\n      c = t[4],\n      m = c.propsReady,\n      d = c.didMount,\n      f = t[5].log,\n      h = t[6].scrollingInProgress,\n      g = e.statefulStream(!1),\n      v = e.stream(),\n      S = null;\n\n  function I(t) {\n    e.publish(s, {\n      index: \"LAST\",\n      align: \"end\",\n      behavior: t\n    });\n  }\n\n  function C(t) {\n    var n = e.handleNext(l, function (n) {\n      !t || n.atBottom || \"SIZE_INCREASED\" !== n.notAtBottomBecause || S || (e.getValue(f)(\"scrolling to bottom due to increased size\", {}, p.DEBUG), I(\"auto\"));\n    });\n    setTimeout(n, 100);\n  }\n\n  return e.subscribe(e.pipe(e.combineLatest(e.pipe(e.duc(r), e.skip(1)), d), e.withLatestFrom(e.duc(g), a, u, h), e.map(function (t) {\n    var e = t[0],\n        n = e[0],\n        r = e[1] && t[3],\n        o = \"auto\";\n    return r && (o = function (t, e) {\n      return \"function\" == typeof t ? dt(t(e)) : e && dt(t);\n    }(t[1], t[2] || t[4]), r = r && !!o), {\n      totalCount: n,\n      shouldFollow: r,\n      followOutputBehavior: o\n    };\n  }), e.filter(function (t) {\n    return t.shouldFollow;\n  })), function (t) {\n    var n = t.totalCount,\n        r = t.followOutputBehavior;\n    S && (S(), S = null), S = e.handleNext(o, function () {\n      e.getValue(f)(\"following output to \", {\n        totalCount: n\n      }, p.DEBUG), I(r), S = null;\n    });\n  }), e.subscribe(e.pipe(e.combineLatest(e.duc(g), r, m), e.filter(function (t) {\n    return t[0] && t[2];\n  }), e.scan(function (t, e) {\n    var n = e[1];\n    return {\n      refreshed: t.value === n,\n      value: n\n    };\n  }, {\n    refreshed: !1,\n    value: 0\n  }), e.filter(function (t) {\n    return t.refreshed;\n  }), e.withLatestFrom(g, r)), function (t) {\n    C(!1 !== t[1]);\n  }), e.subscribe(v, function () {\n    C(!1 !== e.getValue(g));\n  }), e.subscribe(e.combineLatest(e.duc(g), l), function (t) {\n    var e = t[1];\n    t[0] && !e.atBottom && \"VIEWPORT_HEIGHT_DECREASING\" === e.notAtBottomBecause && I(\"auto\");\n  }), {\n    followOutput: g,\n    autoscrollToBottom: v\n  };\n}, e.tup(rt, ut, at, mt, ct, v, b));\n\nfunction pt(t) {\n  return t.reduce(function (t, e) {\n    return t.groupIndices.push(t.totalCount), t.totalCount += e + 1, t;\n  }, {\n    totalCount: 0,\n    groupIndices: []\n  });\n}\n\nvar ht = e.system(function (t) {\n  var n = t[0],\n      r = n.totalCount,\n      o = n.groupIndices,\n      i = n.sizes,\n      a = t[1],\n      l = a.scrollTop,\n      s = a.headerHeight,\n      u = e.stream(),\n      c = e.stream(),\n      m = e.streamFromEmitter(e.pipe(u, e.map(pt)));\n  return e.connect(e.pipe(m, e.map(function (t) {\n    return t.totalCount;\n  })), r), e.connect(e.pipe(m, e.map(function (t) {\n    return t.groupIndices;\n  })), o), e.connect(e.pipe(e.combineLatest(l, i, s), e.filter(function (t) {\n    return et(t[1]);\n  }), e.map(function (t) {\n    return k(t[1].groupOffsetTree, Math.max(t[0] - t[2], 0), \"v\")[0];\n  }), e.distinctUntilChanged(), e.map(function (t) {\n    return [t];\n  })), c), {\n    groupCounts: u,\n    topItemsIndexes: c\n  };\n}, e.tup(rt, b));\n\nfunction gt(t, e) {\n  return !(!t || t[0] !== e[0] || t[1] !== e[1]);\n}\n\nfunction vt(t, e) {\n  return !(!t || t.startIndex !== e.startIndex || t.endIndex !== e.endIndex);\n}\n\nfunction St(t, e, n) {\n  return \"number\" == typeof t ? n === lt && \"top\" === e || \"down\" === n && \"bottom\" === e ? t : 0 : n === lt ? \"top\" === e ? t.main : t.reverse : \"bottom\" === e ? t.main : t.reverse;\n}\n\nfunction It(t, e) {\n  return \"number\" == typeof t ? t : t[e] || 0;\n}\n\nvar Ct = e.system(function (t) {\n  var n = t[0],\n      r = n.scrollTop,\n      o = n.viewportHeight,\n      i = n.deviation,\n      a = n.headerHeight,\n      l = n.fixedHeaderHeight,\n      s = e.stream(),\n      u = e.statefulStream(0),\n      c = e.statefulStream(0),\n      m = e.statefulStream(0),\n      d = e.statefulStreamFromEmitter(e.pipe(e.combineLatest(e.duc(r), e.duc(o), e.duc(a), e.duc(s, gt), e.duc(m), e.duc(u), e.duc(l), e.duc(i), e.duc(c)), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        r = t[2],\n        o = t[3],\n        i = o[0],\n        a = o[1],\n        l = t[4],\n        s = t[6],\n        u = t[7],\n        c = t[8],\n        m = e - u,\n        d = t[5] + s,\n        f = Math.max(r - m, 0),\n        p = \"none\",\n        h = It(c, \"top\"),\n        g = It(c, \"bottom\");\n    return i -= u, a += r + s, (i += r + s) > e + d - h && (p = lt), (a -= u) < e - f + n + g && (p = \"down\"), \"none\" !== p ? [Math.max(m - r - St(l, \"top\", p) - h, 0), m - f - s + n + St(l, \"bottom\", p) + g] : null;\n  }), e.filter(function (t) {\n    return null != t;\n  }), e.distinctUntilChanged(gt)), [0, 0]);\n  return {\n    listBoundary: s,\n    overscan: m,\n    topListHeight: u,\n    increaseViewportBy: c,\n    visibleRange: d\n  };\n}, e.tup(b), {\n  singleton: !0\n}),\n    Tt = {\n  items: [],\n  topItems: [],\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0,\n  firstItemIndex: 0\n};\n\nfunction wt(t, e, n) {\n  if (0 === t.length) return [];\n  if (!et(e)) return t.map(function (t) {\n    return u({}, t, {\n      index: t.index + n,\n      originalIndex: t.index\n    });\n  });\n\n  for (var r, o = [], i = A(e.groupOffsetTree, t[0].index, t[t.length - 1].index), a = void 0, l = 0, s = d(t); !(r = s()).done;) {\n    var c = r.value;\n    (!a || a.end < c.index) && (a = i.shift(), l = e.groupIndices.indexOf(a.start)), o.push(u({}, c.index === a.start ? {\n      type: \"group\",\n      index: l\n    } : {\n      index: c.index - (l + 1) + n,\n      groupIndex: l\n    }, {\n      size: c.size,\n      offset: c.offset,\n      originalIndex: c.index,\n      data: c.data\n    }));\n  }\n\n  return o;\n}\n\nfunction xt(t, e, n, r, o, i) {\n  var a = 0,\n      l = 0;\n\n  if (t.length > 0) {\n    a = t[0].offset;\n    var s = t[t.length - 1];\n    l = s.offset + s.size;\n  }\n\n  var u = n - o.lastIndex,\n      c = a,\n      m = o.lastOffset + u * o.lastSize + (u - 1) * r - l;\n  return {\n    items: wt(t, o, i),\n    topItems: wt(e, o, i),\n    topListHeight: e.reduce(function (t, e) {\n      return e.size + t;\n    }, 0),\n    offsetTop: a,\n    offsetBottom: m,\n    top: c,\n    bottom: l,\n    totalCount: n,\n    firstItemIndex: i\n  };\n}\n\nvar bt = e.system(function (t) {\n  var n = t[0],\n      r = n.sizes,\n      o = n.totalCount,\n      i = n.data,\n      a = n.firstItemIndex,\n      l = n.gap,\n      s = t[1],\n      c = t[2],\n      m = c.visibleRange,\n      f = c.listBoundary,\n      p = c.topListHeight,\n      h = t[3],\n      g = h.scrolledToInitialItem,\n      v = h.initialTopMostItemIndex,\n      S = t[4].topListHeight,\n      I = t[5],\n      C = t[6].didMount,\n      T = t[7].recalcInProgress,\n      w = e.statefulStream([]),\n      x = e.stream();\n  e.connect(s.topItemsIndexes, w);\n  var b = e.statefulStreamFromEmitter(e.pipe(e.combineLatest(C, T, e.duc(m, gt), e.duc(o), e.duc(r), e.duc(v), g, e.duc(w), e.duc(a), e.duc(l), i), e.filter(function (t) {\n    return t[0] && !t[1];\n  }), e.map(function (t) {\n    var n = t[2],\n        r = n[0],\n        o = n[1],\n        i = t[3],\n        a = t[5],\n        l = t[6],\n        s = t[7],\n        c = t[8],\n        m = t[9],\n        f = t[10],\n        p = t[4],\n        h = p.sizeTree,\n        g = p.offsetTree;\n    if (0 === i || 0 === r && 0 === o) return u({}, Tt, {\n      totalCount: i\n    });\n    if (H(h)) return xt(function (t, e, n) {\n      if (et(e)) {\n        var r = tt(t, e);\n        return [{\n          index: k(e.groupOffsetTree, r)[0],\n          size: 0,\n          offset: 0\n        }, {\n          index: r,\n          size: 0,\n          offset: 0,\n          data: n && n[0]\n        }];\n      }\n\n      return [{\n        index: t,\n        size: 0,\n        offset: 0,\n        data: n && n[0]\n      }];\n    }(function (t, e) {\n      return \"number\" == typeof t ? t : \"LAST\" === t.index ? e - 1 : t.index;\n    }(a, i), p, f), [], i, m, p, c);\n    var v = [];\n    if (s.length > 0) for (var S, I = s[0], C = s[s.length - 1], T = 0, w = d(A(h, I, C)); !(S = w()).done;) for (var x = S.value, b = x.value, y = Math.max(x.start, I), E = Math.min(x.end, C), R = y; R <= E; R++) v.push({\n      index: R,\n      size: b,\n      offset: T,\n      data: f && f[R]\n    }), T += b;\n    if (!l) return xt([], v, i, m, p, c);\n\n    var L = s.length > 0 ? s[s.length - 1] + 1 : 0,\n        z = function (t, e, n, r) {\n      return void 0 === r && (r = 0), r > 0 && (e = Math.max(e, _(t, r, Y).offset)), W((i = n, l = G(o = t, e, a = q), s = G(o, i, a, l), o.slice(l, s + 1)), Z);\n      var o, i, a, l, s;\n    }(g, r, o, L);\n\n    if (0 === z.length) return null;\n    var B = i - 1;\n    return xt(e.tap([], function (t) {\n      for (var e, n = d(z); !(e = n()).done;) {\n        var i = e.value,\n            a = i.value,\n            l = a.offset,\n            s = i.start,\n            u = a.size;\n\n        if (a.offset < r) {\n          var c = (s += Math.floor((r - a.offset + m) / (u + m))) - i.start;\n          l += c * u + c * m;\n        }\n\n        s < L && (l += (L - s) * u, s = L);\n\n        for (var p = Math.min(i.end, B), h = s; h <= p && !(l >= o); h++) t.push({\n          index: h,\n          size: u,\n          offset: l,\n          data: f && f[h]\n        }), l += u + m;\n      }\n    }), v, i, m, p, c);\n  }), e.filter(function (t) {\n    return null !== t;\n  }), e.distinctUntilChanged()), Tt);\n  return e.connect(e.pipe(i, e.filter(function (t) {\n    return void 0 !== t;\n  }), e.map(function (t) {\n    return t.length;\n  })), o), e.connect(e.pipe(b, e.map(function (t) {\n    return t.topListHeight;\n  })), S), e.connect(S, p), e.connect(e.pipe(b, e.map(function (t) {\n    return [t.top, t.bottom];\n  })), f), e.connect(e.pipe(b, e.map(function (t) {\n    return t.items;\n  })), x), u({\n    listState: b,\n    topItemsIndexes: w,\n    endReached: e.streamFromEmitter(e.pipe(b, e.filter(function (t) {\n      return t.items.length > 0;\n    }), e.withLatestFrom(o, i), e.filter(function (t) {\n      var e = t[0].items;\n      return e[e.length - 1].originalIndex === t[1] - 1;\n    }), e.map(function (t) {\n      return [t[1] - 1, t[2]];\n    }), e.distinctUntilChanged(gt), e.map(function (t) {\n      return t[0];\n    }))),\n    startReached: e.streamFromEmitter(e.pipe(b, e.throttleTime(200), e.filter(function (t) {\n      var e = t.items;\n      return e.length > 0 && e[0].originalIndex === t.topItems.length;\n    }), e.map(function (t) {\n      return t.items[0].index;\n    }), e.distinctUntilChanged())),\n    rangeChanged: e.streamFromEmitter(e.pipe(b, e.filter(function (t) {\n      return t.items.length > 0;\n    }), e.map(function (t) {\n      for (var e = t.items, n = 0, r = e.length - 1; \"group\" === e[n].type && n < r;) n++;\n\n      for (; \"group\" === e[r].type && r > n;) r--;\n\n      return {\n        startIndex: e[n].index,\n        endIndex: e[r].index\n      };\n    }), e.distinctUntilChanged(vt))),\n    itemsRendered: x\n  }, I);\n}, e.tup(rt, ht, Ct, mt, at, ut, ct, j), {\n  singleton: !0\n}),\n    yt = e.system(function (t) {\n  var n = t[0],\n      r = n.sizes,\n      o = n.firstItemIndex,\n      i = n.data,\n      a = n.gap,\n      l = t[1].listState,\n      s = t[2].didMount,\n      u = e.statefulStream(0);\n  return e.connect(e.pipe(s, e.withLatestFrom(u), e.filter(function (t) {\n    return 0 !== t[1];\n  }), e.withLatestFrom(r, o, a, i), e.map(function (t) {\n    var e = t[0][1],\n        n = t[1],\n        r = t[2],\n        o = t[3],\n        i = t[4],\n        a = void 0 === i ? [] : i,\n        l = 0;\n    if (n.groupIndices.length > 0) for (var s, u = d(n.groupIndices); !((s = u()).done || s.value - l >= e);) l++;\n    var c = e + l;\n    return xt(Array.from({\n      length: c\n    }).map(function (t, e) {\n      return {\n        index: e,\n        size: 0,\n        offset: 0,\n        data: a[e]\n      };\n    }), [], c, o, n, r);\n  })), l), {\n    initialItemCount: u\n  };\n}, e.tup(rt, bt, ct), {\n  singleton: !0\n}),\n    Et = e.system(function (t) {\n  var n = t[0].scrollVelocity,\n      r = e.statefulStream(!1),\n      o = e.stream(),\n      i = e.statefulStream(!1);\n  return e.connect(e.pipe(n, e.withLatestFrom(i, r, o), e.filter(function (t) {\n    return !!t[1];\n  }), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        r = t[2],\n        o = t[3],\n        i = n.enter;\n\n    if (r) {\n      if ((0, n.exit)(e, o)) return !1;\n    } else if (i(e, o)) return !0;\n\n    return r;\n  }), e.distinctUntilChanged()), r), e.subscribe(e.pipe(e.combineLatest(r, n, o), e.withLatestFrom(i)), function (t) {\n    var e = t[0],\n        n = t[1];\n    return e[0] && n && n.change && n.change(e[1], e[2]);\n  }), {\n    isSeeking: r,\n    scrollSeekConfiguration: i,\n    scrollVelocity: n,\n    scrollSeekRangeChanged: o\n  };\n}, e.tup(ut), {\n  singleton: !0\n}),\n    Ht = e.system(function (t) {\n  var n = t[0].topItemsIndexes,\n      r = e.statefulStream(0);\n  return e.connect(e.pipe(r, e.filter(function (t) {\n    return t > 0;\n  }), e.map(function (t) {\n    return Array.from({\n      length: t\n    }).map(function (t, e) {\n      return e;\n    });\n  })), n), {\n    topItemCount: r\n  };\n}, e.tup(bt)),\n    Rt = e.system(function (t) {\n  var n = t[0],\n      r = n.footerHeight,\n      o = n.headerHeight,\n      i = n.fixedHeaderHeight,\n      a = t[1].listState,\n      l = e.stream(),\n      s = e.statefulStreamFromEmitter(e.pipe(e.combineLatest(r, o, i, a), e.map(function (t) {\n    var e = t[3];\n    return t[0] + t[1] + t[2] + e.offsetBottom + e.bottom;\n  })), 0);\n  return e.connect(e.duc(s), l), {\n    totalListHeight: s,\n    totalListHeightChanged: l\n  };\n}, e.tup(b, bt), {\n  singleton: !0\n});\n\nfunction Lt(t) {\n  var e,\n      n = !1;\n  return function () {\n    return n || (n = !0, e = t()), e;\n  };\n}\n\nvar kt = Lt(function () {\n  return /iP(ad|hone|od).+Version\\/[\\d.]+.*Safari/i.test(navigator.userAgent);\n}),\n    zt = e.system(function (t) {\n  var n = t[0],\n      r = n.scrollBy,\n      o = n.scrollTop,\n      i = n.deviation,\n      a = n.scrollingInProgress,\n      l = t[1],\n      s = l.isScrolling,\n      u = l.isAtBottom,\n      c = l.scrollDirection,\n      m = t[3],\n      d = m.beforeUnshiftWith,\n      f = m.shiftWithOffset,\n      h = m.sizes,\n      g = m.gap,\n      v = t[4].log,\n      S = t[5].recalcInProgress,\n      I = e.streamFromEmitter(e.pipe(t[2].listState, e.withLatestFrom(l.lastJumpDueToItemResize), e.scan(function (t, e) {\n    var n = t[1],\n        r = e[0],\n        o = r.items,\n        i = r.totalCount,\n        a = r.bottom + r.offsetBottom,\n        l = 0;\n    return t[2] === i && n.length > 0 && o.length > 0 && (0 === o[0].originalIndex && 0 === n[0].originalIndex || 0 != (l = a - t[3]) && (l += e[1])), [l, o, i, a];\n  }, [0, [], 0, 0]), e.filter(function (t) {\n    return 0 !== t[0];\n  }), e.withLatestFrom(o, c, a, u, v), e.filter(function (t) {\n    return !t[3] && 0 !== t[1] && t[2] === lt;\n  }), e.map(function (t) {\n    var e = t[0][0];\n    return (0, t[5])(\"Upward scrolling compensation\", {\n      amount: e\n    }, p.DEBUG), e;\n  })));\n\n  function C(t) {\n    t > 0 ? (e.publish(r, {\n      top: -t,\n      behavior: \"auto\"\n    }), e.publish(i, 0)) : (e.publish(i, 0), e.publish(r, {\n      top: -t,\n      behavior: \"auto\"\n    }));\n  }\n\n  return e.subscribe(e.pipe(I, e.withLatestFrom(i, s)), function (t) {\n    var n = t[0],\n        r = t[1];\n    t[2] && kt() ? e.publish(i, r - n) : C(-n);\n  }), e.subscribe(e.pipe(e.combineLatest(e.statefulStreamFromEmitter(s, !1), i, S), e.filter(function (t) {\n    return !t[0] && !t[2] && 0 !== t[1];\n  }), e.map(function (t) {\n    return t[1];\n  }), e.throttleTime(1)), C), e.connect(e.pipe(f, e.map(function (t) {\n    return {\n      top: -t\n    };\n  })), r), e.subscribe(e.pipe(d, e.withLatestFrom(h, g), e.map(function (t) {\n    var e = t[0];\n    return e * t[1].lastSize + e * t[2];\n  })), function (t) {\n    e.publish(i, t), requestAnimationFrame(function () {\n      e.publish(r, {\n        top: t\n      }), requestAnimationFrame(function () {\n        e.publish(i, 0), e.publish(S, !1);\n      });\n    });\n  }), {\n    deviation: i\n  };\n}, e.tup(b, ut, bt, rt, v, j)),\n    Bt = e.system(function (t) {\n  var n = t[0].totalListHeight,\n      r = t[1].didMount,\n      o = t[2].scrollTo,\n      i = e.statefulStream(0);\n  return e.subscribe(e.pipe(r, e.withLatestFrom(i), e.filter(function (t) {\n    return 0 !== t[1];\n  }), e.map(function (t) {\n    return {\n      top: t[1]\n    };\n  })), function (t) {\n    e.handleNext(e.pipe(n, e.filter(function (t) {\n      return 0 !== t;\n    })), function () {\n      setTimeout(function () {\n        e.publish(o, t);\n      });\n    });\n  }), {\n    initialScrollTop: i\n  };\n}, e.tup(Rt, ct, b), {\n  singleton: !0\n}),\n    Ft = e.system(function (t) {\n  var n = t[0].viewportHeight,\n      r = t[1].totalListHeight,\n      o = e.statefulStream(!1);\n  return {\n    alignToBottom: o,\n    paddingTopAddition: e.statefulStreamFromEmitter(e.pipe(e.combineLatest(o, n, r), e.filter(function (t) {\n      return t[0];\n    }), e.map(function (t) {\n      return Math.max(0, t[1] - t[2]);\n    }), e.distinctUntilChanged()), 0)\n  };\n}, e.tup(b, Rt), {\n  singleton: !0\n}),\n    Pt = e.system(function (t) {\n  var n = t[0],\n      r = n.scrollTo,\n      o = n.scrollContainerState,\n      i = e.stream(),\n      a = e.stream(),\n      l = e.stream(),\n      s = e.statefulStream(!1),\n      c = e.statefulStream(void 0);\n  return e.connect(e.pipe(e.combineLatest(i, a), e.map(function (t) {\n    var e = t[0],\n        n = e.viewportHeight,\n        r = e.scrollHeight;\n    return {\n      scrollTop: Math.max(0, e.scrollTop - t[1].offsetTop),\n      scrollHeight: r,\n      viewportHeight: n\n    };\n  })), o), e.connect(e.pipe(r, e.withLatestFrom(a), e.map(function (t) {\n    var e = t[0];\n    return u({}, e, {\n      top: e.top + t[1].offsetTop\n    });\n  })), l), {\n    useWindowScroll: s,\n    customScrollParent: c,\n    windowScrollContainerState: i,\n    windowViewportRect: a,\n    windowScrollTo: l\n  };\n}, e.tup(b)),\n    Ot = [\"done\", \"behavior\", \"align\"],\n    Mt = e.system(function (t) {\n  var n = t[0],\n      r = n.sizes,\n      o = n.totalCount,\n      i = n.gap,\n      a = t[1],\n      l = a.scrollTop,\n      s = a.viewportHeight,\n      m = a.headerHeight,\n      d = a.scrollingInProgress,\n      f = t[2].scrollToIndex,\n      p = e.stream();\n  return e.connect(e.pipe(p, e.withLatestFrom(r, s, o, m, l, i), e.map(function (t) {\n    var n = t[0],\n        r = t[1],\n        o = t[2],\n        i = t[3],\n        a = t[4],\n        l = t[5],\n        s = t[6],\n        m = n.done,\n        f = n.behavior,\n        p = n.align,\n        h = c(n, Ot),\n        g = null,\n        v = X(n, r, i - 1),\n        S = Q(v, r.offsetTree, s) + a;\n    return S < l ? g = u({}, h, {\n      behavior: f,\n      align: null != p ? p : \"start\"\n    }) : S + k(r.sizeTree, v)[1] > l + o && (g = u({}, h, {\n      behavior: f,\n      align: null != p ? p : \"end\"\n    })), g ? m && e.handleNext(e.pipe(d, e.skip(1), e.filter(function (t) {\n      return !1 === t;\n    })), m) : m && m(), g;\n  }), e.filter(function (t) {\n    return null !== t;\n  })), f), {\n    scrollIntoView: p\n  };\n}, e.tup(rt, b, at, bt, v), {\n  singleton: !0\n}),\n    Vt = [\"listState\", \"topItemsIndexes\"],\n    Ut = e.system(function (t) {\n  return u({}, t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]);\n}, e.tup(Ct, yt, ct, Et, Rt, Bt, Ft, Pt, Mt)),\n    At = e.system(function (t) {\n  var n = t[0],\n      r = n.totalCount,\n      o = n.sizeRanges,\n      i = n.fixedItemSize,\n      a = n.defaultItemSize,\n      l = n.trackItemSizes,\n      s = n.itemSize,\n      m = n.data,\n      d = n.firstItemIndex,\n      f = n.groupIndices,\n      p = n.statefulTotalCount,\n      h = n.gap,\n      g = t[1],\n      v = g.initialTopMostItemIndex,\n      S = g.scrolledToInitialItem,\n      I = t[2],\n      C = t[3],\n      T = t[4],\n      w = T.listState,\n      x = T.topItemsIndexes,\n      b = c(T, Vt),\n      y = t[5].scrollToIndex,\n      E = t[7].topItemCount,\n      H = t[8].groupCounts,\n      R = t[9],\n      L = t[10];\n  return e.connect(b.rangeChanged, R.scrollSeekRangeChanged), e.connect(e.pipe(R.windowViewportRect, e.map(function (t) {\n    return t.visibleHeight;\n  })), I.viewportHeight), u({\n    totalCount: r,\n    data: m,\n    firstItemIndex: d,\n    sizeRanges: o,\n    initialTopMostItemIndex: v,\n    scrolledToInitialItem: S,\n    topItemsIndexes: x,\n    topItemCount: E,\n    groupCounts: H,\n    fixedItemHeight: i,\n    defaultItemHeight: a,\n    gap: h\n  }, C, {\n    statefulTotalCount: p,\n    listState: w,\n    scrollToIndex: y,\n    trackItemSizes: l,\n    itemSize: s,\n    groupIndices: f\n  }, b, R, I, L);\n}, e.tup(rt, mt, b, ft, bt, at, zt, Ht, ht, Ut, v)),\n    Wt = Lt(function () {\n  if (\"undefined\" == typeof document) return \"sticky\";\n  var t = document.createElement(\"div\");\n  return t.style.position = \"-webkit-sticky\", \"-webkit-sticky\" === t.style.position ? \"-webkit-sticky\" : \"sticky\";\n});\n\nfunction Nt(t, e) {\n  var n = i(null),\n      r = a(function (r) {\n    if (null !== r && r.offsetParent) {\n      var o,\n          i,\n          a = r.getBoundingClientRect(),\n          l = a.width;\n\n      if (e) {\n        var s = e.getBoundingClientRect(),\n            u = a.top - s.top;\n        o = s.height - Math.max(0, u), i = u + e.scrollTop;\n      } else o = window.innerHeight - Math.max(0, a.top), i = a.top + window.pageYOffset;\n\n      n.current = {\n        offsetTop: i,\n        visibleHeight: o,\n        visibleWidth: l\n      }, t(n.current);\n    }\n  }, [t, e]),\n      l = S(r),\n      s = l.callbackRef,\n      u = l.ref,\n      c = a(function () {\n    r(u.current);\n  }, [r, u]);\n  return o(function () {\n    if (e) {\n      e.addEventListener(\"scroll\", c);\n      var t = new ResizeObserver(c);\n      return t.observe(e), function () {\n        e.removeEventListener(\"scroll\", c), t.unobserve(e);\n      };\n    }\n\n    return window.addEventListener(\"scroll\", c), window.addEventListener(\"resize\", c), function () {\n      window.removeEventListener(\"scroll\", c), window.removeEventListener(\"resize\", c);\n    };\n  }, [c, e]), s;\n}\n\nvar Dt = [\"placeholder\"],\n    Gt = [\"style\", \"children\"],\n    _t = [\"style\", \"children\"];\n\nfunction jt(t) {\n  return t;\n}\n\nvar Kt = e.system(function () {\n  var t = e.statefulStream(function (t) {\n    return \"Item \" + t;\n  }),\n      n = e.statefulStream(null),\n      r = e.statefulStream(function (t) {\n    return \"Group \" + t;\n  }),\n      o = e.statefulStream({}),\n      i = e.statefulStream(jt),\n      a = e.statefulStream(\"div\"),\n      l = e.statefulStream(e.noop),\n      s = function (t, n) {\n    return void 0 === n && (n = null), e.statefulStreamFromEmitter(e.pipe(o, e.map(function (e) {\n      return e[t];\n    }), e.distinctUntilChanged()), n);\n  };\n\n  return {\n    context: n,\n    itemContent: t,\n    groupContent: r,\n    components: o,\n    computeItemKey: i,\n    headerFooterTag: a,\n    scrollerRef: l,\n    FooterComponent: s(\"Footer\"),\n    HeaderComponent: s(\"Header\"),\n    TopItemListComponent: s(\"TopItemList\"),\n    ListComponent: s(\"List\", \"div\"),\n    ItemComponent: s(\"Item\", \"div\"),\n    GroupComponent: s(\"Group\", \"div\"),\n    ScrollerComponent: s(\"Scroller\", \"div\"),\n    EmptyPlaceholder: s(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: s(\"ScrollSeekPlaceholder\")\n  };\n});\n\nfunction Yt(t, n) {\n  var r = e.stream();\n  return e.subscribe(r, function () {\n    return console.warn(\"react-virtuoso: You are using a deprecated property. \" + n, \"color: red;\", \"color: inherit;\", \"color: blue;\");\n  }), e.connect(r, t), r;\n}\n\nvar qt = e.system(function (t) {\n  var n = t[0],\n      r = t[1],\n      o = {\n    item: Yt(r.itemContent, \"Rename the %citem%c prop to %citemContent.\"),\n    group: Yt(r.groupContent, \"Rename the %cgroup%c prop to %cgroupContent.\"),\n    topItems: Yt(n.topItemCount, \"Rename the %ctopItems%c prop to %ctopItemCount.\"),\n    itemHeight: Yt(n.fixedItemHeight, \"Rename the %citemHeight%c prop to %cfixedItemHeight.\"),\n    scrollingStateChange: Yt(n.isScrolling, \"Rename the %cscrollingStateChange%c prop to %cisScrolling.\"),\n    adjustForPrependedItems: e.stream(),\n    maxHeightCacheSize: e.stream(),\n    footer: e.stream(),\n    header: e.stream(),\n    HeaderContainer: e.stream(),\n    FooterContainer: e.stream(),\n    ItemContainer: e.stream(),\n    ScrollContainer: e.stream(),\n    GroupContainer: e.stream(),\n    ListContainer: e.stream(),\n    emptyComponent: e.stream(),\n    scrollSeek: e.stream()\n  };\n\n  function i(t, n, o) {\n    e.connect(e.pipe(t, e.withLatestFrom(r.components), e.map(function (t) {\n      var e,\n          r = t[0],\n          i = t[1];\n      return console.warn(\"react-virtuoso: \" + o + \" property is deprecated. Pass components.\" + n + \" instead.\"), u({}, i, ((e = {})[n] = r, e));\n    })), r.components);\n  }\n\n  return e.subscribe(o.adjustForPrependedItems, function () {\n    console.warn(\"react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.\", \"color: red;\", \"color: inherit;\", \"color: blue;\");\n  }), e.subscribe(o.maxHeightCacheSize, function () {\n    console.warn(\"react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.\");\n  }), e.subscribe(o.HeaderContainer, function () {\n    console.warn(\"react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.\");\n  }), e.subscribe(o.FooterContainer, function () {\n    console.warn(\"react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.\");\n  }), e.subscribe(o.scrollSeek, function (t) {\n    var o = t.placeholder,\n        i = c(t, Dt);\n    console.warn(\"react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.\"), e.publish(r.components, u({}, e.getValue(r.components), {\n      ScrollSeekPlaceholder: o\n    })), e.publish(n.scrollSeekConfiguration, i);\n  }), i(o.footer, \"Footer\", \"footer\"), i(o.header, \"Header\", \"header\"), i(o.ItemContainer, \"Item\", \"ItemContainer\"), i(o.ListContainer, \"List\", \"ListContainer\"), i(o.ScrollContainer, \"Scroller\", \"ScrollContainer\"), i(o.emptyComponent, \"EmptyPlaceholder\", \"emptyComponent\"), i(o.GroupContainer, \"Group\", \"GroupContainer\"), u({}, n, r, o);\n}, e.tup(At, Kt)),\n    Zt = function (t) {\n  return n.createElement(\"div\", {\n    style: {\n      height: t.height\n    }\n  });\n},\n    Jt = {\n  position: Wt(),\n  zIndex: 1,\n  overflowAnchor: \"none\"\n},\n    $t = {\n  overflowAnchor: \"none\"\n},\n    Qt = n.memo(function (t) {\n  var r = t.showTopList,\n      o = void 0 !== r && r,\n      i = fe(\"listState\"),\n      a = de(\"sizeRanges\"),\n      s = fe(\"useWindowScroll\"),\n      c = fe(\"customScrollParent\"),\n      m = de(\"windowScrollContainerState\"),\n      d = de(\"scrollContainerState\"),\n      f = c || s ? m : d,\n      p = fe(\"itemContent\"),\n      h = fe(\"context\"),\n      g = fe(\"groupContent\"),\n      v = fe(\"trackItemSizes\"),\n      S = fe(\"itemSize\"),\n      I = fe(\"log\"),\n      T = de(\"gap\"),\n      w = C(a, S, v, o ? e.noop : f, I, T, c).callbackRef,\n      x = n.useState(0),\n      b = x[0],\n      y = x[1];\n  pe(\"deviation\", function (t) {\n    b !== t && y(t);\n  });\n  var E = fe(\"EmptyPlaceholder\"),\n      H = fe(\"ScrollSeekPlaceholder\") || Zt,\n      R = fe(\"ListComponent\"),\n      L = fe(\"ItemComponent\"),\n      k = fe(\"GroupComponent\"),\n      z = fe(\"computeItemKey\"),\n      B = fe(\"isSeeking\"),\n      F = fe(\"groupIndices\").length > 0,\n      P = fe(\"paddingTopAddition\"),\n      O = o ? {} : {\n    boxSizing: \"border-box\",\n    paddingTop: i.offsetTop + P,\n    paddingBottom: i.offsetBottom,\n    marginTop: b\n  };\n  return !o && 0 === i.totalCount && E ? l(E, ne(E, h)) : l(R, u({}, ne(R, h), {\n    ref: w,\n    style: O,\n    \"data-test-id\": o ? \"virtuoso-top-item-list\" : \"virtuoso-item-list\"\n  }), (o ? i.topItems : i.items).map(function (t) {\n    var e = t.originalIndex,\n        n = z(e + i.firstItemIndex, t.data, h);\n    return B ? l(H, u({}, ne(H, h), {\n      key: n,\n      index: t.index,\n      height: t.size,\n      type: t.type || \"item\"\n    }, \"group\" === t.type ? {} : {\n      groupIndex: t.groupIndex\n    })) : \"group\" === t.type ? l(k, u({}, ne(k, h), {\n      key: n,\n      \"data-index\": e,\n      \"data-known-size\": t.size,\n      \"data-item-index\": t.index,\n      style: Jt\n    }), g(t.index)) : l(L, u({}, ne(L, h), {\n      key: n,\n      \"data-index\": e,\n      \"data-known-size\": t.size,\n      \"data-item-index\": t.index,\n      \"data-item-group-index\": t.groupIndex,\n      style: $t\n    }), F ? p(t.index, t.groupIndex, t.data, h) : p(t.index, t.data, h));\n  }));\n}),\n    Xt = {\n  height: \"100%\",\n  outline: \"none\",\n  overflowY: \"auto\",\n  position: \"relative\",\n  WebkitOverflowScrolling: \"touch\"\n},\n    te = {\n  width: \"100%\",\n  height: \"100%\",\n  position: \"absolute\",\n  top: 0\n},\n    ee = {\n  width: \"100%\",\n  position: Wt(),\n  top: 0\n};\n\nfunction ne(t, e) {\n  if (\"string\" != typeof t) return {\n    context: e\n  };\n}\n\nvar re = n.memo(function () {\n  var t = fe(\"HeaderComponent\"),\n      e = de(\"headerHeight\"),\n      n = fe(\"headerFooterTag\"),\n      r = I(function (t) {\n    return e(T(t, \"height\"));\n  }),\n      o = fe(\"context\");\n  return t ? l(n, {\n    ref: r\n  }, l(t, ne(t, o))) : null;\n}),\n    oe = n.memo(function () {\n  var t = fe(\"FooterComponent\"),\n      e = de(\"footerHeight\"),\n      n = fe(\"headerFooterTag\"),\n      r = I(function (t) {\n    return e(T(t, \"height\"));\n  }),\n      o = fe(\"context\");\n  return t ? l(n, {\n    ref: r\n  }, l(t, ne(t, o))) : null;\n});\n\nfunction ie(t) {\n  var e = t.usePublisher,\n      r = t.useEmitter,\n      o = t.useEmitterValue;\n  return n.memo(function (t) {\n    var n = t.style,\n        i = t.children,\n        a = c(t, Gt),\n        s = e(\"scrollContainerState\"),\n        m = o(\"ScrollerComponent\"),\n        d = e(\"smoothScrollTargetReached\"),\n        f = o(\"scrollerRef\"),\n        p = o(\"context\"),\n        h = x(s, d, m, f),\n        g = h.scrollerRef,\n        v = h.scrollByCallback;\n    return r(\"scrollTo\", h.scrollToCallback), r(\"scrollBy\", v), l(m, u({\n      ref: g,\n      style: u({}, Xt, n),\n      \"data-test-id\": \"virtuoso-scroller\",\n      \"data-virtuoso-scroller\": !0,\n      tabIndex: 0\n    }, a, ne(m, p)), i);\n  });\n}\n\nfunction ae(t) {\n  var r = t.usePublisher,\n      o = t.useEmitter,\n      i = t.useEmitterValue;\n  return n.memo(function (t) {\n    var n = t.style,\n        a = t.children,\n        s = c(t, _t),\n        m = r(\"windowScrollContainerState\"),\n        d = i(\"ScrollerComponent\"),\n        f = r(\"smoothScrollTargetReached\"),\n        p = i(\"totalListHeight\"),\n        g = i(\"deviation\"),\n        v = i(\"customScrollParent\"),\n        S = i(\"context\"),\n        I = x(m, f, d, e.noop, v),\n        C = I.scrollerRef,\n        T = I.scrollByCallback,\n        w = I.scrollToCallback;\n    return h(function () {\n      return C.current = v || window, function () {\n        C.current = null;\n      };\n    }, [C, v]), o(\"windowScrollTo\", w), o(\"scrollBy\", T), l(d, u({\n      style: u({\n        position: \"relative\"\n      }, n, 0 !== p ? {\n        height: p + g\n      } : {}),\n      \"data-virtuoso-scroller\": !0\n    }, s, ne(d, S)), a);\n  });\n}\n\nvar le = function (t) {\n  var r = t.children,\n      o = de(\"viewportHeight\"),\n      i = I(e.compose(o, function (t) {\n    return T(t, \"height\");\n  }));\n  return n.createElement(\"div\", {\n    style: te,\n    ref: i,\n    \"data-viewport-type\": \"element\"\n  }, r);\n},\n    se = function (t) {\n  var e = t.children,\n      r = Nt(de(\"windowViewportRect\"), fe(\"customScrollParent\"));\n  return n.createElement(\"div\", {\n    ref: r,\n    style: te,\n    \"data-viewport-type\": \"window\"\n  }, e);\n},\n    ue = function (t) {\n  var e = t.children,\n      n = fe(\"TopItemListComponent\"),\n      r = fe(\"headerHeight\"),\n      o = u({}, ee, {\n    marginTop: r + \"px\"\n  }),\n      i = fe(\"context\");\n  return l(n || \"div\", {\n    style: o,\n    context: i\n  }, e);\n},\n    ce = t(qt, {\n  required: {},\n  optional: {\n    context: \"context\",\n    followOutput: \"followOutput\",\n    firstItemIndex: \"firstItemIndex\",\n    itemContent: \"itemContent\",\n    groupContent: \"groupContent\",\n    overscan: \"overscan\",\n    increaseViewportBy: \"increaseViewportBy\",\n    totalCount: \"totalCount\",\n    topItemCount: \"topItemCount\",\n    initialTopMostItemIndex: \"initialTopMostItemIndex\",\n    components: \"components\",\n    groupCounts: \"groupCounts\",\n    atBottomThreshold: \"atBottomThreshold\",\n    atTopThreshold: \"atTopThreshold\",\n    computeItemKey: \"computeItemKey\",\n    defaultItemHeight: \"defaultItemHeight\",\n    fixedItemHeight: \"fixedItemHeight\",\n    itemSize: \"itemSize\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    headerFooterTag: \"headerFooterTag\",\n    data: \"data\",\n    initialItemCount: \"initialItemCount\",\n    initialScrollTop: \"initialScrollTop\",\n    alignToBottom: \"alignToBottom\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    logLevel: \"logLevel\",\n    react18ConcurrentRendering: \"react18ConcurrentRendering\",\n    item: \"item\",\n    group: \"group\",\n    topItems: \"topItems\",\n    itemHeight: \"itemHeight\",\n    scrollingStateChange: \"scrollingStateChange\",\n    maxHeightCacheSize: \"maxHeightCacheSize\",\n    footer: \"footer\",\n    header: \"header\",\n    ItemContainer: \"ItemContainer\",\n    ScrollContainer: \"ScrollContainer\",\n    ListContainer: \"ListContainer\",\n    GroupContainer: \"GroupContainer\",\n    emptyComponent: \"emptyComponent\",\n    HeaderContainer: \"HeaderContainer\",\n    FooterContainer: \"FooterContainer\",\n    scrollSeek: \"scrollSeek\"\n  },\n  methods: {\n    scrollToIndex: \"scrollToIndex\",\n    scrollIntoView: \"scrollIntoView\",\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\",\n    adjustForPrependedItems: \"adjustForPrependedItems\",\n    autoscrollToBottom: \"autoscrollToBottom\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\",\n    totalListHeightChanged: \"totalListHeightChanged\",\n    itemsRendered: \"itemsRendered\",\n    groupIndices: \"groupIndices\"\n  }\n}, n.memo(function (t) {\n  var e = fe(\"useWindowScroll\"),\n      r = fe(\"topItemsIndexes\").length > 0,\n      o = fe(\"customScrollParent\"),\n      i = o || e ? se : le;\n  return n.createElement(o || e ? ge : he, u({}, t), n.createElement(i, null, n.createElement(re, null), n.createElement(Qt, null), n.createElement(oe, null)), r && n.createElement(ue, null, n.createElement(Qt, {\n    showTopList: !0\n  })));\n})),\n    me = ce.Component,\n    de = ce.usePublisher,\n    fe = ce.useEmitterValue,\n    pe = ce.useEmitter,\n    he = ie({\n  usePublisher: de,\n  useEmitterValue: fe,\n  useEmitter: pe\n}),\n    ge = ae({\n  usePublisher: de,\n  useEmitterValue: fe,\n  useEmitter: pe\n}),\n    ve = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n},\n    Se = {\n  items: [{\n    index: 0\n  }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n},\n    Ie = Math.round,\n    Ce = Math.ceil,\n    Te = Math.floor,\n    we = Math.min,\n    xe = Math.max;\n\nfunction be(t, e) {\n  return Array.from({\n    length: e - t + 1\n  }).map(function (e, n) {\n    return {\n      index: n + t\n    };\n  });\n}\n\nfunction ye(t, e) {\n  return t && t.column === e.column && t.row === e.row;\n}\n\nvar Ee = e.system(function (t) {\n  var n = t[0],\n      r = n.overscan,\n      o = n.visibleRange,\n      i = n.listBoundary,\n      a = t[1],\n      l = a.scrollTop,\n      s = a.viewportHeight,\n      c = a.scrollBy,\n      m = a.scrollTo,\n      d = a.smoothScrollTargetReached,\n      f = a.scrollContainerState,\n      p = t[2],\n      h = t[3],\n      g = t[4],\n      v = g.propsReady,\n      S = g.didMount,\n      I = t[5],\n      C = I.windowViewportRect,\n      T = I.windowScrollTo,\n      w = I.useWindowScroll,\n      x = I.customScrollParent,\n      b = I.windowScrollContainerState,\n      y = t[6],\n      E = e.statefulStream(0),\n      H = e.statefulStream(0),\n      R = e.statefulStream(ve),\n      L = e.statefulStream({\n    height: 0,\n    width: 0\n  }),\n      k = e.statefulStream({\n    height: 0,\n    width: 0\n  }),\n      z = e.stream(),\n      B = e.stream(),\n      F = e.statefulStream(0),\n      P = e.statefulStream({\n    row: 0,\n    column: 0\n  });\n  e.connect(e.pipe(S, e.withLatestFrom(H), e.filter(function (t) {\n    return 0 !== t[1];\n  }), e.map(function (t) {\n    return {\n      items: be(0, t[1] - 1),\n      top: 0,\n      bottom: 0,\n      offsetBottom: 0,\n      offsetTop: 0,\n      itemHeight: 0,\n      itemWidth: 0\n    };\n  })), R), e.connect(e.pipe(e.combineLatest(e.duc(E), o, e.duc(P, ye), e.duc(k, function (t, e) {\n    return t && t.width === e.width && t.height === e.height;\n  })), e.withLatestFrom(L), e.map(function (t) {\n    var e = t[0],\n        n = e[0],\n        r = e[1],\n        o = r[0],\n        i = r[1],\n        a = e[2],\n        l = e[3],\n        s = t[1],\n        u = a.row,\n        c = l.height,\n        m = l.width,\n        d = s.width;\n    if (0 === n || 0 === d) return ve;\n    if (0 === m) return Se;\n    var f = Le(d, m, a.column),\n        p = f * Te((o + u) / (c + u)),\n        h = f * Ce((i + u) / (c + u)) - 1;\n    h = xe(0, we(n - 1, h));\n    var g = be(p = we(h, xe(0, p)), h),\n        v = He(s, a, l, g),\n        S = v.top,\n        I = v.bottom,\n        C = Ce(n / f);\n    return {\n      items: g,\n      offsetTop: S,\n      offsetBottom: C * c + (C - 1) * u - I,\n      top: S,\n      bottom: I,\n      itemHeight: c,\n      itemWidth: m\n    };\n  })), R), e.connect(e.pipe(L, e.map(function (t) {\n    return t.height;\n  })), s), e.connect(e.pipe(e.combineLatest(L, k, R, P), e.map(function (t) {\n    var e = He(t[0], t[3], t[1], t[2].items);\n    return [e.top, e.bottom];\n  }), e.distinctUntilChanged(gt)), i);\n  var O = e.streamFromEmitter(e.pipe(e.duc(R), e.filter(function (t) {\n    return t.items.length > 0;\n  }), e.withLatestFrom(E), e.filter(function (t) {\n    var e = t[0].items;\n    return e[e.length - 1].index === t[1] - 1;\n  }), e.map(function (t) {\n    return t[1] - 1;\n  }), e.distinctUntilChanged())),\n      M = e.streamFromEmitter(e.pipe(e.duc(R), e.filter(function (t) {\n    var e = t.items;\n    return e.length > 0 && 0 === e[0].index;\n  }), e.mapTo(0), e.distinctUntilChanged())),\n      V = e.streamFromEmitter(e.pipe(e.duc(R), e.filter(function (t) {\n    return t.items.length > 0;\n  }), e.map(function (t) {\n    var e = t.items;\n    return {\n      startIndex: e[0].index,\n      endIndex: e[e.length - 1].index\n    };\n  }), e.distinctUntilChanged(vt)));\n  e.connect(V, h.scrollSeekRangeChanged), e.connect(e.pipe(z, e.withLatestFrom(L, k, E, P), e.map(function (t) {\n    var e = t[1],\n        n = t[2],\n        r = t[3],\n        o = t[4],\n        i = it(t[0]),\n        a = i.align,\n        l = i.behavior,\n        s = i.offset,\n        u = i.index;\n    \"LAST\" === u && (u = r - 1);\n    var c = Re(e, o, n, u = xe(0, u, we(r - 1, u)));\n    return \"end\" === a ? c = Ie(c - e.height + n.height) : \"center\" === a && (c = Ie(c - e.height / 2 + n.height / 2)), s && (c += s), {\n      top: c,\n      behavior: l\n    };\n  })), m);\n  var U = e.statefulStreamFromEmitter(e.pipe(R, e.map(function (t) {\n    return t.offsetBottom + t.bottom;\n  })), 0);\n  return e.connect(e.pipe(C, e.map(function (t) {\n    return {\n      width: t.visibleWidth,\n      height: t.visibleHeight\n    };\n  })), L), u({\n    totalCount: E,\n    viewportDimensions: L,\n    itemDimensions: k,\n    scrollTop: l,\n    scrollHeight: B,\n    overscan: r,\n    scrollBy: c,\n    scrollTo: m,\n    scrollToIndex: z,\n    smoothScrollTargetReached: d,\n    windowViewportRect: C,\n    windowScrollTo: T,\n    useWindowScroll: w,\n    customScrollParent: x,\n    windowScrollContainerState: b,\n    deviation: F,\n    scrollContainerState: f,\n    initialItemCount: H,\n    gap: P\n  }, h, {\n    gridState: R,\n    totalListHeight: U\n  }, p, {\n    startReached: M,\n    endReached: O,\n    rangeChanged: V,\n    propsReady: v\n  }, y);\n}, e.tup(Ct, b, ut, Et, ct, Pt, v));\n\nfunction He(t, e, n, r) {\n  var o = n.height;\n  return void 0 === o || 0 === r.length ? {\n    top: 0,\n    bottom: 0\n  } : {\n    top: Re(t, e, n, r[0].index),\n    bottom: Re(t, e, n, r[r.length - 1].index) + o\n  };\n}\n\nfunction Re(t, e, n, r) {\n  var o = Le(t.width, n.width, e.column),\n      i = Te(r / o),\n      a = i * n.height + xe(0, i - 1) * e.row;\n  return a > 0 ? a + e.row : a;\n}\n\nfunction Le(t, e, n) {\n  return xe(1, Te((t + n) / (e + n)));\n}\n\nvar ke = [\"placeholder\"],\n    ze = e.system(function () {\n  var t = e.statefulStream(function (t) {\n    return \"Item \" + t;\n  }),\n      n = e.statefulStream({}),\n      r = e.statefulStream(null),\n      o = e.statefulStream(\"virtuoso-grid-item\"),\n      i = e.statefulStream(\"virtuoso-grid-list\"),\n      a = e.statefulStream(jt),\n      l = e.statefulStream(e.noop),\n      s = function (t, r) {\n    return void 0 === r && (r = null), e.statefulStreamFromEmitter(e.pipe(n, e.map(function (e) {\n      return e[t];\n    }), e.distinctUntilChanged()), r);\n  };\n\n  return {\n    context: r,\n    itemContent: t,\n    components: n,\n    computeItemKey: a,\n    itemClassName: o,\n    listClassName: i,\n    scrollerRef: l,\n    ListComponent: s(\"List\", \"div\"),\n    ItemComponent: s(\"Item\", \"div\"),\n    ScrollerComponent: s(\"Scroller\", \"div\"),\n    ScrollSeekPlaceholder: s(\"ScrollSeekPlaceholder\", \"div\")\n  };\n}),\n    Be = e.system(function (t) {\n  var n = t[0],\n      r = t[1],\n      o = {\n    item: Yt(r.itemContent, \"Rename the %citem%c prop to %citemContent.\"),\n    ItemContainer: e.stream(),\n    ScrollContainer: e.stream(),\n    ListContainer: e.stream(),\n    emptyComponent: e.stream(),\n    scrollSeek: e.stream()\n  };\n\n  function i(t, n, o) {\n    e.connect(e.pipe(t, e.withLatestFrom(r.components), e.map(function (t) {\n      var e,\n          r = t[0],\n          i = t[1];\n      return console.warn(\"react-virtuoso: \" + o + \" property is deprecated. Pass components.\" + n + \" instead.\"), u({}, i, ((e = {})[n] = r, e));\n    })), r.components);\n  }\n\n  return e.subscribe(o.scrollSeek, function (t) {\n    var o = t.placeholder,\n        i = c(t, ke);\n    console.warn(\"react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.\"), e.publish(r.components, u({}, e.getValue(r.components), {\n      ScrollSeekPlaceholder: o\n    })), e.publish(n.scrollSeekConfiguration, i);\n  }), i(o.ItemContainer, \"Item\", \"ItemContainer\"), i(o.ListContainer, \"List\", \"ListContainer\"), i(o.ScrollContainer, \"Scroller\", \"ScrollContainer\"), u({}, n, r, o);\n}, e.tup(Ee, ze)),\n    Fe = n.memo(function () {\n  var t = Ae(\"gridState\"),\n      e = Ae(\"listClassName\"),\n      n = Ae(\"itemClassName\"),\n      r = Ae(\"itemContent\"),\n      o = Ae(\"computeItemKey\"),\n      i = Ae(\"isSeeking\"),\n      a = Ue(\"scrollHeight\"),\n      s = Ae(\"ItemComponent\"),\n      c = Ae(\"ListComponent\"),\n      m = Ae(\"ScrollSeekPlaceholder\"),\n      d = Ae(\"context\"),\n      f = Ue(\"itemDimensions\"),\n      p = Ue(\"gap\"),\n      h = Ae(\"log\"),\n      g = I(function (t) {\n    a(t.parentElement.parentElement.scrollHeight);\n    var e = t.firstChild;\n    e && f(e.getBoundingClientRect()), p({\n      row: Ge(\"row-gap\", getComputedStyle(t).rowGap, h),\n      column: Ge(\"column-gap\", getComputedStyle(t).columnGap, h)\n    });\n  });\n  return l(c, u({\n    ref: g,\n    className: e\n  }, ne(c, d), {\n    style: {\n      paddingTop: t.offsetTop,\n      paddingBottom: t.offsetBottom\n    }\n  }), t.items.map(function (e) {\n    var a = o(e.index);\n    return i ? l(m, u({\n      key: a\n    }, ne(m, d), {\n      index: e.index,\n      height: t.itemHeight,\n      width: t.itemWidth\n    })) : l(s, u({}, ne(s, d), {\n      className: n,\n      \"data-index\": e.index,\n      key: a\n    }), r(e.index, d));\n  }));\n}),\n    Pe = function (t) {\n  var e = t.children,\n      r = Ue(\"viewportDimensions\"),\n      o = I(function (t) {\n    r(t.getBoundingClientRect());\n  });\n  return n.createElement(\"div\", {\n    style: te,\n    ref: o\n  }, e);\n},\n    Oe = function (t) {\n  var e = t.children,\n      r = Nt(Ue(\"windowViewportRect\"), Ae(\"customScrollParent\"));\n  return n.createElement(\"div\", {\n    ref: r,\n    style: te\n  }, e);\n},\n    Me = t(Be, {\n  optional: {\n    totalCount: \"totalCount\",\n    overscan: \"overscan\",\n    itemContent: \"itemContent\",\n    components: \"components\",\n    computeItemKey: \"computeItemKey\",\n    initialItemCount: \"initialItemCount\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    listClassName: \"listClassName\",\n    itemClassName: \"itemClassName\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    item: \"item\",\n    ItemContainer: \"ItemContainer\",\n    ScrollContainer: \"ScrollContainer\",\n    ListContainer: \"ListContainer\",\n    scrollSeek: \"scrollSeek\"\n  },\n  methods: {\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\",\n    scrollToIndex: \"scrollToIndex\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\"\n  }\n}, n.memo(function (t) {\n  var e = u({}, t),\n      r = Ae(\"useWindowScroll\"),\n      o = Ae(\"customScrollParent\"),\n      i = o || r ? Oe : Pe;\n  return n.createElement(o || r ? De : Ne, u({}, e), n.createElement(i, null, n.createElement(Fe, null)));\n})),\n    Ve = Me.Component,\n    Ue = Me.usePublisher,\n    Ae = Me.useEmitterValue,\n    We = Me.useEmitter,\n    Ne = ie({\n  usePublisher: Ue,\n  useEmitterValue: Ae,\n  useEmitter: We\n}),\n    De = ae({\n  usePublisher: Ue,\n  useEmitterValue: Ae,\n  useEmitter: We\n});\n\nfunction Ge(t, e, n) {\n  return \"normal\" === e || null != e && e.endsWith(\"px\") || n(t + \" was not resolved to pixel value correctly\", e, p.WARN), \"normal\" === e ? 0 : parseInt(null != e ? e : \"0\", 10);\n}\n\nvar _e = e.system(function () {\n  var t = e.statefulStream(function (t) {\n    return n.createElement(\"td\", null, \"Item $\", t);\n  }),\n      r = e.statefulStream(null),\n      o = e.statefulStream(null),\n      i = e.statefulStream({}),\n      a = e.statefulStream(jt),\n      l = e.statefulStream(e.noop),\n      s = function (t, n) {\n    return void 0 === n && (n = null), e.statefulStreamFromEmitter(e.pipe(i, e.map(function (e) {\n      return e[t];\n    }), e.distinctUntilChanged()), n);\n  };\n\n  return {\n    context: r,\n    itemContent: t,\n    fixedHeaderContent: o,\n    components: i,\n    computeItemKey: a,\n    scrollerRef: l,\n    TableComponent: s(\"Table\", \"table\"),\n    TableHeadComponent: s(\"TableHead\", \"thead\"),\n    TableBodyComponent: s(\"TableBody\", \"tbody\"),\n    TableRowComponent: s(\"TableRow\", \"tr\"),\n    ScrollerComponent: s(\"Scroller\", \"div\"),\n    EmptyPlaceholder: s(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: s(\"ScrollSeekPlaceholder\"),\n    FillerRow: s(\"FillerRow\")\n  };\n}),\n    je = e.system(function (t) {\n  return u({}, t[0], t[1]);\n}, e.tup(At, _e)),\n    Ke = function (t) {\n  return n.createElement(\"tr\", null, n.createElement(\"td\", {\n    style: {\n      height: t.height\n    }\n  }));\n},\n    Ye = function (t) {\n  return n.createElement(\"tr\", null, n.createElement(\"td\", {\n    style: {\n      height: t.height,\n      padding: 0,\n      border: 0\n    }\n  }));\n},\n    qe = n.memo(function () {\n  var t = tn(\"listState\"),\n      e = Xe(\"sizeRanges\"),\n      r = tn(\"useWindowScroll\"),\n      o = tn(\"customScrollParent\"),\n      i = Xe(\"windowScrollContainerState\"),\n      a = Xe(\"scrollContainerState\"),\n      s = o || r ? i : a,\n      c = tn(\"itemContent\"),\n      m = tn(\"trackItemSizes\"),\n      d = C(e, tn(\"itemSize\"), m, s, tn(\"log\"), void 0, o),\n      f = d.callbackRef,\n      p = d.ref,\n      h = n.useState(0),\n      g = h[0],\n      v = h[1];\n  en(\"deviation\", function (t) {\n    g !== t && (p.current.style.marginTop = t + \"px\", v(t));\n  });\n  var S = tn(\"EmptyPlaceholder\"),\n      I = tn(\"ScrollSeekPlaceholder\") || Ke,\n      T = tn(\"FillerRow\") || Ye,\n      w = tn(\"TableBodyComponent\"),\n      x = tn(\"TableRowComponent\"),\n      b = tn(\"computeItemKey\"),\n      y = tn(\"isSeeking\"),\n      E = tn(\"paddingTopAddition\"),\n      H = tn(\"firstItemIndex\"),\n      R = tn(\"statefulTotalCount\"),\n      L = tn(\"context\");\n  if (0 === R && S) return l(S, ne(S, L));\n  var k = t.offsetTop + E + g,\n      z = t.offsetBottom,\n      B = k > 0 ? n.createElement(T, {\n    height: k,\n    key: \"padding-top\"\n  }) : null,\n      F = z > 0 ? n.createElement(T, {\n    height: z,\n    key: \"padding-bottom\"\n  }) : null,\n      P = t.items.map(function (t) {\n    var e = t.originalIndex,\n        n = b(e + H, t.data, L);\n    return y ? l(I, u({}, ne(I, L), {\n      key: n,\n      index: t.index,\n      height: t.size,\n      type: t.type || \"item\"\n    })) : l(x, u({}, ne(x, L), {\n      key: n,\n      \"data-index\": e,\n      \"data-known-size\": t.size,\n      \"data-item-index\": t.index,\n      style: {\n        overflowAnchor: \"none\"\n      }\n    }), c(t.index, t.data, L));\n  });\n  return l(w, u({\n    ref: f,\n    \"data-test-id\": \"virtuoso-item-list\"\n  }, ne(w, L)), [B].concat(P, [F]));\n}),\n    Ze = function (t) {\n  var r = t.children,\n      o = Xe(\"viewportHeight\"),\n      i = I(e.compose(o, function (t) {\n    return T(t, \"height\");\n  }));\n  return n.createElement(\"div\", {\n    style: te,\n    ref: i,\n    \"data-viewport-type\": \"element\"\n  }, r);\n},\n    Je = function (t) {\n  var e = t.children,\n      r = Nt(Xe(\"windowViewportRect\"), tn(\"customScrollParent\"));\n  return n.createElement(\"div\", {\n    ref: r,\n    style: te,\n    \"data-viewport-type\": \"window\"\n  }, e);\n},\n    $e = t(je, {\n  required: {},\n  optional: {\n    context: \"context\",\n    followOutput: \"followOutput\",\n    firstItemIndex: \"firstItemIndex\",\n    itemContent: \"itemContent\",\n    fixedHeaderContent: \"fixedHeaderContent\",\n    overscan: \"overscan\",\n    increaseViewportBy: \"increaseViewportBy\",\n    totalCount: \"totalCount\",\n    topItemCount: \"topItemCount\",\n    initialTopMostItemIndex: \"initialTopMostItemIndex\",\n    components: \"components\",\n    groupCounts: \"groupCounts\",\n    atBottomThreshold: \"atBottomThreshold\",\n    atTopThreshold: \"atTopThreshold\",\n    computeItemKey: \"computeItemKey\",\n    defaultItemHeight: \"defaultItemHeight\",\n    fixedItemHeight: \"fixedItemHeight\",\n    itemSize: \"itemSize\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    data: \"data\",\n    initialItemCount: \"initialItemCount\",\n    initialScrollTop: \"initialScrollTop\",\n    alignToBottom: \"alignToBottom\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    logLevel: \"logLevel\",\n    react18ConcurrentRendering: \"react18ConcurrentRendering\"\n  },\n  methods: {\n    scrollToIndex: \"scrollToIndex\",\n    scrollIntoView: \"scrollIntoView\",\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\",\n    totalListHeightChanged: \"totalListHeightChanged\",\n    itemsRendered: \"itemsRendered\",\n    groupIndices: \"groupIndices\"\n  }\n}, n.memo(function (t) {\n  var r = tn(\"useWindowScroll\"),\n      o = tn(\"customScrollParent\"),\n      i = Xe(\"fixedHeaderHeight\"),\n      a = tn(\"fixedHeaderContent\"),\n      l = tn(\"context\"),\n      s = I(e.compose(i, function (t) {\n    return T(t, \"height\");\n  })),\n      c = o || r ? rn : nn,\n      m = o || r ? Je : Ze,\n      d = tn(\"TableComponent\"),\n      f = tn(\"TableHeadComponent\"),\n      p = a ? n.createElement(f, u({\n    key: \"TableHead\",\n    style: {\n      zIndex: 1,\n      position: \"sticky\",\n      top: 0\n    },\n    ref: s\n  }, ne(f, l)), a()) : null;\n  return n.createElement(c, u({}, t), n.createElement(m, null, n.createElement(d, u({\n    style: {\n      borderSpacing: 0\n    }\n  }, ne(d, l)), [p, n.createElement(qe, {\n    key: \"TableBody\"\n  })])));\n})),\n    Qe = $e.Component,\n    Xe = $e.usePublisher,\n    tn = $e.useEmitterValue,\n    en = $e.useEmitter,\n    nn = ie({\n  usePublisher: Xe,\n  useEmitterValue: tn,\n  useEmitter: en\n}),\n    rn = ae({\n  usePublisher: Xe,\n  useEmitterValue: tn,\n  useEmitter: en\n}),\n    on = me,\n    an = me,\n    ln = Qe,\n    sn = Ve;\n\nexport { an as GroupedVirtuoso, p as LogLevel, ln as TableVirtuoso, on as Virtuoso, sn as VirtuosoGrid };","map":{"version":3,"mappings":"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","names":["LogLevel","useIsomorphicLayoutEffect","document","useLayoutEffect","useEffect","CONSOLE_METHOD_MAP","DEBUG","INFO","_CONSOLE_METHOD_MAP","WARN","ERROR","loggerSystem","u","system","logLevel","statefulStream","log","label","message","level","globalThis","window","_getGlobalThis$VIRTUO","VIRTUOSO_LOG_LEVEL","getValue","console","singleton","useSizeWithElRef","callback","enabled","ref","useRef","callbackRef","_el","ResizeObserver","observer","entries","element","target","offsetParent","elRef","observe","current","unobserve","useSize","useChangedListContentsSizes","itemSize","scrollContainerStateCallback","gap","customScrollParent","el","ranges","children","field","length","results","i","child","item","undefined","dataset","index","parseInt","knownSize","parseFloat","size","lastResult","endIndex","push","startIndex","getChangedChildSizes","scrollableElement","parentElement","windowScrolling","firstElementChild","scrollTop","pageYOffset","documentElement","scrollHeight","viewportHeight","offsetHeight","innerHeight","Math","max","property","value","endsWith","resolveGapValue","getComputedStyle","rowGap","dimension","round","getBoundingClientRect","approximatelyEqual","num1","num2","abs","useScrollTop","smoothScrollTargetReached","scrollerElement","scrollerRefCallback","noop","scrollerRef","scrollTopTarget","timeoutRef","shouldFlushSync","handler","useCallback","ev","windowScroll","call","flushSync","clearTimeout","localRef","addEventListener","passive","removeEventListener","scrollByCallback","location","scrollBy","scrollToCallback","isSmooth","behavior","correctItemSize","top","ceil","min","setTimeout","scrollTo","domIOSystem","scrollContainerState","stream","deviation","statefulScrollTop","headerHeight","fixedHeaderHeight","footerHeight","scrollingInProgress","react18ConcurrentRendering","connect","pipe","map","_ref2","NIL_NODE","lvl","newAANode","k","v","l","r","empty","node","newTree","key","last","adjust","clone","_last","deleteLast","remove","findMaxKeyValue","Infinity","insert","split","skew","rebalance","walkWithin","start","end","result","concat","walk","args","isSingle","Error","rl","rlvl","rangesWithin","arrayToRanges","_ref","items","parser","nextIndex","nextValue","_parser2","findIndexOfClosestSmallerOrEqual","comparator","floor","match","join","findClosestSmallerOrEqual","recalcSystem","recalcInProgress","rangeIncludes","refRange","range","indexComparator","itemIndex","offsetComparator","offset","itemOffset","offsetPointParser","point","createOffsetTree","prevOffsetTree","syncStart","sizeTree","offsetTree","prevIndex","prevSize","prevOffset","arrayBinarySearch","kv","slice","_step3","done","_step3$value","indexOffset","aOffset","lastIndex","lastOffset","lastSize","state","groupIndices","_ref3","newSizeTree","groupSize","reduce","tree","groupIndex","insertRanges","_step","overlappingRanges","some","_step2","firstPassDone","shouldInsert","p","rangeStart","rangeEnd","_step2$value","rangeValue","_insertRanges","newOffsetTree","_createOffsetTree","groupOffsetTree","offsetOf","itemCount","_arrayBinarySearch$fi","originalIndexFromLocation","sizes","isGroupLocation","originalIndexFromItemIndex","hasGroups","groupOffset","SIZE_MAP","offsetWidth","sizeSystem","_ref4","sizeRanges","totalCount","statefulTotalCount","statefulStreamFromEmitter","unshiftWith","shiftWith","firstItemIndex","fixedItemSize","defaultItemSize","data","initial","withLatestFrom","scan","sizeStateReducer","distinctUntilChanged","filter","indexes","_ref5","idx","_extends","_ref7","_ref7$","trackItemSizes","listRefresh","streamFromEmitter","_ref9","newSizes","changed","subscribe","prev","next","diff","val","publish","_ref10","beforeUnshiftWith","_ref11","acc","_ref12","shiftWithOffset","_ref13","_ref14","tup","SUPPORTS_SCROLL_TO_OPTIONS","style","normalizeIndexLocation","align","scrollToIndexSystem","_ref$","_ref$2","scrollToIndex","topListHeight","unsubscribeNextListRefresh","cleartTimeoutRef","unsubscribeListRefresh","cleanup","_ref2$","normalLocation","retry","listChanged","handleNext","UP","INITIAL_BOTTOM_STATE","atBottom","notAtBottomBecause","offsetBottom","stateFlagsSystem","isAtBottom","isAtTop","atBottomStateChange","atTopStateChange","atBottomThreshold","atTopThreshold","isScrolling","merge","duc","skip","mapTo","debounceTime","isScrollingBy","combineLatest","throttleTime","atBottomState","atBottomBecause","scrollTopDelta","_ref3$","_headerHeight","lastJumpDueToItemResize","jump","scrollDirection","direction","prevScrollTop","scrollVelocity","_","_ref8","e","propsReadySystem","propsReady","didMount","ready","initialTopMostItemIndexSystem","scrolledToInitialItem","initialTopMostItemIndex","normalizeFollowOutput","follow","followOutputSystem","followOutput","autoscrollToBottom","pendingScrollHandle","scrollToBottom","followOutputBehavior","trapNextSizeIncrease","cancel","shouldFollow","behaviorFromFollowOutput","refreshed","t","groupCountsToIndicesAndCount","counts","groupCount","groupedListSystem","groupCounts","topItemsIndexes","groupIndicesAndCount","tupleComparator","rangeComparator","getOverscan","overscan","main","reverse","getViewportIncrease","sizeRangeSystem","listBoundary","increaseViewportBy","visibleRange","listTop","listBottom","stickyHeaderHeight","headerVisible","topViewportAddition","bottomViewportAddition","EMPTY_LIST_STATE","topItems","offsetTop","bottom","transposeItems","originalIndex","transposedItems","groupRanges","currentRange","currentGroupIndex","shift","indexOf","type","buildListState","lastItem","height","listStateSystem","rangeTopListHeight","_ref$3","stateFlags","itemsRendered","listState","startOffset","endOffset","sizesValue","probeItemSet","getInitialTopMostItemIndexNumber","rangeStartIndex","rangeEndIndex","minStartIndex","offsetPointRanges","rangesWithinOffsets","endValue","findRange","maxIndex","tap","endReached","_ref6","count","startReached","rangeChanged","initialItemCountSystem","initialItemCount","_ref3$2","includedGroupsCount","adjustedCount","Array","from","scrollSeekSystem","isSeeking","scrollSeekConfiguration","speed","config","enter","exit","velocity","change","scrollSeekRangeChanged","topItemCountSystem","topItemCount","totalListHeightSystem","totalListHeightChanged","totalListHeight","simpleMemoize","func","called","isMobileSafari","test","navigator","userAgent","upwardScrollFixSystem","deviationOffset","prevItems","totalHeight","newDev","amount","scrollByWith","deviationAmount","recalc","requestAnimationFrame","initialScrollTopSystem","initialScrollTop","alignToBottomSystem","alignToBottom","paddingTopAddition","windowScrollerSystem","windowScrollContainerState","windowViewportRect","windowScrollTo","useWindowScroll","_excluded","scrollIntoViewSystem","scrollIntoView","viewLocation","rest","actualIndex","itemTop","Vt","featureGroup1System","windowScroller","listSystem","_ref2$2","domIO","_ref2$3","flags","featureGroup1","visibleHeight","fixedItemHeight","defaultItemHeight","positionStickyCssValue","createElement","position","useWindowViewportRectRef","viewportInfo","calculateInfo","rect","visibleWidth","width","customScrollParentRect","deltaTop","scrollAndResizeEventHandler","identity","listComponentPropsSystem","itemContent","context","groupContent","components","computeItemKey","headerFooterTag","distinctProp","propName","defaultValue","FooterComponent","HeaderComponent","TopItemListComponent","ListComponent","ItemComponent","GroupComponent","ScrollerComponent","EmptyPlaceholder","ScrollSeekPlaceholder","prop","alias","warn","combinedSystem","propsSystem","deprecatedProps","addDeprecatedAlias","group","itemHeight","scrollingStateChange","adjustForPrependedItems","maxHeightCacheSize","footer","header","HeaderContainer","FooterContainer","ItemContainer","ScrollContainer","GroupContainer","ListContainer","emptyComponent","scrollSeek","deprecateComponentProp","componentName","comp","_extends2","placeholder","_objectWithoutPropertiesLoose","DefaultScrollSeekPlaceholder","React","GROUP_STYLE","zIndex","overflowAnchor","ITEM_STYLE","Items","memo","showTopList","_ref5$showTopList","useEmitterValue","usePublisher","windowScrollContainerStateCallback","_scrollContainerStateCallback","listGap","_React$useState","useState","setDeviation","useEmitter","containerStyle","boxSizing","paddingTop","paddingBottom","marginTop","contextPropIfNotDomElement","scrollerStyle","outline","overflowY","WebkitOverflowScrolling","viewportStyle","topItemListStyle","Header","Footer","buildScroller","props","_useScrollTop","tabIndex","buildWindowScroller","I","_useScrollTop2","Viewport","viewportRef","compose","WindowViewport","TopItemListContainer","TopItemList","_systemToComponent","systemToComponent","required","optional","methods","events","TheViewport","WindowScroller","Scroller","List","Component","INITIAL_GRID_STATE","itemWidth","PROBE_GRID_STATE","buildItems","gapComparator","column","row","gridSystem","_ref$4","gridState","viewportDimensions","itemDimensions","_ref4$$","_ref4$","viewport","viewportWidth","perRow","itemsPerRow","gridLayout","_gridLayout","rowCount","_gridLayout2","gridComponentPropsSystem","itemClassName","listClassName","GridItems","scrollHeightCallback","gridGap","listRef","firstItem","firstChild","columnGap","className","Grid","tableComponentPropsSystem","fixedHeaderContent","TableComponent","TableHeadComponent","TableBodyComponent","TableRowComponent","FillerRow","DefaultFillerRow","padding","border","_useChangedListConten","paddingTopEl","paddingBottomEl","theadRef","TheScroller","TheTable","TheTHead","theHead","borderSpacing","Table","Virtuoso","GroupedVirtuoso","TableVirtuoso","VirtuosoGrid"],"sources":["C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\hooks\\useIsomorphicLayoutEffect.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\loggerSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\hooks\\useSize.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\hooks\\useChangedChildSizes.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\utils\\correctItemSize.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\utils\\approximatelyEqual.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\hooks\\useScrollTop.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\domIOSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\AATree.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\utils\\binaryArraySearch.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\recalcSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\sizeSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\scrollToIndexSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\stateFlagsSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\propsReadySystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\initialTopMostItemIndexSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\followOutputSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\groupedListSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\comparators.tsx","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\sizeRangeSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\listStateSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\initialItemCountSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\scrollSeekSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\topItemCountSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\totalListHeightSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\utils\\simpleMemoize.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\upwardScrollFixSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\initialScrollTopSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\alignToBottomSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\windowScrollerSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\scrollIntoViewSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\listSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\utils\\positionStickyCssValue.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\hooks\\useWindowViewportRect.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\List.tsx","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\gridSystem.ts","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\Grid.tsx","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\Table.tsx","C:\\Users\\super\\Desktop\\twitch-chat-app\\node_modules\\react-virtuoso\\src\\components.tsx"],"sourcesContent":["import { useEffect, useLayoutEffect } from 'react'\n\nconst useIsomorphicLayoutEffect = typeof document !== 'undefined' ? useLayoutEffect : useEffect\n\nexport default useIsomorphicLayoutEffect\n","import * as u from '@virtuoso.dev/urx'\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace globalThis {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace window {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\nexport enum LogLevel {\n  DEBUG,\n  INFO,\n  WARN,\n  ERROR,\n}\nexport interface LogMessage {\n  level: LogLevel\n  message: any\n  label: string\n}\n\nexport type Log = (label: string, message: any, level?: LogLevel) => void\n\nconst CONSOLE_METHOD_MAP = {\n  [LogLevel.DEBUG]: 'debug',\n  [LogLevel.INFO]: 'log',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error',\n} as const\n\nconst getGlobalThis = () => (typeof globalThis === 'undefined' ? window : globalThis)\n\nexport const loggerSystem = u.system(\n  () => {\n    const logLevel = u.statefulStream<LogLevel>(LogLevel.ERROR)\n    const log = u.statefulStream<Log>((label: string, message: any, level: LogLevel = LogLevel.INFO) => {\n      const currentLevel = getGlobalThis()['VIRTUOSO_LOG_LEVEL'] ?? u.getValue(logLevel)\n      if (level >= currentLevel) {\n        // eslint-disable-next-line no-console\n        console[CONSOLE_METHOD_MAP[level]](\n          '%creact-virtuoso: %c%s %o',\n          'color: #0253b3; font-weight: bold',\n          'color: initial',\n          label,\n          message\n        )\n      }\n    })\n\n    return {\n      log,\n      logLevel,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","import { useRef } from 'react'\n\nexport type CallbackRefParam = HTMLElement | null\n\nexport function useSizeWithElRef(callback: (e: HTMLElement) => void, enabled = true) {\n  const ref = useRef<CallbackRefParam>(null)\n\n  let callbackRef = (_el: CallbackRefParam) => {\n    void 0\n  }\n\n  if (typeof ResizeObserver !== 'undefined') {\n    const observer = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      const element = entries[0].target as HTMLElement\n      if (element.offsetParent !== null) {\n        callback(element)\n      }\n    })\n\n    callbackRef = (elRef: CallbackRefParam) => {\n      if (elRef && enabled) {\n        observer.observe(elRef)\n        ref.current = elRef\n      } else {\n        if (ref.current) {\n          observer.unobserve(ref.current)\n        }\n        ref.current = null\n      }\n    }\n  }\n\n  return { ref, callbackRef }\n}\n\nexport default function useSize(callback: (e: HTMLElement) => void, enabled = true) {\n  return useSizeWithElRef(callback, enabled).callbackRef\n}\n","import { Log, LogLevel } from '../loggerSystem'\nimport { SizeRange } from '../sizeSystem'\nimport { useSizeWithElRef } from './useSize'\nimport { SizeFunction, ScrollContainerState } from '../interfaces'\nexport default function useChangedListContentsSizes(\n  callback: (ranges: SizeRange[]) => void,\n  itemSize: SizeFunction,\n  enabled: boolean,\n  scrollContainerStateCallback: (state: ScrollContainerState) => void,\n  log: Log,\n  gap?: (gap: number) => void,\n  customScrollParent?: HTMLElement\n) {\n  return useSizeWithElRef((el: HTMLElement) => {\n    const ranges = getChangedChildSizes(el.children, itemSize, 'offsetHeight', log)\n    let scrollableElement = el.parentElement!\n\n    while (!scrollableElement.dataset['virtuosoScroller']) {\n      scrollableElement = scrollableElement.parentElement!\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    const windowScrolling = (scrollableElement.firstElementChild! as HTMLDivElement).dataset['viewportType']! === 'window'\n\n    const scrollTop = customScrollParent\n      ? customScrollParent.scrollTop\n      : windowScrolling\n      ? window.pageYOffset || document.documentElement.scrollTop\n      : scrollableElement.scrollTop\n\n    const scrollHeight = customScrollParent\n      ? customScrollParent.scrollHeight\n      : windowScrolling\n      ? document.documentElement.scrollHeight\n      : scrollableElement.scrollHeight\n\n    const viewportHeight = customScrollParent\n      ? customScrollParent.offsetHeight\n      : windowScrolling\n      ? window.innerHeight\n      : scrollableElement.offsetHeight\n\n    scrollContainerStateCallback({\n      scrollTop: Math.max(scrollTop, 0),\n      scrollHeight,\n      viewportHeight,\n    })\n\n    gap?.(resolveGapValue('row-gap', getComputedStyle(el).rowGap, log))\n\n    if (ranges !== null) {\n      callback(ranges)\n    }\n  }, enabled)\n}\n\nfunction getChangedChildSizes(children: HTMLCollection, itemSize: SizeFunction, field: 'offsetHeight' | 'offsetWidth', log: Log) {\n  const length = children.length\n\n  if (length === 0) {\n    return null\n  }\n\n  const results: SizeRange[] = []\n\n  for (let i = 0; i < length; i++) {\n    const child = children.item(i) as HTMLElement\n\n    if (!child || child.dataset.index === undefined) {\n      continue\n    }\n\n    const index = parseInt(child.dataset.index!)\n    const knownSize = parseFloat(child.dataset.knownSize!)\n    const size = itemSize(child, field)\n\n    if (size === 0) {\n      log('Zero-sized element, this should not happen', { child }, LogLevel.ERROR)\n    }\n\n    if (size === knownSize) {\n      continue\n    }\n\n    const lastResult = results[results.length - 1]\n    if (results.length === 0 || lastResult.size !== size || lastResult.endIndex !== index - 1) {\n      results.push({ startIndex: index, endIndex: index, size })\n    } else {\n      results[results.length - 1].endIndex++\n    }\n  }\n\n  return results\n}\n\nfunction resolveGapValue(property: string, value: string | undefined, log: Log) {\n  if (value !== 'normal' && !value?.endsWith('px')) {\n    log(`${property} was not resolved to pixel value correctly`, value, LogLevel.WARN)\n  }\n  if (value === 'normal') {\n    return 0\n  }\n  return parseInt(value ?? '0', 10)\n}\n","export function correctItemSize(el: HTMLElement, dimension: 'height' | 'width') {\n  return Math.round(el.getBoundingClientRect()[dimension])\n}\n","export function approximatelyEqual(num1: number, num2: number) {\n  return Math.abs(num1 - num2) < 1.01\n}\n","import { useRef, useCallback, useEffect } from 'react'\nimport * as u from '@virtuoso.dev/urx'\nimport { correctItemSize } from '../utils/correctItemSize'\nimport { ScrollContainerState } from '../interfaces'\nimport { flushSync } from 'react-dom'\nimport { approximatelyEqual } from '../utils/approximatelyEqual'\n\nexport type ScrollerRef = Window | HTMLElement | null\n\nexport default function useScrollTop(\n  scrollContainerStateCallback: (state: ScrollContainerState) => void,\n  smoothScrollTargetReached: (yes: true) => void,\n  scrollerElement: any,\n  scrollerRefCallback: (ref: ScrollerRef) => void = u.noop,\n  customScrollParent?: HTMLElement\n) {\n  const scrollerRef = useRef<HTMLElement | null | Window>(null)\n  const scrollTopTarget = useRef<any>(null)\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null)\n  const shouldFlushSync = useRef(false)\n\n  const handler = useCallback(\n    (ev: Event) => {\n      const el = ev.target as HTMLElement\n      const windowScroll = (el as any) === window || (el as any) === document\n      const scrollTop = windowScroll ? window.pageYOffset || document.documentElement.scrollTop : el.scrollTop\n      const scrollHeight = windowScroll ? document.documentElement.scrollHeight : el.scrollHeight\n      const viewportHeight = windowScroll ? window.innerHeight : el.offsetHeight\n\n      const call = () => {\n        scrollContainerStateCallback({\n          scrollTop: Math.max(scrollTop, 0),\n          scrollHeight,\n          viewportHeight,\n        })\n      }\n\n      if (shouldFlushSync.current) {\n        flushSync(call)\n      } else {\n        call()\n      }\n      shouldFlushSync.current = false\n\n      if (scrollTopTarget.current !== null) {\n        if (scrollTop === scrollTopTarget.current || scrollTop <= 0 || scrollTop === scrollHeight - viewportHeight) {\n          scrollTopTarget.current = null\n          smoothScrollTargetReached(true)\n          if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current)\n            timeoutRef.current = null\n          }\n        }\n      }\n    },\n    [scrollContainerStateCallback, smoothScrollTargetReached]\n  )\n\n  useEffect(() => {\n    const localRef = customScrollParent ? customScrollParent : scrollerRef.current!\n\n    scrollerRefCallback(customScrollParent ? customScrollParent : scrollerRef.current)\n    handler({ target: localRef } as unknown as Event)\n    localRef.addEventListener('scroll', handler, { passive: true })\n\n    return () => {\n      scrollerRefCallback(null)\n      localRef.removeEventListener('scroll', handler)\n    }\n  }, [scrollerRef, handler, scrollerElement, scrollerRefCallback, customScrollParent])\n\n  function scrollToCallback(location: ScrollToOptions) {\n    const scrollerElement = scrollerRef.current\n    if (!scrollerElement || ('offsetHeight' in scrollerElement && scrollerElement.offsetHeight === 0)) {\n      return\n    }\n\n    const isSmooth = location.behavior === 'smooth'\n\n    let offsetHeight: number\n    let scrollHeight: number\n    let scrollTop: number\n\n    if (scrollerElement === window) {\n      // this is not a mistake\n      scrollHeight = Math.max(correctItemSize(document.documentElement, 'height'), document.documentElement.scrollHeight)\n      offsetHeight = window.innerHeight\n      scrollTop = document.documentElement.scrollTop\n    } else {\n      scrollHeight = (scrollerElement as HTMLElement).scrollHeight\n      offsetHeight = correctItemSize(scrollerElement as HTMLElement, 'height')\n      scrollTop = (scrollerElement as HTMLElement).scrollTop\n    }\n\n    const maxScrollTop = scrollHeight - offsetHeight\n    location.top = Math.ceil(Math.max(Math.min(maxScrollTop, location.top!), 0))\n\n    // avoid system hanging because the DOM never called back\n    // with the scrollTop\n    // scroller is already at this location\n    if (approximatelyEqual(offsetHeight, scrollHeight) || location.top === scrollTop) {\n      scrollContainerStateCallback({ scrollTop, scrollHeight, viewportHeight: offsetHeight })\n      if (isSmooth) {\n        smoothScrollTargetReached(true)\n      }\n      return\n    }\n\n    if (isSmooth) {\n      scrollTopTarget.current = location.top\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current)\n      }\n\n      timeoutRef.current = setTimeout(() => {\n        timeoutRef.current = null\n        scrollTopTarget.current = null\n        smoothScrollTargetReached(true)\n      }, 1000)\n    } else {\n      scrollTopTarget.current = null\n    }\n\n    scrollerElement.scrollTo(location)\n  }\n\n  function scrollByCallback(location: ScrollToOptions) {\n    shouldFlushSync.current = true\n    scrollerRef.current!.scrollBy(location)\n  }\n\n  return { scrollerRef, scrollByCallback, scrollToCallback }\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { ScrollContainerState } from './interfaces'\n\nexport const domIOSystem = u.system(\n  () => {\n    const scrollContainerState = u.stream<ScrollContainerState>()\n    const scrollTop = u.stream<number>()\n    const deviation = u.statefulStream(0)\n    const smoothScrollTargetReached = u.stream<true>()\n    const statefulScrollTop = u.statefulStream(0)\n    const viewportHeight = u.stream<number>()\n    const scrollHeight = u.stream<number>()\n    const headerHeight = u.statefulStream(0)\n    const fixedHeaderHeight = u.statefulStream(0)\n    const footerHeight = u.statefulStream(0)\n    const scrollTo = u.stream<ScrollToOptions>()\n    const scrollBy = u.stream<ScrollToOptions>()\n    const scrollingInProgress = u.statefulStream(false)\n    // bogus, has no effect\n    const react18ConcurrentRendering = u.statefulStream(false)\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(({ scrollTop }) => scrollTop)\n      ),\n      scrollTop\n    )\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(({ scrollHeight }) => scrollHeight)\n      ),\n      scrollHeight\n    )\n\n    u.connect(scrollTop, statefulScrollTop)\n\n    return {\n      // input\n      scrollContainerState,\n      scrollTop,\n      viewportHeight,\n      headerHeight,\n      fixedHeaderHeight,\n      footerHeight,\n      scrollHeight,\n      smoothScrollTargetReached,\n      react18ConcurrentRendering,\n\n      // signals\n      scrollTo,\n      scrollBy,\n\n      // state\n      statefulScrollTop,\n      deviation,\n      scrollingInProgress,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","interface NilNode {\n  lvl: 0\n}\n\nconst NIL_NODE: NilNode = { lvl: 0 }\n\ninterface NodeData<T> {\n  k: number\n  v: T\n}\n\ninterface NonNilAANode<T> {\n  k: number\n  v: T\n  lvl: number\n  l: NonNilAANode<T> | NilNode\n  r: NonNilAANode<T> | NilNode\n}\n\nexport interface Range<T> {\n  start: number\n  end: number\n  value: T\n}\n\nexport type AANode<T> = NilNode | NonNilAANode<T>\n\nfunction newAANode<T>(k: number, v: T, lvl: number, l: AANode<T> = NIL_NODE, r: AANode<T> = NIL_NODE): NonNilAANode<T> {\n  return { k, v, lvl, l, r }\n}\n\nexport function empty(node: AANode<any>): node is NilNode {\n  return node === NIL_NODE\n}\n\nexport function newTree<T>(): AANode<T> {\n  return NIL_NODE\n}\n\nexport function remove<T>(node: AANode<T>, key: number): AANode<T> {\n  if (empty(node)) return NIL_NODE\n\n  const { k, l, r } = node\n\n  if (key === k) {\n    if (empty(l)) {\n      return r\n    } else if (empty(r)) {\n      return l\n    } else {\n      const [lastKey, lastValue] = last(l)\n      return adjust(clone(node, { k: lastKey, v: lastValue, l: deleteLast(l) }))\n    }\n  } else if (key < k) {\n    return adjust(clone(node, { l: remove(l, key) }))\n  } else {\n    return adjust(clone(node, { r: remove(r, key) }))\n  }\n}\n\nexport function find<T>(node: AANode<T>, key: number): T | undefined {\n  if (empty(node)) {\n    return\n  }\n\n  if (key === node.k) {\n    return node.v\n  } else if (key < node.k) {\n    return find(node.l, key)\n  } else {\n    return find(node.r, key)\n  }\n}\n\nexport function findMaxKeyValue<T>(node: AANode<T>, value: number, field: 'k' | 'v' = 'k'): [number, T | undefined] {\n  if (empty(node)) {\n    return [-Infinity, undefined]\n  }\n\n  if (node[field] === value) {\n    return [node.k, node.v]\n  }\n\n  if (node[field] < value) {\n    const r = findMaxKeyValue(node.r, value, field)\n    if (r[0] === -Infinity) {\n      return [node.k, node.v]\n    } else {\n      return r\n    }\n  }\n\n  return findMaxKeyValue(node.l, value, field)\n}\n\nexport function insert<T>(node: AANode<T>, k: number, v: T): NonNilAANode<T> {\n  if (empty(node)) {\n    return newAANode(k, v, 1)\n  }\n  if (k === node.k) {\n    return clone(node, { k, v })\n  } else if (k < node.k) {\n    return rebalance(clone(node, { l: insert(node.l, k, v) }))\n  } else {\n    return rebalance(clone(node, { r: insert(node.r, k, v) }))\n  }\n}\n\nexport function walkWithin<T>(node: AANode<T>, start: number, end: number): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  const { k, v, l, r } = node\n  let result: NodeData<T>[] = []\n  if (k > start) {\n    result = result.concat(walkWithin(l, start, end))\n  }\n\n  if (k >= start && k <= end) {\n    result.push({ k, v })\n  }\n\n  if (k <= end) {\n    result = result.concat(walkWithin(r, start, end))\n  }\n\n  return result\n}\n\nexport function walk<T>(node: AANode<T>): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  return [...walk(node.l), { k: node.k, v: node.v }, ...walk(node.r)]\n}\n\nfunction last<T>(node: NonNilAANode<T>): [number, T] {\n  return empty(node.r) ? [node.k, node.v] : last(node.r)\n}\n\nfunction deleteLast<T>(node: NonNilAANode<T>): AANode<T> {\n  return empty(node.r) ? node.l : adjust(clone(node, { r: deleteLast(node.r) }))\n}\n\nfunction clone<T>(node: NonNilAANode<T>, args: Partial<NonNilAANode<T>>): NonNilAANode<T> {\n  return newAANode(\n    args.k !== undefined ? args.k : node.k,\n    args.v !== undefined ? args.v : node.v,\n    args.lvl !== undefined ? args.lvl : node.lvl,\n    args.l !== undefined ? args.l : node.l,\n    args.r !== undefined ? args.r : node.r\n  )\n}\n\nfunction isSingle(node: AANode<any>) {\n  return empty(node) || node.lvl > node.r.lvl\n}\n\nfunction rebalance<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  return split(skew(node))\n}\n\nfunction adjust<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l, r, lvl } = node\n  if (r.lvl >= lvl - 1 && l.lvl >= lvl - 1) {\n    return node\n  } else if (lvl > r.lvl + 1) {\n    if (isSingle(l)) {\n      return skew(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(l) && !empty(l.r)) {\n        return clone(l.r, {\n          l: clone(l, { r: l.r.l }),\n          r: clone(node, {\n            l: l.r.r,\n            lvl: lvl - 1,\n          }),\n          lvl: lvl,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  } else {\n    if (isSingle(node)) {\n      return split(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(r) && !empty(r.l)) {\n        const rl = r.l\n        const rlvl = isSingle(rl) ? r.lvl - 1 : r.lvl\n\n        return clone(rl, {\n          l: clone(node, {\n            r: rl.l,\n            lvl: lvl - 1,\n          }),\n          r: split(clone(r, { l: rl.r, lvl: rlvl })),\n          lvl: rl.lvl + 1,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  }\n}\n\nexport function keys(node: AANode<any>): number[] {\n  if (empty(node)) {\n    return []\n  }\n  return [...keys(node.l), node.k, ...keys(node.r)]\n}\n\nexport function ranges<T>(node: AANode<T>): Range<T>[] {\n  return toRanges(walk(node))\n}\n\nexport function rangesWithin<T>(node: AANode<T>, startIndex: number, endIndex: number): Range<T>[] {\n  if (empty(node)) {\n    return []\n  }\n  const adjustedStart = findMaxKeyValue(node, startIndex)[0]\n  return toRanges(walkWithin(node, adjustedStart, endIndex))\n}\n\nexport function arrayToRanges<T, V>(\n  items: T[],\n  parser: (item: T) => { index: number; value: V }\n): Array<{ start: number; end: number; value: V }> {\n  const length = items.length\n  if (length === 0) {\n    return []\n  }\n\n  let { index: start, value } = parser(items[0])\n\n  const result = []\n\n  for (let i = 1; i < length; i++) {\n    const { index: nextIndex, value: nextValue } = parser(items[i])\n    result.push({ start, end: nextIndex - 1, value })\n\n    start = nextIndex\n    value = nextValue\n  }\n\n  result.push({ start, end: Infinity, value })\n  return result\n}\n\nfunction toRanges<T>(nodes: NodeData<T>[]): Range<T>[] {\n  return arrayToRanges(nodes, ({ k: index, v: value }) => ({ index, value }))\n}\n\nfunction split<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { r, lvl } = node\n\n  return !empty(r) && !empty(r.r) && r.lvl === lvl && r.r.lvl === lvl ? clone(r, { l: clone(node, { r: r.l }), lvl: lvl + 1 }) : node\n}\n\nfunction skew<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l } = node\n\n  return !empty(l) && l.lvl === node.lvl ? clone(l, { r: clone(node, { l: l.r }) }) : node\n}\n","export type Comparator<T> = {\n  (item: T, value: number): -1 | 0 | 1\n}\n\nexport function findIndexOfClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>, start = 0): number {\n  let end = items.length - 1\n\n  while (start <= end) {\n    const index = Math.floor((start + end) / 2)\n    const item = items[index]\n    const match = comparator(item, value)\n    if (match === 0) {\n      return index\n    }\n\n    if (match === -1) {\n      if (end - start < 2) {\n        return index - 1\n      }\n      end = index - 1\n    } else {\n      if (end === start) {\n        return index\n      }\n      start = index + 1\n    }\n  }\n\n  throw new Error(`Failed binary finding record in array - ${items.join(',')}, searched for ${value}`)\n}\n\nexport function findClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>): T {\n  return items[findIndexOfClosestSmallerOrEqual(items, value, comparator)]\n}\n\nexport function findRange<T>(items: T[], startValue: number, endValue: number, comparator: Comparator<T>): T[] {\n  const startIndex = findIndexOfClosestSmallerOrEqual(items, startValue, comparator)\n  const endIndex = findIndexOfClosestSmallerOrEqual(items, endValue, comparator, startIndex)\n  return items.slice(startIndex, endIndex + 1)\n}\n","import * as u from '@virtuoso.dev/urx'\n\nexport const recalcSystem = u.system(\n  () => {\n    const recalcInProgress = u.statefulStream(false)\n    return { recalcInProgress }\n  },\n  [],\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { arrayToRanges, AANode, empty, findMaxKeyValue, insert, newTree, Range, rangesWithin, remove, walk } from './AATree'\nimport * as arrayBinarySearch from './utils/binaryArraySearch'\nimport { correctItemSize } from './utils/correctItemSize'\nimport { loggerSystem, Log, LogLevel } from './loggerSystem'\nimport { recalcSystem } from './recalcSystem'\nimport { SizeFunction } from './interfaces'\n\nexport interface SizeRange {\n  startIndex: number\n  endIndex: number\n  size: number\n}\n\nexport type Data = readonly unknown[] | undefined\n\nfunction rangeIncludes(refRange: SizeRange) {\n  const { size, startIndex, endIndex } = refRange\n  return (range: Range<number>) => {\n    return range.start === startIndex && (range.end === endIndex || range.end === Infinity) && range.value === size\n  }\n}\n\nexport function insertRanges(sizeTree: AANode<number>, ranges: SizeRange[]) {\n  let syncStart = empty(sizeTree) ? 0 : Infinity\n\n  for (const range of ranges) {\n    const { size, startIndex, endIndex } = range\n    syncStart = Math.min(syncStart, startIndex)\n\n    if (empty(sizeTree)) {\n      sizeTree = insert(sizeTree, 0, size)\n      continue\n    }\n\n    // extend the range in both directions, so that we can get adjacent neighbours.\n    // if the previous / next ones have the same value as the one we are about to insert,\n    // we 'merge' them.\n    const overlappingRanges = rangesWithin(sizeTree, startIndex - 1, endIndex + 1)\n\n    if (overlappingRanges.some(rangeIncludes(range))) {\n      continue\n    }\n\n    let firstPassDone = false\n    let shouldInsert = false\n    for (const { start: rangeStart, end: rangeEnd, value: rangeValue } of overlappingRanges) {\n      // previous range\n      if (!firstPassDone) {\n        shouldInsert = rangeValue !== size\n        firstPassDone = true\n      } else {\n        // remove the range if it starts within the new range OR if\n        // it has the same value as it, in order to perform a merge\n        if (endIndex >= rangeStart || size === rangeValue) {\n          sizeTree = remove(sizeTree, rangeStart)\n        }\n      }\n\n      // next range\n      if (rangeEnd > endIndex && endIndex >= rangeStart) {\n        if (rangeValue !== size) {\n          sizeTree = insert(sizeTree, endIndex + 1, rangeValue)\n        }\n      }\n    }\n\n    if (shouldInsert) {\n      sizeTree = insert(sizeTree, startIndex, size)\n    }\n  }\n  return [sizeTree, syncStart] as const\n}\n\nexport interface OffsetPoint {\n  offset: number\n  size: number\n  index: number\n}\n\nexport interface SizeState {\n  sizeTree: AANode<number>\n  offsetTree: Array<OffsetPoint>\n  groupOffsetTree: AANode<number>\n  lastIndex: number\n  lastOffset: number\n  lastSize: number\n  groupIndices: number[]\n}\n\nexport function initialSizeState(): SizeState {\n  return {\n    offsetTree: [],\n    sizeTree: newTree<number>(),\n    groupOffsetTree: newTree<number>(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: [],\n  }\n}\n\nexport function indexComparator({ index: itemIndex }: OffsetPoint, index: number) {\n  return index === itemIndex ? 0 : index < itemIndex ? -1 : 1\n}\n\nexport function offsetComparator({ offset: itemOffset }: OffsetPoint, offset: number) {\n  return offset === itemOffset ? 0 : offset < itemOffset ? -1 : 1\n}\n\nfunction offsetPointParser(point: OffsetPoint) {\n  return { index: point.index, value: point }\n}\n\nexport function rangesWithinOffsets(\n  tree: Array<OffsetPoint>,\n  startOffset: number,\n  endOffset: number,\n  minStartIndex = 0\n): Array<{\n  start: number\n  end: number\n  value: {\n    size: number\n    offset: number\n    index: number\n  }\n}> {\n  if (minStartIndex > 0) {\n    startOffset = Math.max(startOffset, arrayBinarySearch.findClosestSmallerOrEqual(tree, minStartIndex, indexComparator).offset)\n  }\n\n  return arrayToRanges(arrayBinarySearch.findRange(tree, startOffset, endOffset, offsetComparator), offsetPointParser)\n}\n\nfunction createOffsetTree(prevOffsetTree: OffsetPoint[], syncStart: number, sizeTree: AANode<number>, gap: number) {\n  let offsetTree = prevOffsetTree\n  let prevIndex = 0\n  let prevSize = 0\n\n  let prevOffset = 0\n  let startIndex = 0\n\n  if (syncStart !== 0) {\n    startIndex = arrayBinarySearch.findIndexOfClosestSmallerOrEqual(offsetTree, syncStart - 1, indexComparator)\n    const offsetInfo = offsetTree[startIndex]\n    prevOffset = offsetInfo.offset\n    const kv = findMaxKeyValue(sizeTree, syncStart - 1)\n    prevIndex = kv[0]\n    prevSize = kv[1]!\n\n    if (offsetTree.length && offsetTree[startIndex].size === findMaxKeyValue(sizeTree, syncStart)[1]) {\n      startIndex -= 1\n    }\n\n    offsetTree = offsetTree.slice(0, startIndex + 1)\n  } else {\n    offsetTree = []\n  }\n\n  for (const { start: startIndex, value } of rangesWithin(sizeTree, syncStart, Infinity)) {\n    const indexOffset = startIndex - prevIndex\n    const aOffset = indexOffset * prevSize + prevOffset + indexOffset * gap\n    offsetTree.push({\n      offset: aOffset,\n      size: value,\n      index: startIndex,\n    })\n    prevIndex = startIndex\n    prevOffset = aOffset\n    prevSize = value\n  }\n\n  return {\n    offsetTree,\n    lastIndex: prevIndex,\n    lastOffset: prevOffset,\n    lastSize: prevSize,\n  }\n}\n\nexport function sizeStateReducer(state: SizeState, [ranges, groupIndices, log, gap]: [SizeRange[], number[], Log, number]) {\n  if (ranges.length > 0) {\n    log('received item sizes', ranges, LogLevel.DEBUG)\n  }\n  const sizeTree = state.sizeTree\n  let newSizeTree: AANode<number> = sizeTree\n  let syncStart = 0\n\n  // We receive probe item results from a group probe,\n  // which should always pass an item and a group\n  // the results contain two ranges, which we consider to mean that groups and items have different size\n  if (groupIndices.length > 0 && empty(sizeTree) && ranges.length === 2) {\n    const groupSize = ranges[0].size\n    const itemSize = ranges[1].size\n    newSizeTree = groupIndices.reduce((tree, groupIndex) => {\n      return insert(insert(tree, groupIndex, groupSize), groupIndex + 1, itemSize)\n    }, newSizeTree)\n  } else {\n    ;[newSizeTree, syncStart] = insertRanges(newSizeTree, ranges)\n  }\n\n  if (newSizeTree === sizeTree) {\n    return state\n  }\n\n  const { offsetTree: newOffsetTree, lastIndex, lastSize, lastOffset } = createOffsetTree(state.offsetTree, syncStart, newSizeTree, gap)\n\n  return {\n    sizeTree: newSizeTree,\n    offsetTree: newOffsetTree,\n    lastIndex,\n    lastOffset,\n    lastSize,\n    groupOffsetTree: groupIndices.reduce((tree, index) => {\n      return insert(tree, index, offsetOf(index, newOffsetTree, gap))\n    }, newTree<number>()),\n    groupIndices,\n  }\n}\n\nexport function offsetOf(index: number, tree: Array<OffsetPoint>, gap: number) {\n  if (tree.length === 0) {\n    return 0\n  }\n\n  const { offset, index: startIndex, size } = arrayBinarySearch.findClosestSmallerOrEqual(tree, index, indexComparator)\n  const itemCount = index - startIndex\n  const top = size * itemCount + (itemCount - 1) * gap + offset\n  return top > 0 ? top + gap : top\n}\n\nexport type FlatOrGroupedLocation = { index: number | 'LAST' } | { groupIndex: number }\n\nexport function isGroupLocation(location: FlatOrGroupedLocation): location is { groupIndex: number } {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return typeof (location as any).groupIndex !== 'undefined'\n}\n\nexport function originalIndexFromLocation(location: FlatOrGroupedLocation, sizes: SizeState, lastIndex: number) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  if (isGroupLocation(location)) {\n    // return the index of the first item below the index\n    return sizes.groupIndices[location.groupIndex] + 1\n  } else {\n    const numericIndex = location.index === 'LAST' ? lastIndex : location.index\n    let result = originalIndexFromItemIndex(numericIndex, sizes)\n    result = Math.max(0, result, Math.min(lastIndex, result))\n    return result\n  }\n}\n\nexport function originalIndexFromItemIndex(itemIndex: number, sizes: SizeState) {\n  if (!hasGroups(sizes)) {\n    return itemIndex\n  }\n\n  let groupOffset = 0\n  while (sizes.groupIndices[groupOffset] <= itemIndex + groupOffset) {\n    groupOffset++\n  }\n  // we find the real item index, offsetting it by the number of group items before it\n  return itemIndex + groupOffset\n}\n\nexport function hasGroups(sizes: SizeState) {\n  return !empty(sizes.groupOffsetTree)\n}\n\ntype OptionalNumber = number | undefined\n\nconst SIZE_MAP = {\n  offsetHeight: 'height',\n  offsetWidth: 'width',\n} as const\n\nexport const sizeSystem = u.system(\n  ([{ log }, { recalcInProgress }]) => {\n    const sizeRanges = u.stream<SizeRange[]>()\n    const totalCount = u.stream<number>()\n    const statefulTotalCount = u.statefulStreamFromEmitter(totalCount, 0)\n    const unshiftWith = u.stream<number>()\n    const shiftWith = u.stream<number>()\n    const firstItemIndex = u.statefulStream(0)\n    const groupIndices = u.statefulStream([] as number[])\n    const fixedItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const defaultItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const itemSize = u.statefulStream<SizeFunction>((el, field) => correctItemSize(el, SIZE_MAP[field]))\n    const data = u.statefulStream<Data>(undefined)\n    const gap = u.statefulStream(0)\n    const initial = initialSizeState()\n\n    const sizes = u.statefulStreamFromEmitter(\n      u.pipe(sizeRanges, u.withLatestFrom(groupIndices, log, gap), u.scan(sizeStateReducer, initial), u.distinctUntilChanged()),\n      initial\n    )\n\n    u.connect(\n      u.pipe(\n        groupIndices,\n        u.filter((indexes) => indexes.length > 0),\n        u.withLatestFrom(sizes, gap),\n        u.map(([groupIndices, sizes, gap]) => {\n          const groupOffsetTree = groupIndices.reduce((tree, index, idx) => {\n            return insert(tree, index, offsetOf(index, sizes.offsetTree, gap) || idx)\n          }, newTree<number>())\n\n          return {\n            ...sizes,\n            groupIndices,\n            groupOffsetTree,\n          }\n        })\n      ),\n      sizes\n    )\n\n    // decreasing the total count should remove any existing entries\n    // beyond the last index - do this by publishing the default size as a range over them.\n    u.connect(\n      u.pipe(\n        totalCount,\n        u.withLatestFrom(sizes),\n        u.filter(([totalCount, { lastIndex }]) => {\n          return totalCount < lastIndex\n        }),\n        u.map(([totalCount, { lastIndex, lastSize }]) => {\n          return [\n            {\n              startIndex: totalCount,\n              endIndex: lastIndex,\n              size: lastSize,\n            },\n          ] as SizeRange[]\n        })\n      ),\n      sizeRanges\n    )\n\n    u.connect(fixedItemSize, defaultItemSize)\n\n    const trackItemSizes = u.statefulStreamFromEmitter(\n      u.pipe(\n        fixedItemSize,\n        u.map((size) => size === undefined)\n      ),\n      true\n    )\n\n    u.connect(\n      u.pipe(\n        defaultItemSize,\n        u.filter((value) => {\n          return value !== undefined && empty(u.getValue(sizes).sizeTree)\n        }),\n        u.map((size) => [{ startIndex: 0, endIndex: 0, size }] as SizeRange[])\n      ),\n      sizeRanges\n    )\n\n    const listRefresh = u.streamFromEmitter(\n      u.pipe(\n        sizeRanges,\n        u.withLatestFrom(sizes),\n        u.scan(\n          ({ sizes: oldSizes }, [_, newSizes]) => {\n            return {\n              changed: newSizes !== oldSizes,\n              sizes: newSizes,\n            }\n          },\n          { changed: false, sizes: initial }\n        ),\n        u.map((value) => value.changed)\n      )\n    )\n\n    u.subscribe(\n      u.pipe(\n        firstItemIndex,\n        u.scan(\n          (prev, next) => {\n            return { diff: prev.prev - next, prev: next }\n          },\n          { diff: 0, prev: 0 }\n        ),\n        u.map((val) => val.diff)\n      ),\n      (offset) => {\n        if (offset > 0) {\n          u.publish(recalcInProgress, true)\n          u.publish(unshiftWith, offset)\n        } else if (offset < 0) {\n          u.publish(shiftWith, offset)\n        }\n      }\n    )\n\n    u.subscribe(u.pipe(firstItemIndex, u.withLatestFrom(log)), ([index, log]) => {\n      if (index < 0) {\n        log(\n          \"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\",\n          { firstItemIndex },\n          LogLevel.ERROR\n        )\n      }\n    })\n\n    // Capture the current list top item before the sizes get refreshed\n    const beforeUnshiftWith = u.streamFromEmitter(unshiftWith)\n\n    u.connect(\n      u.pipe(\n        unshiftWith,\n        u.withLatestFrom(sizes),\n        u.map(([unshiftWith, sizes]) => {\n          if (sizes.groupIndices.length > 0) {\n            throw new Error('Virtuoso: prepending items does not work with groups')\n          }\n\n          return walk(sizes.sizeTree).reduce(\n            (acc, { k: index, v: size }) => {\n              return {\n                ranges: [...acc.ranges, { startIndex: acc.prevIndex, endIndex: index + unshiftWith - 1, size: acc.prevSize }],\n                prevIndex: index + unshiftWith,\n                prevSize: size,\n              }\n            },\n            {\n              ranges: [] as SizeRange[],\n              prevIndex: 0,\n              prevSize: sizes.lastSize,\n            }\n          ).ranges\n        })\n      ),\n      sizeRanges\n    )\n\n    const shiftWithOffset = u.streamFromEmitter(\n      u.pipe(\n        shiftWith,\n        u.withLatestFrom(sizes, gap),\n        u.map(([shiftWith, { offsetTree }, gap]) => {\n          const newFirstItemIndex = -shiftWith\n          return offsetOf(newFirstItemIndex, offsetTree, gap)\n        })\n      )\n    )\n\n    u.connect(\n      u.pipe(\n        shiftWith,\n        u.withLatestFrom(sizes, gap),\n        u.map(([shiftWith, sizes, gap]) => {\n          if (sizes.groupIndices.length > 0) {\n            throw new Error('Virtuoso: shifting items does not work with groups')\n          }\n\n          const newSizeTree = walk(sizes.sizeTree).reduce((acc, { k, v }) => {\n            return insert(acc, Math.max(0, k + shiftWith), v)\n          }, newTree<number>())\n\n          return {\n            ...sizes,\n            sizeTree: newSizeTree,\n            ...createOffsetTree(sizes.offsetTree, 0, newSizeTree, gap),\n          }\n        })\n      ),\n      sizes\n    )\n\n    return {\n      // input\n      data,\n      totalCount,\n      sizeRanges,\n      groupIndices,\n      defaultItemSize,\n      fixedItemSize,\n      unshiftWith,\n      shiftWith,\n      shiftWithOffset,\n      beforeUnshiftWith,\n      firstItemIndex,\n      gap,\n\n      // output\n      sizes,\n      listRefresh,\n      statefulTotalCount,\n      trackItemSizes,\n      itemSize,\n    }\n  },\n  u.tup(loggerSystem, recalcSystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromLocation, sizeSystem } from './sizeSystem'\nimport { IndexLocationWithAlign } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport type IndexLocation = number | IndexLocationWithAlign\n\nconst SUPPORTS_SCROLL_TO_OPTIONS = typeof document !== 'undefined' && 'scrollBehavior' in document.documentElement.style\n\nexport function normalizeIndexLocation(location: IndexLocation) {\n  const result: IndexLocationWithAlign = typeof location === 'number' ? { index: location } : location\n\n  if (!result.align) {\n    result.align = 'start'\n  }\n  if (!result.behavior || !SUPPORTS_SCROLL_TO_OPTIONS) {\n    result.behavior = 'auto'\n  }\n  if (!result.offset) {\n    result.offset = 0\n  }\n\n  return result\n}\n\nexport const scrollToIndexSystem = u.system(\n  ([\n    { sizes, totalCount, listRefresh, gap },\n    { scrollingInProgress, viewportHeight, scrollTo, smoothScrollTargetReached, headerHeight, footerHeight },\n    { log },\n  ]) => {\n    const scrollToIndex = u.stream<IndexLocation>()\n    const topListHeight = u.statefulStream(0)\n\n    let unsubscribeNextListRefresh: any = null\n    let cleartTimeoutRef: ReturnType<typeof setTimeout> | null = null\n    let unsubscribeListRefresh: any = null\n\n    function cleanup() {\n      if (unsubscribeNextListRefresh) {\n        unsubscribeNextListRefresh()\n        unsubscribeNextListRefresh = null\n      }\n\n      if (unsubscribeListRefresh) {\n        unsubscribeListRefresh()\n        unsubscribeListRefresh = null\n      }\n\n      if (cleartTimeoutRef) {\n        clearTimeout(cleartTimeoutRef)\n        cleartTimeoutRef = null\n      }\n      u.publish(scrollingInProgress, false)\n    }\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log),\n        u.withLatestFrom(gap),\n        u.map(([[location, sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log], gap]) => {\n          const normalLocation = normalizeIndexLocation(location)\n          const { align, behavior, offset } = normalLocation\n          const lastIndex = totalCount - 1\n\n          const index = originalIndexFromLocation(normalLocation, sizes, lastIndex)\n\n          let top = offsetOf(index, sizes.offsetTree, gap) + headerHeight\n          if (align === 'end') {\n            top = top - viewportHeight + findMaxKeyValue(sizes.sizeTree, index)[1]!\n            if (index === lastIndex) {\n              top += footerHeight\n            }\n          } else if (align === 'center') {\n            top = top - viewportHeight / 2 + findMaxKeyValue(sizes.sizeTree, index)[1]! / 2\n          } else {\n            top -= topListHeight\n          }\n\n          if (offset) {\n            top += offset\n          }\n\n          const retry = (listChanged: boolean) => {\n            cleanup()\n            if (listChanged) {\n              log('retrying to scroll to', { location }, LogLevel.DEBUG)\n              u.publish(scrollToIndex, location)\n            } else {\n              log('list did not change, scroll successful', {}, LogLevel.DEBUG)\n            }\n          }\n\n          cleanup()\n\n          if (behavior === 'smooth') {\n            let listChanged = false\n            unsubscribeListRefresh = u.subscribe(listRefresh, (changed) => {\n              listChanged = listChanged || changed\n            })\n\n            unsubscribeNextListRefresh = u.handleNext(smoothScrollTargetReached, () => {\n              retry(listChanged)\n            })\n          } else {\n            unsubscribeNextListRefresh = u.handleNext(u.pipe(listRefresh, watchChangesFor(150)), retry)\n          }\n\n          // if the scroll jump is too small, the list won't get rerendered.\n          // clean this listener\n          cleartTimeoutRef = setTimeout(() => {\n            cleanup()\n          }, 1200)\n\n          u.publish(scrollingInProgress, true)\n          log('scrolling from index to', { index, top, behavior }, LogLevel.DEBUG)\n          return { top, behavior }\n        })\n      ),\n      scrollTo\n    )\n\n    return {\n      scrollToIndex,\n      topListHeight,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, loggerSystem),\n  { singleton: true }\n)\n\nfunction watchChangesFor(limit: number): u.Operator<boolean> {\n  return (done) => {\n    const timeoutRef = setTimeout(() => {\n      done(false)\n    }, limit)\n    return (value) => {\n      if (value) {\n        done(true)\n        clearTimeout(timeoutRef)\n      }\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-argument */\nimport * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { approximatelyEqual } from './utils/approximatelyEqual'\n\nexport const UP = 'up' as const\nexport const DOWN = 'down' as const\nexport const NONE = 'none' as const\nexport type ScrollDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport interface ListBottomInfo {\n  bottom: number\n  offsetBottom: number\n}\n\nexport interface AtBottomParams {\n  offsetBottom: number\n  scrollTop: number\n  viewportHeight: number\n  scrollHeight: number\n}\n\nexport type NotAtBottomReason =\n  | 'SIZE_INCREASED'\n  | 'NOT_SHOWING_LAST_ITEM'\n  | 'VIEWPORT_HEIGHT_DECREASING'\n  | 'SCROLLING_UPWARDS'\n  | 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n\nexport type AtBottomReason = 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n\nexport type AtBottomState =\n  | {\n      atBottom: false\n      notAtBottomBecause: NotAtBottomReason\n      state: AtBottomParams\n    }\n  | {\n      atBottom: true\n      state: AtBottomParams\n      atBottomBecause: AtBottomReason\n      scrollTopDelta: number\n    }\n\nconst INITIAL_BOTTOM_STATE = {\n  atBottom: false,\n  notAtBottomBecause: 'NOT_SHOWING_LAST_ITEM',\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0,\n  },\n} as AtBottomState\n\nconst DEFAULT_AT_TOP_THRESHOLD = 0\n\nexport const stateFlagsSystem = u.system(([{ scrollContainerState, scrollTop, viewportHeight, headerHeight, footerHeight, scrollBy }]) => {\n  const isAtBottom = u.statefulStream(false)\n  const isAtTop = u.statefulStream(true)\n  const atBottomStateChange = u.stream<boolean>()\n  const atTopStateChange = u.stream<boolean>()\n  const atBottomThreshold = u.statefulStream(4)\n  const atTopThreshold = u.statefulStream(DEFAULT_AT_TOP_THRESHOLD)\n\n  // skip 1 to avoid an initial on/off flick\n  const isScrolling = u.statefulStreamFromEmitter(\n    u.pipe(\n      u.merge(u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(true)), u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(false), u.debounceTime(100))),\n      u.distinctUntilChanged()\n    ),\n    false\n  )\n\n  const isScrollingBy = u.statefulStreamFromEmitter(\n    u.pipe(u.merge(u.pipe(scrollBy, u.mapTo(true)), u.pipe(scrollBy, u.mapTo(false), u.debounceTime(200))), u.distinctUntilChanged()),\n    false\n  )\n\n  // u.subscribe(isScrollingBy, (isScrollingBy) => console.log({ isScrollingBy }))\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(u.duc(scrollTop), u.duc(atTopThreshold)),\n      u.map(([top, atTopThreshold]) => top <= atTopThreshold),\n      u.distinctUntilChanged()\n    ),\n    isAtTop\n  )\n\n  u.connect(u.pipe(isAtTop, u.throttleTime(50)), atTopStateChange)\n\n  const atBottomState = u.streamFromEmitter(\n    u.pipe(\n      u.combineLatest(scrollContainerState, u.duc(viewportHeight), u.duc(headerHeight), u.duc(footerHeight), u.duc(atBottomThreshold)),\n      u.scan((current, [{ scrollTop, scrollHeight }, viewportHeight, _headerHeight, _footerHeight, atBottomThreshold]) => {\n        const isAtBottom = scrollTop + viewportHeight - scrollHeight > -atBottomThreshold\n        const state = {\n          viewportHeight,\n          scrollTop,\n          scrollHeight,\n        }\n\n        if (isAtBottom) {\n          let atBottomBecause: 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n          let scrollTopDelta: number\n          if (scrollTop > current.state.scrollTop) {\n            atBottomBecause = 'SCROLLED_DOWN'\n            scrollTopDelta = current.state.scrollTop - scrollTop\n          } else {\n            atBottomBecause = 'SIZE_DECREASED'\n            scrollTopDelta = current.state.scrollTop - scrollTop || (current as { scrollTopDelta: number }).scrollTopDelta\n          }\n          return {\n            atBottom: true,\n            state,\n            atBottomBecause,\n            scrollTopDelta,\n          } as AtBottomState\n        }\n\n        let notAtBottomBecause: NotAtBottomReason\n\n        if (state.scrollHeight > current.state.scrollHeight) {\n          notAtBottomBecause = 'SIZE_INCREASED'\n        } else if (viewportHeight < current.state.viewportHeight) {\n          notAtBottomBecause = 'VIEWPORT_HEIGHT_DECREASING'\n        } else if (scrollTop < current.state.scrollTop) {\n          notAtBottomBecause = 'SCROLLING_UPWARDS'\n        } else {\n          notAtBottomBecause = 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n        }\n\n        return {\n          atBottom: false,\n          notAtBottomBecause,\n          state,\n        } as AtBottomState\n      }, INITIAL_BOTTOM_STATE),\n      u.distinctUntilChanged((prev, next) => {\n        return prev && prev.atBottom === next.atBottom\n      })\n    )\n  )\n\n  const lastJumpDueToItemResize = u.statefulStreamFromEmitter(\n    u.pipe(\n      scrollContainerState,\n      u.scan(\n        (current, { scrollTop, scrollHeight, viewportHeight }) => {\n          if (!approximatelyEqual(current.scrollHeight, scrollHeight)) {\n            const atBottom = scrollHeight - (scrollTop + viewportHeight) < 1\n\n            if (current.scrollTop !== scrollTop && atBottom) {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: current.scrollTop - scrollTop,\n                changed: true,\n              }\n            } else {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: 0,\n                changed: true,\n              }\n            }\n          } else {\n            return {\n              scrollTop,\n              scrollHeight,\n              jump: 0,\n              changed: false,\n            }\n          }\n        },\n        { scrollHeight: 0, jump: 0, scrollTop: 0, changed: false }\n      ),\n      u.filter((value) => value.changed),\n      u.map((value) => value.jump)\n    ),\n    0\n  )\n\n  u.connect(\n    u.pipe(\n      atBottomState,\n      u.map((state) => state.atBottom)\n    ),\n    isAtBottom\n  )\n\n  u.connect(u.pipe(isAtBottom, u.throttleTime(50)), atBottomStateChange)\n\n  const scrollDirection = u.statefulStream<ScrollDirection>(DOWN)\n\n  u.connect(\n    u.pipe(\n      scrollContainerState,\n      u.map(({ scrollTop }) => scrollTop),\n      u.distinctUntilChanged(),\n      u.scan(\n        (acc, scrollTop) => {\n          // if things change while compensating for items, ignore,\n          // but store the new scrollTop\n          if (u.getValue(isScrollingBy)) {\n            return { direction: acc.direction, prevScrollTop: scrollTop }\n          }\n\n          return { direction: scrollTop < acc.prevScrollTop ? UP : DOWN, prevScrollTop: scrollTop }\n        },\n        { direction: DOWN, prevScrollTop: 0 } as { direction: ScrollDirection; prevScrollTop: number }\n      ),\n      u.map((value) => value.direction)\n    ),\n    scrollDirection\n  )\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n  u.connect(u.pipe(scrollContainerState, u.throttleTime(50), u.mapTo(NONE)), scrollDirection)\n\n  const scrollVelocity = u.statefulStream(0)\n\n  u.connect(\n    u.pipe(\n      isScrolling,\n      u.filter((value) => !value),\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      u.mapTo(0)\n    ),\n    scrollVelocity\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTop,\n      u.throttleTime(100),\n      u.withLatestFrom(isScrolling),\n      u.filter(([_, isScrolling]) => !!isScrolling),\n      u.scan(([_, prev], [next]) => [prev, next], [0, 0]),\n      u.map(([prev, next]) => next - prev)\n    ),\n    scrollVelocity\n  )\n\n  return {\n    isScrolling,\n    isAtTop,\n    isAtBottom,\n    atBottomState,\n    atTopStateChange,\n    atBottomStateChange,\n    scrollDirection,\n    atBottomThreshold,\n    atTopThreshold,\n    scrollVelocity,\n    lastJumpDueToItemResize,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport const propsReadySystem = u.system(\n  ([{ log }]) => {\n    const propsReady = u.statefulStream(false)\n\n    const didMount = u.streamFromEmitter(\n      u.pipe(\n        propsReady,\n        u.filter((ready) => ready),\n        u.distinctUntilChanged()\n      )\n    )\n    u.subscribe(propsReady, (value) => {\n      value && u.getValue(log)('props updated', {}, LogLevel.DEBUG)\n    })\n\n    return { propsReady, didMount }\n  },\n  u.tup(loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { empty } from './AATree'\nimport { sizeSystem } from './sizeSystem'\nimport { domIOSystem } from './domIOSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { FlatIndexLocationWithAlign } from './interfaces'\n\nexport function getInitialTopMostItemIndexNumber(location: number | FlatIndexLocationWithAlign, totalCount: number): number {\n  const lastIndex = totalCount - 1\n  const index = typeof location === 'number' ? location : location.index === 'LAST' ? lastIndex : location.index\n  return index\n}\n\nexport const initialTopMostItemIndexSystem = u.system(\n  ([{ sizes, listRefresh, defaultItemSize }, { scrollTop }, { scrollToIndex }, { didMount }]) => {\n    const scrolledToInitialItem = u.statefulStream(true)\n    const initialTopMostItemIndex = u.statefulStream<number | FlatIndexLocationWithAlign>(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialTopMostItemIndex),\n        u.filter(([_, location]) => !!location),\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        u.mapTo(false)\n      ),\n      scrolledToInitialItem\n    )\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(listRefresh, didMount),\n        u.withLatestFrom(scrolledToInitialItem, sizes, defaultItemSize),\n        u.filter(([[, didMount], scrolledToInitialItem, { sizeTree }, defaultItemSize]) => {\n          return didMount && (!empty(sizeTree) || defaultItemSize !== undefined) && !scrolledToInitialItem\n        }),\n        u.withLatestFrom(initialTopMostItemIndex)\n      ),\n      ([, initialTopMostItemIndex]) => {\n        setTimeout(() => {\n          u.handleNext(scrollTop, () => {\n            u.publish(scrolledToInitialItem, true)\n          })\n          u.publish(scrollToIndex, initialTopMostItemIndex)\n        })\n      }\n    )\n\n    return {\n      scrolledToInitialItem,\n      initialTopMostItemIndex,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, propsReadySystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { FollowOutput, FollowOutputScalarType } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { loggerSystem, LogLevel } from './loggerSystem'\nimport { domIOSystem } from './domIOSystem'\n\nfunction normalizeFollowOutput(follow: FollowOutputScalarType): FollowOutputScalarType {\n  if (!follow) {\n    return false\n  }\n  return follow === 'smooth' ? 'smooth' : 'auto'\n}\n\nconst behaviorFromFollowOutput = (follow: FollowOutput, isAtBottom: boolean) => {\n  if (typeof follow === 'function') {\n    return normalizeFollowOutput(follow(isAtBottom))\n  }\n  return isAtBottom && normalizeFollowOutput(follow)\n}\n\nexport const followOutputSystem = u.system(\n  ([\n    { totalCount, listRefresh },\n    { isAtBottom, atBottomState },\n    { scrollToIndex },\n    { scrolledToInitialItem },\n    { propsReady, didMount },\n    { log },\n    { scrollingInProgress },\n  ]) => {\n    const followOutput = u.statefulStream<FollowOutput>(false)\n    const autoscrollToBottom = u.stream<true>()\n    let pendingScrollHandle: any = null\n\n    function scrollToBottom(followOutputBehavior: FollowOutputScalarType) {\n      u.publish(scrollToIndex, {\n        index: 'LAST',\n        align: 'end',\n        behavior: followOutputBehavior,\n      })\n    }\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.pipe(u.duc(totalCount), u.skip(1)), didMount),\n        u.withLatestFrom(u.duc(followOutput), isAtBottom, scrolledToInitialItem, scrollingInProgress),\n        u.map(([[totalCount, didMount], followOutput, isAtBottom, scrolledToInitialItem, scrollingInProgress]) => {\n          let shouldFollow = didMount && scrolledToInitialItem\n          let followOutputBehavior: FollowOutputScalarType = 'auto'\n\n          if (shouldFollow) {\n            // if scrolling to index is in progress,\n            // assume that a previous followOutput response is going\n            followOutputBehavior = behaviorFromFollowOutput(followOutput, isAtBottom || scrollingInProgress)\n            shouldFollow = shouldFollow && !!followOutputBehavior\n          }\n\n          return { totalCount, shouldFollow, followOutputBehavior }\n        }),\n        u.filter(({ shouldFollow }) => shouldFollow)\n      ),\n      ({ totalCount, followOutputBehavior }) => {\n        if (pendingScrollHandle) {\n          pendingScrollHandle()\n          pendingScrollHandle = null\n        }\n\n        pendingScrollHandle = u.handleNext(listRefresh, () => {\n          u.getValue(log)('following output to ', { totalCount }, LogLevel.DEBUG)\n          scrollToBottom(followOutputBehavior)\n          pendingScrollHandle = null\n        })\n      }\n    )\n\n    function trapNextSizeIncrease(followOutput: boolean) {\n      const cancel = u.handleNext(atBottomState, (state) => {\n        if (followOutput && !state.atBottom && state.notAtBottomBecause === 'SIZE_INCREASED' && !pendingScrollHandle) {\n          u.getValue(log)('scrolling to bottom due to increased size', {}, LogLevel.DEBUG)\n          scrollToBottom('auto')\n        }\n      })\n      setTimeout(cancel, 100)\n    }\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.duc(followOutput), totalCount, propsReady),\n        u.filter(([follow, , ready]) => follow && ready),\n        u.scan(\n          ({ value }, [, next]) => {\n            return { refreshed: value === next, value: next }\n          },\n          { refreshed: false, value: 0 }\n        ),\n        u.filter(({ refreshed }) => refreshed),\n        u.withLatestFrom(followOutput, totalCount)\n      ),\n      ([, followOutput]) => {\n        trapNextSizeIncrease(followOutput !== false)\n      }\n    )\n\n    u.subscribe(autoscrollToBottom, () => {\n      trapNextSizeIncrease(u.getValue(followOutput) !== false)\n    })\n\n    u.subscribe(u.combineLatest(u.duc(followOutput), atBottomState), ([followOutput, state]) => {\n      if (followOutput && !state.atBottom && state.notAtBottomBecause === 'VIEWPORT_HEIGHT_DECREASING') {\n        scrollToBottom('auto')\n      }\n    })\n\n    return { followOutput, autoscrollToBottom }\n  },\n  u.tup(sizeSystem, stateFlagsSystem, scrollToIndexSystem, initialTopMostItemIndexSystem, propsReadySystem, loggerSystem, domIOSystem)\n)\n","import * as u from '@virtuoso.dev/urx'\n\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { sizeSystem, hasGroups } from './sizeSystem'\nexport interface GroupIndexesAndCount {\n  totalCount: number\n  groupIndices: number[]\n}\n\nexport function groupCountsToIndicesAndCount(counts: number[]) {\n  return counts.reduce(\n    (acc, groupCount) => {\n      acc.groupIndices.push(acc.totalCount)\n      acc.totalCount += groupCount + 1\n      return acc\n    },\n    {\n      totalCount: 0,\n      groupIndices: [],\n    } as GroupIndexesAndCount\n  )\n}\n\nexport const groupedListSystem = u.system(([{ totalCount, groupIndices, sizes }, { scrollTop, headerHeight }]) => {\n  const groupCounts = u.stream<number[]>()\n  const topItemsIndexes = u.stream<[number]>()\n  const groupIndicesAndCount = u.streamFromEmitter(u.pipe(groupCounts, u.map(groupCountsToIndicesAndCount)))\n  u.connect(\n    u.pipe(\n      groupIndicesAndCount,\n      u.map((value) => value.totalCount)\n    ),\n    totalCount\n  )\n  u.connect(\n    u.pipe(\n      groupIndicesAndCount,\n      u.map((value) => value.groupIndices)\n    ),\n    groupIndices\n  )\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(scrollTop, sizes, headerHeight),\n      u.filter(([_, sizes]) => hasGroups(sizes)),\n      u.map(([scrollTop, state, headerHeight]) => findMaxKeyValue(state.groupOffsetTree, Math.max(scrollTop - headerHeight, 0), 'v')[0]),\n      u.distinctUntilChanged(),\n      u.map((index) => [index])\n    ),\n    topItemsIndexes\n  )\n\n  return { groupCounts, topItemsIndexes }\n}, u.tup(sizeSystem, domIOSystem))\n","import { ListRange } from './interfaces'\n\nexport function tupleComparator<T1, T2>(prev: [T1, T2] | undefined, current: [T1, T2]) {\n  return !!(prev && prev[0] === current[0] && prev[1] === current[1])\n}\n\nexport function rangeComparator(prev: ListRange | undefined, next: ListRange) {\n  return !!(prev && prev.startIndex === next.startIndex && prev.endIndex === next.endIndex)\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { UP, DOWN, ScrollDirection } from './stateFlagsSystem'\nimport { tupleComparator } from './comparators'\n\nexport type NumberTuple = [number, number]\nexport type Overscan = number | { main: number; reverse: number }\nexport const TOP = 'top' as const\nexport const BOTTOM = 'bottom' as const\nexport const NONE = 'none' as const\nexport type ListEnd = typeof TOP | typeof BOTTOM\nexport type ViewportIncrease = number | { [k in ListEnd]?: number }\nexport type ChangeDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport function getOverscan(overscan: Overscan, end: ListEnd, direction: ScrollDirection) {\n  if (typeof overscan === 'number') {\n    return (direction === UP && end === TOP) || (direction === DOWN && end === BOTTOM) ? overscan : 0\n  } else {\n    if (direction === UP) {\n      return end === TOP ? overscan.main : overscan.reverse\n    } else {\n      return end === BOTTOM ? overscan.main : overscan.reverse\n    }\n  }\n}\n\nfunction getViewportIncrease(value: ViewportIncrease, end: ListEnd) {\n  return typeof value === 'number' ? value : value[end] || 0\n}\n\nexport const sizeRangeSystem = u.system(\n  ([{ scrollTop, viewportHeight, deviation, headerHeight, fixedHeaderHeight }]) => {\n    const listBoundary = u.stream<NumberTuple>()\n    const topListHeight = u.statefulStream(0)\n    const increaseViewportBy = u.statefulStream<ViewportIncrease>(0)\n    const overscan = u.statefulStream<Overscan>(0)\n\n    const visibleRange = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          u.duc(scrollTop),\n          u.duc(viewportHeight),\n          u.duc(headerHeight),\n          u.duc(listBoundary, tupleComparator),\n          u.duc(overscan),\n          u.duc(topListHeight),\n          u.duc(fixedHeaderHeight),\n          u.duc(deviation),\n          u.duc(increaseViewportBy)\n        ),\n        u.map(\n          ([\n            scrollTop,\n            viewportHeight,\n            headerHeight,\n            [listTop, listBottom],\n            overscan,\n            topListHeight,\n            fixedHeaderHeight,\n            deviation,\n            increaseViewportBy,\n          ]) => {\n            const top = scrollTop - deviation\n            const stickyHeaderHeight = topListHeight + fixedHeaderHeight\n            const headerVisible = Math.max(headerHeight - top, 0)\n            let direction: ChangeDirection = NONE\n            const topViewportAddition = getViewportIncrease(increaseViewportBy, TOP)\n            const bottomViewportAddition = getViewportIncrease(increaseViewportBy, BOTTOM)\n\n            listTop -= deviation\n            listTop += headerHeight + fixedHeaderHeight\n            listBottom += headerHeight + fixedHeaderHeight\n            listBottom -= deviation\n\n            // console.log({ listTop, scrollTop, stickyHeaderHeight, topViewportAddition })\n            if (listTop > scrollTop + stickyHeaderHeight - topViewportAddition) {\n              direction = UP\n            }\n\n            if (listBottom < scrollTop - headerVisible + viewportHeight + bottomViewportAddition) {\n              direction = DOWN\n            }\n\n            if (direction !== NONE) {\n              return [\n                Math.max(top - headerHeight - getOverscan(overscan, TOP, direction) - topViewportAddition, 0),\n                top -\n                  headerVisible -\n                  fixedHeaderHeight +\n                  viewportHeight +\n                  getOverscan(overscan, BOTTOM, direction) +\n                  bottomViewportAddition,\n              ] as NumberTuple\n            }\n\n            return null\n          }\n        ),\n        u.filter((value) => value != null) as u.Operator<NumberTuple | null, NumberTuple>,\n        u.distinctUntilChanged(tupleComparator)\n      ),\n      [0, 0]\n    ) as unknown as u.StatefulStream<NumberTuple>\n\n    return {\n      // input\n      listBoundary,\n      overscan,\n      topListHeight,\n      increaseViewportBy,\n\n      // output\n      visibleRange,\n    }\n  },\n  u.tup(domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { empty, findMaxKeyValue, Range, rangesWithin } from './AATree'\nimport { groupedListSystem } from './groupedListSystem'\nimport { getInitialTopMostItemIndexNumber, initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { Item, ListItem, ListRange } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { Data, originalIndexFromItemIndex, SizeState, sizeSystem, hasGroups, rangesWithinOffsets } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { rangeComparator, tupleComparator } from './comparators'\nimport { recalcSystem } from './recalcSystem'\n\nexport type ListItems = ListItem<unknown>[]\nexport interface TopListState {\n  items: ListItems\n  listHeight: number\n}\n\nexport interface ListState {\n  items: ListItems\n  topItems: ListItems\n  topListHeight: number\n  offsetTop: number\n  offsetBottom: number\n  top: number\n  bottom: number\n  totalCount: number\n  firstItemIndex: number\n}\n\nfunction probeItemSet(index: number, sizes: SizeState, data: Data) {\n  if (hasGroups(sizes)) {\n    const itemIndex = originalIndexFromItemIndex(index, sizes)\n    const groupIndex = findMaxKeyValue(sizes.groupOffsetTree, itemIndex)[0]\n\n    return [\n      { index: groupIndex, size: 0, offset: 0 },\n      { index: itemIndex, size: 0, offset: 0, data: data && data[0] },\n    ]\n  }\n  return [{ index, size: 0, offset: 0, data: data && data[0] }]\n}\n\nconst EMPTY_LIST_STATE: ListState = {\n  items: [] as ListItems,\n  topItems: [] as ListItems,\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0,\n  firstItemIndex: 0,\n}\n\nfunction transposeItems(items: Item<any>[], sizes: SizeState, firstItemIndex: number): ListItems {\n  if (items.length === 0) {\n    return []\n  }\n\n  if (!hasGroups(sizes)) {\n    return items.map((item) => ({ ...item, index: item.index + firstItemIndex, originalIndex: item.index }))\n  }\n\n  const startIndex = items[0].index\n  const endIndex = items[items.length - 1].index\n\n  const transposedItems = [] as ListItems\n  const groupRanges = rangesWithin(sizes.groupOffsetTree, startIndex, endIndex)\n  let currentRange: Range<number> | undefined = undefined\n  let currentGroupIndex = 0\n\n  for (const item of items) {\n    if (!currentRange || currentRange.end < item.index) {\n      currentRange = groupRanges.shift()!\n      currentGroupIndex = sizes.groupIndices.indexOf(currentRange.start)\n    }\n\n    let transposedItem: { type: 'group'; index: number } | { index: number; groupIndex: number }\n\n    if (item.index === currentRange.start) {\n      transposedItem = {\n        type: 'group' as const,\n        index: currentGroupIndex,\n      }\n    } else {\n      transposedItem = {\n        index: item.index - (currentGroupIndex + 1) + firstItemIndex,\n        groupIndex: currentGroupIndex,\n      }\n    }\n\n    transposedItems.push({\n      ...transposedItem,\n      size: item.size,\n      offset: item.offset,\n      originalIndex: item.index,\n      data: item.data,\n    })\n  }\n\n  return transposedItems\n}\n\nexport function buildListState(\n  items: Item<any>[],\n  topItems: Item<any>[],\n  totalCount: number,\n  gap: number,\n  sizes: SizeState,\n  firstItemIndex: number\n): ListState {\n  const { lastSize, lastOffset, lastIndex } = sizes\n  let offsetTop = 0\n  let bottom = 0\n\n  if (items.length > 0) {\n    offsetTop = items[0].offset\n    const lastItem = items[items.length - 1]\n    bottom = lastItem.offset + lastItem.size\n  }\n\n  const itemCount = totalCount - lastIndex\n  const total = lastOffset + itemCount * lastSize + (itemCount - 1) * gap\n  const top = offsetTop\n  const offsetBottom = total - bottom\n\n  return {\n    items: transposeItems(items, sizes, firstItemIndex),\n    topItems: transposeItems(topItems, sizes, firstItemIndex),\n    topListHeight: topItems.reduce((height, item) => item.size + height, 0),\n    offsetTop,\n    offsetBottom,\n    top,\n    bottom,\n    totalCount,\n    firstItemIndex,\n  }\n}\n\nexport const listStateSystem = u.system(\n  ([\n    { sizes, totalCount, data, firstItemIndex, gap },\n    groupedListSystem,\n    { visibleRange, listBoundary, topListHeight: rangeTopListHeight },\n    { scrolledToInitialItem, initialTopMostItemIndex },\n    { topListHeight },\n    stateFlags,\n    { didMount },\n    { recalcInProgress },\n  ]) => {\n    const topItemsIndexes = u.statefulStream<Array<number>>([])\n    const itemsRendered = u.stream<ListItems>()\n\n    u.connect(groupedListSystem.topItemsIndexes, topItemsIndexes)\n\n    const listState = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          didMount,\n          recalcInProgress,\n          u.duc(visibleRange, tupleComparator),\n          u.duc(totalCount),\n          u.duc(sizes),\n          u.duc(initialTopMostItemIndex),\n          scrolledToInitialItem,\n          u.duc(topItemsIndexes),\n          u.duc(firstItemIndex),\n          u.duc(gap),\n          data\n        ),\n        u.filter(([mount, recalcInProgress]) => {\n          return mount && !recalcInProgress\n        }),\n        u.map(\n          ([\n            ,\n            ,\n            [startOffset, endOffset],\n            totalCount,\n            sizes,\n            initialTopMostItemIndex,\n            scrolledToInitialItem,\n            topItemsIndexes,\n            firstItemIndex,\n            gap,\n            data,\n          ]) => {\n            const sizesValue = sizes\n            const { sizeTree, offsetTree } = sizesValue\n\n            if (totalCount === 0 || (startOffset === 0 && endOffset === 0)) {\n              return { ...EMPTY_LIST_STATE, totalCount }\n            }\n\n            if (empty(sizeTree)) {\n              return buildListState(\n                probeItemSet(getInitialTopMostItemIndexNumber(initialTopMostItemIndex, totalCount), sizesValue, data),\n                [],\n                totalCount,\n                gap,\n                sizesValue,\n                firstItemIndex\n              )\n            }\n\n            const topItems = [] as Item<any>[]\n\n            if (topItemsIndexes.length > 0) {\n              const startIndex = topItemsIndexes[0]\n              const endIndex = topItemsIndexes[topItemsIndexes.length - 1]\n              let offset = 0\n              for (const range of rangesWithin(sizeTree, startIndex, endIndex)) {\n                const size = range.value\n                const rangeStartIndex = Math.max(range.start, startIndex)\n                const rangeEndIndex = Math.min(range.end, endIndex)\n                for (let i = rangeStartIndex; i <= rangeEndIndex; i++) {\n                  topItems.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size\n                }\n              }\n            }\n\n            // If the list hasn't scrolled to the initial item because the initial item was set,\n            // render empty list.\n            //\n            // This is a condition to be evaluated past the probe check, do not merge\n            // with the totalCount check above\n            if (!scrolledToInitialItem) {\n              return buildListState([], topItems, totalCount, gap, sizesValue, firstItemIndex)\n            }\n\n            const minStartIndex = topItemsIndexes.length > 0 ? topItemsIndexes[topItemsIndexes.length - 1] + 1 : 0\n\n            const offsetPointRanges = rangesWithinOffsets(offsetTree, startOffset, endOffset, minStartIndex)\n            if (offsetPointRanges.length === 0) {\n              return null\n            }\n\n            const maxIndex = totalCount - 1\n\n            const items = u.tap([] as Item<any>[], (result) => {\n              for (const range of offsetPointRanges) {\n                const point = range.value\n                let offset = point.offset\n                let rangeStartIndex = range.start\n                const size = point.size\n\n                if (point.offset < startOffset) {\n                  rangeStartIndex += Math.floor((startOffset - point.offset + gap) / (size + gap))\n                  const itemCount = rangeStartIndex - range.start\n                  offset += itemCount * size + itemCount * gap\n                }\n\n                if (rangeStartIndex < minStartIndex) {\n                  offset += (minStartIndex - rangeStartIndex) * size\n                  rangeStartIndex = minStartIndex\n                }\n\n                const endIndex = Math.min(range.end, maxIndex)\n\n                for (let i = rangeStartIndex; i <= endIndex; i++) {\n                  if (offset >= endOffset) {\n                    break\n                  }\n\n                  result.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size + gap\n                }\n              }\n            })\n\n            return buildListState(items, topItems, totalCount, gap, sizesValue, firstItemIndex)\n          }\n        ),\n        //@ts-expect-error filter needs to be fixed\n        u.filter((value) => value !== null),\n        u.distinctUntilChanged()\n      ),\n      EMPTY_LIST_STATE\n    )\n\n    u.connect(\n      u.pipe(\n        data,\n        u.filter((data) => data !== undefined),\n        u.map((data) => data!.length)\n      ),\n      totalCount\n    )\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((value) => value.topListHeight)\n      ),\n      topListHeight\n    )\n    u.connect(topListHeight, rangeTopListHeight)\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => [state.top, state.bottom])\n      ),\n      listBoundary\n    )\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => state.items)\n      ),\n      itemsRendered\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount, data),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].originalIndex === totalCount - 1),\n        u.map(([, totalCount, data]) => [totalCount - 1, data] as [number, unknown[]]),\n        u.distinctUntilChanged(tupleComparator),\n        u.map(([count]) => count)\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.throttleTime(200),\n        u.filter(({ items, topItems }) => {\n          return items.length > 0 && items[0].originalIndex === topItems.length\n        }),\n        u.map(({ items }) => items[0].index),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          let startIndex = 0\n          let endIndex = items.length - 1\n\n          while (items[startIndex].type === 'group' && startIndex < endIndex) {\n            startIndex++\n          }\n\n          while (items[endIndex].type === 'group' && endIndex > startIndex) {\n            endIndex--\n          }\n\n          return {\n            startIndex: items[startIndex].index,\n            endIndex: items[endIndex].index,\n          } as ListRange\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    return { listState, topItemsIndexes, endReached, startReached, rangeChanged, itemsRendered, ...stateFlags }\n  },\n  u.tup(\n    sizeSystem,\n    groupedListSystem,\n    sizeRangeSystem,\n    initialTopMostItemIndexSystem,\n    scrollToIndexSystem,\n    stateFlagsSystem,\n    propsReadySystem,\n    recalcSystem\n  ),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem, buildListState } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { propsReadySystem } from './propsReadySystem'\n\nexport const initialItemCountSystem = u.system(\n  ([{ sizes, firstItemIndex, data, gap }, { listState }, { didMount }]) => {\n    const initialItemCount = u.statefulStream(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.withLatestFrom(sizes, firstItemIndex, gap, data),\n        u.map(([[, count], sizes, firstItemIndex, gap, data = []]) => {\n          let includedGroupsCount = 0\n          if (sizes.groupIndices.length > 0) {\n            for (const index of sizes.groupIndices) {\n              if (index - includedGroupsCount >= count) {\n                break\n              }\n              includedGroupsCount++\n            }\n          }\n          const adjustedCount = count + includedGroupsCount\n          const items = Array.from({ length: adjustedCount }).map((_, index) => ({ index, size: 0, offset: 0, data: data[index] }))\n          return buildListState(items, [], adjustedCount, gap, sizes, firstItemIndex)\n        })\n      ),\n      listState\n    )\n\n    return { initialItemCount }\n  },\n  u.tup(sizeSystem, listStateSystem, propsReadySystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { ListRange } from './interfaces'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { ScrollSeekConfiguration } from './interfaces'\n\nexport const scrollSeekSystem = u.system(\n  ([{ scrollVelocity }]) => {\n    const isSeeking = u.statefulStream(false)\n    const rangeChanged = u.stream<ListRange>()\n    const scrollSeekConfiguration = u.statefulStream<ScrollSeekConfiguration | undefined | false>(false)\n\n    u.connect(\n      u.pipe(\n        scrollVelocity,\n        u.withLatestFrom(scrollSeekConfiguration, isSeeking, rangeChanged),\n        u.filter(([_, config]) => !!config),\n        u.map(([speed, config, isSeeking, range]) => {\n          const { exit, enter } = config as ScrollSeekConfiguration\n          if (isSeeking) {\n            if (exit(speed, range)) {\n              return false\n            }\n          } else {\n            if (enter(speed, range)) {\n              return true\n            }\n          }\n          return isSeeking\n        }),\n        u.distinctUntilChanged()\n      ),\n      isSeeking\n    )\n\n    u.subscribe(\n      u.pipe(u.combineLatest(isSeeking, scrollVelocity, rangeChanged), u.withLatestFrom(scrollSeekConfiguration)),\n      ([[isSeeking, velocity, range], config]) => isSeeking && config && config.change && config.change(velocity, range)\n    )\n\n    return { isSeeking, scrollSeekConfiguration, scrollVelocity, scrollSeekRangeChanged: rangeChanged }\n  },\n  u.tup(stateFlagsSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\n\nexport const topItemCountSystem = u.system(([{ topItemsIndexes }]) => {\n  const topItemCount = u.statefulStream(0)\n\n  u.connect(\n    u.pipe(\n      topItemCount,\n      u.filter((length) => length > 0),\n      u.map((length) => Array.from({ length }).map((_, index) => index))\n    ),\n    topItemsIndexes\n  )\n  return { topItemCount }\n}, u.tup(listStateSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const totalListHeightSystem = u.system(\n  ([{ footerHeight, headerHeight, fixedHeaderHeight }, { listState }]) => {\n    const totalListHeightChanged = u.stream<number>()\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(footerHeight, headerHeight, fixedHeaderHeight, listState),\n        u.map(([footerHeight, headerHeight, fixedHeaderHeight, listState]) => {\n          return footerHeight + headerHeight + fixedHeaderHeight + listState.offsetBottom + listState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(u.duc(totalListHeight), totalListHeightChanged)\n\n    return { totalListHeight, totalListHeightChanged }\n  },\n  u.tup(domIOSystem, listStateSystem),\n  { singleton: true }\n)\n","export function simpleMemoize<T extends () => any>(func: T): T {\n  let called = false\n  let result: unknown\n\n  return (() => {\n    if (!called) {\n      called = true\n      result = func()\n    }\n    return result\n  }) as T\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { UP, stateFlagsSystem } from './stateFlagsSystem'\nimport { ListItem } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\nimport { simpleMemoize } from './utils/simpleMemoize'\nimport { recalcSystem } from './recalcSystem'\n\nconst isMobileSafari = simpleMemoize(() => {\n  return /iP(ad|hone|od).+Version\\/[\\d.]+.*Safari/i.test(navigator.userAgent)\n})\n\ntype UpwardFixState = [number, ListItem<any>[], number, number]\n/**\n * Fixes upward scrolling by calculating and compensation from changed item heights, using scrollBy.\n */\nexport const upwardScrollFixSystem = u.system(\n  ([\n    { scrollBy, scrollTop, deviation, scrollingInProgress },\n    { isScrolling, isAtBottom, scrollDirection, lastJumpDueToItemResize },\n    { listState },\n    { beforeUnshiftWith, shiftWithOffset, sizes, gap },\n    { log },\n    { recalcInProgress },\n  ]) => {\n    const deviationOffset = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.withLatestFrom(lastJumpDueToItemResize),\n        u.scan(\n          ([, prevItems, prevTotalCount, prevTotalHeight], [{ items, totalCount, bottom, offsetBottom }, lastJumpDueToItemResize]) => {\n            const totalHeight = bottom + offsetBottom\n\n            let newDev = 0\n            if (prevTotalCount === totalCount) {\n              if (prevItems.length > 0 && items.length > 0) {\n                const atStart = items[0].originalIndex === 0 && prevItems[0].originalIndex === 0\n                if (!atStart) {\n                  newDev = totalHeight - prevTotalHeight\n                  if (newDev !== 0) {\n                    newDev += lastJumpDueToItemResize\n                  }\n                }\n              }\n            }\n\n            return [newDev, items, totalCount, totalHeight] as UpwardFixState\n          },\n          [0, [], 0, 0] as UpwardFixState\n        ),\n        u.filter(([amount]) => amount !== 0),\n        u.withLatestFrom(scrollTop, scrollDirection, scrollingInProgress, isAtBottom, log),\n        u.filter(([, scrollTop, scrollDirection, scrollingInProgress]) => {\n          return !scrollingInProgress && scrollTop !== 0 && scrollDirection === UP\n        }),\n        u.map(([[amount], , , , , log]) => {\n          log('Upward scrolling compensation', { amount }, LogLevel.DEBUG)\n          return amount\n        })\n      )\n    )\n\n    function scrollByWith(offset: number) {\n      if (offset > 0) {\n        u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n        u.publish(deviation, 0)\n      } else {\n        u.publish(deviation, 0)\n        u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n      }\n    }\n\n    u.subscribe(u.pipe(deviationOffset, u.withLatestFrom(deviation, isScrolling)), ([offset, deviationAmount, isScrolling]) => {\n      if (isScrolling && isMobileSafari()) {\n        u.publish(deviation, deviationAmount - offset)\n      } else {\n        scrollByWith(-offset)\n      }\n    })\n\n    // this hack is only necessary for mobile safari which does not support scrollBy while scrolling is in progress.\n    // when the browser stops scrolling, restore the position and reset the glitching\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.statefulStreamFromEmitter(isScrolling, false), deviation, recalcInProgress),\n        u.filter(([is, deviation, recalc]) => !is && !recalc && deviation !== 0),\n        u.map(([_, deviation]) => deviation),\n        u.throttleTime(1)\n      ),\n      scrollByWith\n    )\n\n    u.connect(\n      u.pipe(\n        shiftWithOffset,\n        u.map((offset) => {\n          return { top: -offset }\n        })\n      ),\n      scrollBy\n    )\n\n    u.subscribe(\n      u.pipe(\n        beforeUnshiftWith,\n        u.withLatestFrom(sizes, gap),\n        u.map(([offset, { lastSize }, gap]) => offset * lastSize + offset * gap)\n      ),\n      (offset) => {\n        u.publish(deviation, offset)\n        requestAnimationFrame(() => {\n          u.publish(scrollBy, { top: offset })\n          requestAnimationFrame(() => {\n            u.publish(deviation, 0)\n            u.publish(recalcInProgress, false)\n          })\n        })\n      }\n    )\n\n    return { deviation }\n  },\n  u.tup(domIOSystem, stateFlagsSystem, listStateSystem, sizeSystem, loggerSystem, recalcSystem)\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const initialScrollTopSystem = u.system(\n  ([{ totalListHeight }, { didMount }, { scrollTo }]) => {\n    const initialScrollTop = u.statefulStream(0)\n\n    u.subscribe(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialScrollTop),\n        u.filter(([, offset]) => offset !== 0),\n        u.map(([, offset]) => ({ top: offset }))\n      ),\n      (location) => {\n        u.handleNext(\n          u.pipe(\n            totalListHeight,\n            u.filter((val) => val !== 0)\n          ),\n          () => {\n            setTimeout(() => {\n              u.publish(scrollTo, location)\n            })\n          }\n        )\n      }\n    )\n\n    return {\n      initialScrollTop,\n    }\n  },\n  u.tup(totalListHeightSystem, propsReadySystem, domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const alignToBottomSystem = u.system(\n  ([{ viewportHeight }, { totalListHeight }]) => {\n    const alignToBottom = u.statefulStream(false)\n\n    const paddingTopAddition = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(alignToBottom, viewportHeight, totalListHeight),\n        u.filter(([enabled]) => enabled),\n        u.map(([, viewportHeight, totalListHeight]) => {\n          return Math.max(0, viewportHeight - totalListHeight)\n        }),\n        u.distinctUntilChanged()\n      ),\n      0\n    )\n\n    return { alignToBottom, paddingTopAddition }\n  },\n  u.tup(domIOSystem, totalListHeightSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { WindowViewportInfo, ScrollContainerState } from './interfaces'\n\nexport const windowScrollerSystem = u.system(([{ scrollTo, scrollContainerState }]) => {\n  const windowScrollContainerState = u.stream<ScrollContainerState>()\n  const windowViewportRect = u.stream<WindowViewportInfo>()\n  const windowScrollTo = u.stream<ScrollToOptions>()\n  const useWindowScroll = u.statefulStream(false)\n  const customScrollParent = u.statefulStream<HTMLElement | undefined>(undefined)\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(windowScrollContainerState, windowViewportRect),\n      u.map(([{ viewportHeight, scrollTop: windowScrollTop, scrollHeight }, { offsetTop }]) => {\n        return {\n          scrollTop: Math.max(0, windowScrollTop - offsetTop),\n          scrollHeight,\n          viewportHeight,\n        }\n      })\n    ),\n    scrollContainerState\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTo,\n      u.withLatestFrom(windowViewportRect),\n      u.map(([scrollTo, { offsetTop }]) => {\n        return {\n          ...scrollTo,\n          top: scrollTo.top! + offsetTop,\n        }\n      })\n    ),\n    windowScrollTo\n  )\n\n  return {\n    // config\n    useWindowScroll,\n    customScrollParent,\n\n    // input\n    windowScrollContainerState,\n    windowViewportRect,\n\n    // signals\n    windowScrollTo,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromLocation, sizeSystem } from './sizeSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { ScrollIntoViewLocation } from './interfaces'\n\nexport const scrollIntoViewSystem = u.system(\n  ([{ sizes, totalCount, gap }, { scrollTop, viewportHeight, headerHeight, scrollingInProgress }, { scrollToIndex }]) => {\n    const scrollIntoView = u.stream<ScrollIntoViewLocation>()\n\n    u.connect(\n      u.pipe(\n        scrollIntoView,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, headerHeight, scrollTop, gap),\n        u.map(([viewLocation, sizes, viewportHeight, totalCount, headerHeight, scrollTop, gap]) => {\n          const { done, behavior, align, ...rest } = viewLocation\n          let location = null\n          const actualIndex = originalIndexFromLocation(viewLocation, sizes, totalCount - 1)\n\n          const itemTop = offsetOf(actualIndex, sizes.offsetTree, gap) + headerHeight\n          if (itemTop < scrollTop) {\n            location = { ...rest, behavior, align: align ?? 'start' }\n          } else {\n            const itemBottom = itemTop + findMaxKeyValue(sizes.sizeTree, actualIndex)[1]!\n\n            if (itemBottom > scrollTop + viewportHeight) {\n              location = { ...rest, behavior, align: align ?? 'end' }\n            }\n          }\n\n          if (location) {\n            done &&\n              u.handleNext(\n                u.pipe(\n                  scrollingInProgress,\n                  u.skip(1),\n                  u.filter((value) => value === false)\n                ),\n                done\n              )\n          } else {\n            done && done()\n          }\n\n          return location\n        }),\n        u.filter((value) => value !== null)\n      ),\n      scrollToIndex\n    )\n\n    return {\n      scrollIntoView,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, listStateSystem, loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { followOutputSystem } from './followOutputSystem'\nimport { groupedListSystem } from './groupedListSystem'\nimport { initialItemCountSystem } from './initialItemCountSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { topItemCountSystem } from './topItemCountSystem'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { upwardScrollFixSystem } from './upwardScrollFixSystem'\nimport { initialScrollTopSystem } from './initialScrollTopSystem'\nimport { alignToBottomSystem } from './alignToBottomSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollIntoViewSystem } from './scrollIntoViewSystem'\n\n// workaround the growing list of systems below\n// fix this with 4.1 recursive conditional types\nconst featureGroup1System = u.system(\n  ([\n    sizeRange,\n    initialItemCount,\n    propsReady,\n    scrollSeek,\n    totalListHeight,\n    initialScrollTopSystem,\n    alignToBottom,\n    windowScroller,\n    scrollIntoView,\n  ]) => {\n    return {\n      ...sizeRange,\n      ...initialItemCount,\n      ...propsReady,\n      ...scrollSeek,\n      ...totalListHeight,\n      ...initialScrollTopSystem,\n      ...alignToBottom,\n      ...windowScroller,\n      ...scrollIntoView,\n    }\n  },\n  u.tup(\n    sizeRangeSystem,\n    initialItemCountSystem,\n    propsReadySystem,\n    scrollSeekSystem,\n    totalListHeightSystem,\n    initialScrollTopSystem,\n    alignToBottomSystem,\n    windowScrollerSystem,\n    scrollIntoViewSystem\n  )\n)\n\nexport const listSystem = u.system(\n  ([\n    {\n      totalCount,\n      sizeRanges,\n      fixedItemSize,\n      defaultItemSize,\n      trackItemSizes,\n      itemSize,\n      data,\n      firstItemIndex,\n      groupIndices,\n      statefulTotalCount,\n      gap,\n    },\n    { initialTopMostItemIndex, scrolledToInitialItem },\n    domIO,\n    followOutput,\n    { listState, topItemsIndexes, ...flags },\n    { scrollToIndex },\n    _,\n    { topItemCount },\n    { groupCounts },\n    featureGroup1,\n    log,\n  ]) => {\n    u.connect(flags.rangeChanged, featureGroup1.scrollSeekRangeChanged)\n    u.connect(\n      u.pipe(\n        featureGroup1.windowViewportRect,\n        u.map((value) => value.visibleHeight)\n      ),\n      domIO.viewportHeight\n    )\n\n    return {\n      // input\n      totalCount,\n      data,\n      firstItemIndex,\n      sizeRanges,\n      initialTopMostItemIndex,\n      scrolledToInitialItem,\n      topItemsIndexes,\n      topItemCount,\n      groupCounts,\n      fixedItemHeight: fixedItemSize,\n      defaultItemHeight: defaultItemSize,\n      gap,\n      ...followOutput,\n\n      // output\n      statefulTotalCount,\n      listState,\n      scrollToIndex,\n      trackItemSizes,\n      itemSize,\n      groupIndices,\n\n      // exported from stateFlagsSystem\n      ...flags,\n      // the bag of IO from featureGroup1System\n      ...featureGroup1,\n      ...domIO,\n      ...log,\n    }\n  },\n  u.tup(\n    sizeSystem,\n    initialTopMostItemIndexSystem,\n    domIOSystem,\n    followOutputSystem,\n    listStateSystem,\n    scrollToIndexSystem,\n    upwardScrollFixSystem,\n    topItemCountSystem,\n    groupedListSystem,\n    featureGroup1System,\n    loggerSystem\n  )\n)\n","import { simpleMemoize } from './simpleMemoize'\n\nconst WEBKIT_STICKY = '-webkit-sticky'\nconst STICKY = 'sticky'\n\nexport const positionStickyCssValue = simpleMemoize(() => {\n  if (typeof document === 'undefined') {\n    return STICKY\n  }\n  const node = document.createElement('div')\n  node.style.position = WEBKIT_STICKY\n  return node.style.position === WEBKIT_STICKY ? WEBKIT_STICKY : STICKY\n})\n","import { useEffect, useRef, useCallback } from 'react'\nimport { useSizeWithElRef } from './useSize'\nimport { WindowViewportInfo } from '../interfaces'\n\nexport default function useWindowViewportRectRef(callback: (info: WindowViewportInfo) => void, customScrollParent?: HTMLElement) {\n  const viewportInfo = useRef<WindowViewportInfo | null>(null)\n\n  const calculateInfo = useCallback(\n    (element: HTMLElement | null) => {\n      if (element === null || !element.offsetParent) {\n        return\n      }\n      const rect = element.getBoundingClientRect()\n      const visibleWidth = rect.width\n      let visibleHeight: number, offsetTop: number\n\n      if (customScrollParent) {\n        const customScrollParentRect = customScrollParent.getBoundingClientRect()\n        const deltaTop = rect.top - customScrollParentRect.top\n\n        visibleHeight = customScrollParentRect.height - Math.max(0, deltaTop)\n        offsetTop = deltaTop + customScrollParent.scrollTop\n      } else {\n        visibleHeight = window.innerHeight - Math.max(0, rect.top)\n        offsetTop = rect.top + window.pageYOffset\n      }\n\n      viewportInfo.current = {\n        offsetTop,\n        visibleHeight,\n        visibleWidth,\n      }\n\n      callback(viewportInfo.current)\n    },\n    [callback, customScrollParent]\n  )\n\n  const { callbackRef, ref } = useSizeWithElRef(calculateInfo)\n\n  const scrollAndResizeEventHandler = useCallback(() => {\n    calculateInfo(ref.current)\n  }, [calculateInfo, ref])\n\n  useEffect(() => {\n    if (customScrollParent) {\n      customScrollParent.addEventListener('scroll', scrollAndResizeEventHandler)\n      const observer = new ResizeObserver(scrollAndResizeEventHandler)\n      observer.observe(customScrollParent)\n      return () => {\n        customScrollParent.removeEventListener('scroll', scrollAndResizeEventHandler)\n        observer.unobserve(customScrollParent)\n      }\n    } else {\n      window.addEventListener('scroll', scrollAndResizeEventHandler)\n      window.addEventListener('resize', scrollAndResizeEventHandler)\n      return () => {\n        window.removeEventListener('scroll', scrollAndResizeEventHandler)\n        window.removeEventListener('resize', scrollAndResizeEventHandler)\n      }\n    }\n  }, [scrollAndResizeEventHandler, customScrollParent])\n\n  return callbackRef\n}\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { ComponentType, createElement, CSSProperties, FC, PropsWithChildren } from 'react'\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport useScrollTop from './hooks/useScrollTop'\nimport useSize from './hooks/useSize'\nimport { Components, ComputeItemKey, GroupContent, GroupItemContent, ItemContent, ListRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { positionStickyCssValue } from './utils/positionStickyCssValue'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { correctItemSize } from './utils/correctItemSize'\nimport { ScrollerProps } from '.'\n\nexport function identity<T>(value: T) {\n  return value\n}\n\nconst listComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<ItemContent<any, any> | GroupItemContent<any, any>>((index: number) => `Item ${index}`)\n  const context = u.statefulStream<unknown>(null)\n  const groupContent = u.statefulStream<GroupContent>((index: number) => `Group ${index}`)\n  const components = u.statefulStream<Components<any>>({})\n  const computeItemKey = u.statefulStream<ComputeItemKey<any, any>>(identity)\n  const headerFooterTag = u.statefulStream('div')\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | Window | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof Components<any>>(propName: K, defaultValue: Components<any>[K] | null | 'div' = null) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    groupContent,\n    components,\n    computeItemKey,\n    headerFooterTag,\n    scrollerRef,\n    FooterComponent: distinctProp('Footer'),\n    HeaderComponent: distinctProp('Header'),\n    TopItemListComponent: distinctProp('TopItemList'),\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    GroupComponent: distinctProp('Group', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n  }\n})\n\nexport function addDeprecatedAlias<T>(prop: u.Stream<T>, message: string) {\n  const alias = u.stream<T>()\n  u.subscribe(alias, () =>\n    console.warn(`react-virtuoso: You are using a deprecated property. ${message}`, 'color: red;', 'color: inherit;', 'color: blue;')\n  )\n  u.connect(alias, prop)\n  return alias\n}\n\nconst combinedSystem = u.system(([listSystem, propsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(propsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    group: addDeprecatedAlias(propsSystem.groupContent, 'Rename the %cgroup%c prop to %cgroupContent.'),\n    topItems: addDeprecatedAlias(listSystem.topItemCount, 'Rename the %ctopItems%c prop to %ctopItemCount.'),\n    itemHeight: addDeprecatedAlias(listSystem.fixedItemHeight, 'Rename the %citemHeight%c prop to %cfixedItemHeight.'),\n    scrollingStateChange: addDeprecatedAlias(listSystem.isScrolling, 'Rename the %cscrollingStateChange%c prop to %cisScrolling.'),\n    adjustForPrependedItems: u.stream<any>(),\n    maxHeightCacheSize: u.stream<any>(),\n    footer: u.stream<any>(),\n    header: u.stream<any>(),\n    HeaderContainer: u.stream<any>(),\n    FooterContainer: u.stream<any>(),\n    ItemContainer: u.stream<any>(),\n    ScrollContainer: u.stream<any>(),\n    GroupContainer: u.stream<any>(),\n    ListContainer: u.stream<any>(),\n    emptyComponent: u.stream<any>(),\n    scrollSeek: u.stream<any>(),\n  }\n\n  u.subscribe(deprecatedProps.adjustForPrependedItems, () => {\n    console.warn(\n      `react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.`,\n      'color: red;',\n      'color: inherit;',\n      'color: blue;'\n    )\n  })\n\n  u.subscribe(deprecatedProps.maxHeightCacheSize, () => {\n    console.warn(`react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.`)\n  })\n\n  u.subscribe(deprecatedProps.HeaderContainer, () => {\n    console.warn(\n      `react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.`\n    )\n  })\n\n  u.subscribe(deprecatedProps.FooterContainer, () => {\n    console.warn(\n      `react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.`\n    )\n  })\n\n  function deprecateComponentProp(stream: u.Stream<any>, componentName: string, propName: string) {\n    u.connect(\n      u.pipe(\n        stream,\n        u.withLatestFrom(propsSystem.components),\n        u.map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      propsSystem.components\n    )\n  }\n\n  u.subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    u.publish(propsSystem.components, { ...u.getValue(propsSystem.components), ScrollSeekPlaceholder: placeholder })\n    u.publish(listSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.footer, 'Footer', 'footer')\n  deprecateComponentProp(deprecatedProps.header, 'Header', 'header')\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n  deprecateComponentProp(deprecatedProps.emptyComponent, 'EmptyPlaceholder', 'emptyComponent')\n  deprecateComponentProp(deprecatedProps.GroupContainer, 'Group', 'GroupContainer')\n\n  return { ...listSystem, ...propsSystem, ...deprecatedProps }\n}, u.tup(listSystem, listComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => <div style={{ height }}></div>\n\nconst GROUP_STYLE = { position: positionStickyCssValue(), zIndex: 1, overflowAnchor: 'none' } as const\nconst ITEM_STYLE = { overflowAnchor: 'none' } as const\n\nexport const Items = React.memo(function VirtuosoItems({ showTopList = false }: { showTopList?: boolean }) {\n  const listState = useEmitterValue('listState')\n\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const context = useEmitterValue('context')\n  const groupContent = useEmitterValue('groupContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n  const listGap = usePublisher('gap')\n\n  const { callbackRef } = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    showTopList ? u.noop : scrollContainerStateCallback,\n    log,\n    listGap,\n    customScrollParent\n  )\n\n  const [deviation, setDeviation] = React.useState(0)\n  useEmitter('deviation', (value) => {\n    if (deviation !== value) {\n      // ref.current!.style.marginTop = `${value}px`\n      setDeviation(value)\n    }\n  })\n\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const GroupComponent = useEmitterValue('GroupComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const hasGroups = useEmitterValue('groupIndices').length > 0\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n\n  const containerStyle: CSSProperties = showTopList\n    ? {}\n    : {\n        boxSizing: 'border-box',\n        paddingTop: listState.offsetTop + paddingTopAddition,\n        paddingBottom: listState.offsetBottom,\n        marginTop: deviation,\n      }\n\n  if (!showTopList && listState.totalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context))\n  }\n\n  return createElement(\n    ListComponent,\n    {\n      ...contextPropIfNotDomElement(ListComponent, context),\n      ref: callbackRef,\n      style: containerStyle,\n      'data-test-id': showTopList ? 'virtuoso-top-item-list' : 'virtuoso-item-list',\n    },\n    (showTopList ? listState.topItems : listState.items).map((item) => {\n      const index = item.originalIndex!\n      const key = computeItemKey(index + listState.firstItemIndex, item.data, context)\n\n      if (isSeeking) {\n        return createElement(ScrollSeekPlaceholder, {\n          ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n          key,\n          index: item.index,\n          height: item.size,\n          type: item.type || 'item',\n          ...(item.type === 'group' ? {} : { groupIndex: item.groupIndex }),\n        })\n      }\n\n      if (item.type === 'group') {\n        return createElement(\n          GroupComponent,\n          {\n            ...contextPropIfNotDomElement(GroupComponent, context),\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            style: GROUP_STYLE,\n          },\n          groupContent(item.index)\n        )\n      } else {\n        return createElement(\n          ItemComponent,\n          {\n            ...contextPropIfNotDomElement(ItemComponent, context),\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            'data-item-group-index': item.groupIndex,\n            style: ITEM_STYLE,\n          },\n          hasGroups\n            ? (itemContent as GroupItemContent<any, any>)(item.index, item.groupIndex!, item.data, context)\n            : (itemContent as ItemContent<any, any>)(item.index, item.data, context)\n        )\n      }\n    })\n  )\n})\n\nexport const scrollerStyle: CSSProperties = {\n  height: '100%',\n  outline: 'none',\n  overflowY: 'auto',\n  position: 'relative',\n  WebkitOverflowScrolling: 'touch',\n}\n\nexport const viewportStyle: CSSProperties = {\n  width: '100%',\n  height: '100%',\n  position: 'absolute',\n  top: 0,\n}\n\nconst topItemListStyle: CSSProperties = {\n  width: '100%',\n  position: positionStickyCssValue(),\n  top: 0,\n}\n\nexport function contextPropIfNotDomElement(element: unknown, context: unknown) {\n  if (typeof element === 'string') {\n    return undefined\n  }\n  return { context }\n}\n\nconst Header: FC = React.memo(function VirtuosoHeader() {\n  const Header = useEmitterValue('HeaderComponent')\n  const headerHeight = usePublisher('headerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => headerHeight(correctItemSize(el, 'height')))\n  const context = useEmitterValue('context')\n  return Header ? createElement(headerFooterTag, { ref }, createElement(Header, contextPropIfNotDomElement(Header, context))) : null\n})\n\nconst Footer: FC = React.memo(function VirtuosoFooter() {\n  const Footer = useEmitterValue('FooterComponent')\n  const footerHeight = usePublisher('footerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => footerHeight(correctItemSize(el, 'height')))\n  const context = useEmitterValue('context')\n  return Footer ? createElement(headerFooterTag, { ref }, createElement(Footer, contextPropIfNotDomElement(Footer, context))) : null\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nexport function buildScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: ComponentType<ScrollerProps> = React.memo(function VirtuosoScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('scrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const scrollerRefCallback = useEmitterValue('scrollerRef')\n    const context = useEmitterValue('context')\n\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      scrollerRefCallback\n    )\n\n    useEmitter('scrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        ref: scrollerRef as React.MutableRefObject<HTMLDivElement | null>,\n        style: { ...scrollerStyle, ...style },\n        'data-test-id': 'virtuoso-scroller',\n        'data-virtuoso-scroller': true,\n        tabIndex: 0,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context),\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nexport function buildWindowScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: Components['Scroller'] = React.memo(function VirtuosoWindowScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('windowScrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const totalListHeight = useEmitterValue('totalListHeight')\n    const deviation = useEmitterValue('deviation')\n    const customScrollParent = useEmitterValue('customScrollParent')\n    const context = useEmitterValue('context')\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      u.noop,\n      customScrollParent\n    )\n\n    useIsomorphicLayoutEffect(() => {\n      scrollerRef.current = customScrollParent ? customScrollParent : window\n      return () => {\n        scrollerRef.current = null\n      }\n    }, [scrollerRef, customScrollParent])\n\n    useEmitter('windowScrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        style: { position: 'relative', ...style, ...(totalListHeight !== 0 ? { height: totalListHeight + deviation } : {}) },\n        'data-virtuoso-scroller': true,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context),\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nconst Viewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const viewportHeight = usePublisher('viewportHeight')\n  const viewportRef = useSize(u.compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TopItemListContainer: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const TopItemList = useEmitterValue('TopItemListComponent')\n  const headerHeight = useEmitterValue('headerHeight')\n  const style = { ...topItemListStyle, marginTop: `${headerHeight}px` }\n  const context = useEmitterValue('context')\n  return createElement(TopItemList || 'div', { style, context }, children)\n}\n\nconst ListRoot: FC<ListRootProps> = React.memo(function VirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const showTopList = useEmitterValue('topItemsIndexes').length > 0\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <Header />\n        <Items />\n        <Footer />\n      </TheViewport>\n      {showTopList && (\n        <TopItemListContainer>\n          <Items showTopList={true} />\n        </TopItemListContainer>\n      )}\n    </TheScroller>\n  )\n})\n\nexport type ListHandle = RefHandle<typeof List>\n\nexport const {\n  Component: List,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      context: 'context',\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      groupContent: 'groupContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      atTopThreshold: 'atTopThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      headerFooterTag: 'headerFooterTag',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n      react18ConcurrentRendering: 'react18ConcurrentRendering',\n\n      // deprecated\n      item: 'item',\n      group: 'group',\n      topItems: 'topItems',\n      itemHeight: 'itemHeight',\n      scrollingStateChange: 'scrollingStateChange',\n      maxHeightCacheSize: 'maxHeightCacheSize',\n      footer: 'footer',\n      header: 'header',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      GroupContainer: 'GroupContainer',\n      emptyComponent: 'emptyComponent',\n      HeaderContainer: 'HeaderContainer',\n      FooterContainer: 'FooterContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      adjustForPrependedItems: 'adjustForPrependedItems',\n      autoscrollToBottom: 'autoscrollToBottom',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  ListRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import * as u from '@virtuoso.dev/urx'\nimport { rangeComparator, tupleComparator } from './comparators'\nimport { domIOSystem } from './domIOSystem'\nimport { FlatIndexLocationWithAlign } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { IndexLocation, normalizeIndexLocation } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\n\nexport interface Gap {\n  row: number\n  column: number\n}\n\nexport interface ElementDimensions {\n  width: number\n  height: number\n}\n\nexport interface GridItem {\n  index: number\n}\n\nexport interface GridLayout {\n  top: number\n  bottom: number\n}\n\nexport interface GridState extends GridLayout {\n  items: GridItem[]\n  offsetTop: number\n  offsetBottom: number\n  itemHeight: number\n  itemWidth: number\n}\n\nconst INITIAL_GRID_STATE: GridState = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst PROBE_GRID_STATE: GridState = {\n  items: [{ index: 0 }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst { round, ceil, floor, min, max } = Math\n\nfunction buildItems(startIndex: number, endIndex: number) {\n  return Array.from({ length: endIndex - startIndex + 1 }).map((_, i) => ({ index: i + startIndex } as GridItem))\n}\n\nfunction gapComparator(prev: Gap, next: Gap) {\n  return prev && prev.column === next.column && prev.row === next.row\n}\nexport const gridSystem = u.system(\n  ([\n    { overscan, visibleRange, listBoundary },\n    { scrollTop, viewportHeight, scrollBy, scrollTo, smoothScrollTargetReached, scrollContainerState },\n    stateFlags,\n    scrollSeek,\n    { propsReady, didMount },\n    { windowViewportRect, windowScrollTo, useWindowScroll, customScrollParent, windowScrollContainerState },\n    log,\n  ]) => {\n    const totalCount = u.statefulStream(0)\n    const initialItemCount = u.statefulStream(0)\n    const gridState = u.statefulStream(INITIAL_GRID_STATE)\n    const viewportDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const itemDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const scrollToIndex = u.stream<IndexLocation>()\n    const scrollHeight = u.stream<number>()\n    const deviation = u.statefulStream(0)\n    const gap = u.statefulStream<Gap>({ row: 0, column: 0 })\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.map(([, count]) => {\n          return {\n            items: buildItems(0, count - 1),\n            top: 0,\n            bottom: 0,\n            offsetBottom: 0,\n            offsetTop: 0,\n            itemHeight: 0,\n            itemWidth: 0,\n          }\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(\n          u.duc(totalCount),\n          visibleRange,\n          u.duc(gap, gapComparator),\n          u.duc(itemDimensions, (prev, next) => prev && prev.width === next.width && prev.height === next.height)\n        ),\n        u.withLatestFrom(viewportDimensions),\n        u.map(([[totalCount, [startOffset, endOffset], gap, item], viewport]) => {\n          const { row: rowGap, column: columnGap } = gap\n          const { height: itemHeight, width: itemWidth } = item\n          const { width: viewportWidth } = viewport\n\n          if (totalCount === 0 || viewportWidth === 0) {\n            return INITIAL_GRID_STATE\n          }\n\n          if (itemWidth === 0) {\n            return PROBE_GRID_STATE\n          }\n\n          const perRow = itemsPerRow(viewportWidth, itemWidth, columnGap)\n\n          let startIndex = perRow * floor((startOffset + rowGap) / (itemHeight + rowGap))\n          let endIndex = perRow * ceil((endOffset + rowGap) / (itemHeight + rowGap)) - 1\n          endIndex = max(0, min(totalCount - 1, endIndex))\n          startIndex = min(endIndex, max(0, startIndex))\n\n          const items = buildItems(startIndex, endIndex)\n          const { top, bottom } = gridLayout(viewport, gap, item, items)\n          const rowCount = ceil(totalCount / perRow)\n          const totalHeight = rowCount * itemHeight + (rowCount - 1) * rowGap\n          const offsetBottom = totalHeight - bottom\n\n          return { items, offsetTop: top, offsetBottom, top, bottom, itemHeight, itemWidth } as GridState\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        viewportDimensions,\n        u.map(({ height }) => height)\n      ),\n      viewportHeight\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(viewportDimensions, itemDimensions, gridState, gap),\n        u.map(([viewportDimensions, item, { items }, gap]) => {\n          const { top, bottom } = gridLayout(viewportDimensions, gap, item, items)\n\n          return [top, bottom] as [number, number]\n        }),\n        u.distinctUntilChanged(tupleComparator)\n      ),\n      listBoundary\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].index === totalCount - 1),\n        u.map(([, totalCount]) => totalCount - 1),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => {\n          return items.length > 0 && items[0].index === 0\n        }),\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        u.mapTo(0),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          return {\n            startIndex: items[0].index,\n            endIndex: items[items.length - 1].index,\n          }\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    u.connect(rangeChanged, scrollSeek.scrollSeekRangeChanged)\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(viewportDimensions, itemDimensions, totalCount, gap),\n        u.map(([location, viewport, item, totalCount, gap]) => {\n          const normalLocation = normalizeIndexLocation(location) as FlatIndexLocationWithAlign\n          const { align, behavior, offset } = normalLocation\n          let index = normalLocation.index\n          if (index === 'LAST') {\n            index = totalCount - 1\n          }\n\n          index = max(0, index, min(totalCount - 1, index))\n\n          let top = itemTop(viewport, gap, item, index)\n\n          if (align === 'end') {\n            top = round(top - viewport.height + item.height)\n          } else if (align === 'center') {\n            top = round(top - viewport.height / 2 + item.height / 2)\n          }\n\n          if (offset) {\n            top += offset\n          }\n\n          return { top, behavior }\n        })\n      ),\n      scrollTo\n    )\n\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        gridState,\n        u.map((gridState) => {\n          return gridState.offsetBottom + gridState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(\n      u.pipe(\n        windowViewportRect,\n        u.map((viewportInfo) => ({ width: viewportInfo.visibleWidth, height: viewportInfo.visibleHeight }))\n      ),\n      viewportDimensions\n    )\n\n    return {\n      // input\n      totalCount,\n      viewportDimensions,\n      itemDimensions,\n      scrollTop,\n      scrollHeight,\n      overscan,\n      scrollBy,\n      scrollTo,\n      scrollToIndex,\n      smoothScrollTargetReached,\n      windowViewportRect,\n      windowScrollTo,\n      useWindowScroll,\n      customScrollParent,\n      windowScrollContainerState,\n      deviation,\n      scrollContainerState,\n      initialItemCount,\n      gap,\n      ...scrollSeek,\n\n      // output\n      gridState,\n      totalListHeight,\n      ...stateFlags,\n      startReached,\n      endReached,\n      rangeChanged,\n      propsReady,\n      ...log,\n    }\n  },\n  u.tup(sizeRangeSystem, domIOSystem, stateFlagsSystem, scrollSeekSystem, propsReadySystem, windowScrollerSystem, loggerSystem)\n)\n\nfunction gridLayout(viewport: ElementDimensions, gap: Gap, item: ElementDimensions, items: GridItem[]): GridLayout {\n  const { height: itemHeight } = item\n  if (itemHeight === undefined || items.length === 0) {\n    return { top: 0, bottom: 0 }\n  }\n\n  const top = itemTop(viewport, gap, item, items[0].index)\n  const bottom = itemTop(viewport, gap, item, items[items.length - 1].index) + itemHeight\n  return { top, bottom }\n}\n\nfunction itemTop(viewport: ElementDimensions, gap: Gap, item: ElementDimensions, index: number) {\n  const perRow = itemsPerRow(viewport.width, item.width, gap.column)\n  const rowCount = floor(index / perRow)\n  const top = rowCount * item.height + max(0, rowCount - 1) * gap.row\n  return top > 0 ? top + gap.row : top\n}\n\nfunction itemsPerRow(viewportWidth: number, itemWidth: number, gap: number) {\n  return max(1, floor((viewportWidth + gap) / (itemWidth + gap)))\n}\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\n\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC, PropsWithChildren } from 'react'\nimport { gridSystem } from './gridSystem'\nimport useSize from './hooks/useSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { GridComponents, GridComputeItemKey, GridItemContent, GridRootProps } from './interfaces'\nimport { addDeprecatedAlias, buildScroller, buildWindowScroller, contextPropIfNotDomElement, identity, viewportStyle } from './List'\nimport { Log, LogLevel } from './loggerSystem'\n\nconst gridComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<GridItemContent<any>>((index) => `Item ${index}`)\n  const components = u.statefulStream<GridComponents>({})\n  const context = u.statefulStream<unknown>(null)\n  const itemClassName = u.statefulStream('virtuoso-grid-item')\n  const listClassName = u.statefulStream('virtuoso-grid-list')\n  const computeItemKey = u.statefulStream<GridComputeItemKey>(identity)\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof GridComponents>(propName: K, defaultValue: GridComponents[K] | null | 'div' = null) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    components,\n    computeItemKey,\n    itemClassName,\n    listClassName,\n    scrollerRef,\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder', 'div'),\n  }\n})\n\nconst combinedSystem = u.system(([gridSystem, gridComponentPropsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(gridComponentPropsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    ItemContainer: u.stream<any>(),\n    ScrollContainer: u.stream<any>(),\n    ListContainer: u.stream<any>(),\n    emptyComponent: u.stream<any>(),\n    scrollSeek: u.stream<any>(),\n  }\n\n  function deprecateComponentProp(stream: u.Stream<any>, componentName: string, propName: string) {\n    u.connect(\n      u.pipe(\n        stream,\n        u.withLatestFrom(gridComponentPropsSystem.components),\n        u.map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      gridComponentPropsSystem.components\n    )\n  }\n\n  u.subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    u.publish(gridComponentPropsSystem.components, {\n      ...u.getValue(gridComponentPropsSystem.components),\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ScrollSeekPlaceholder: placeholder,\n    })\n    u.publish(gridSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n\n  return { ...gridSystem, ...gridComponentPropsSystem, ...deprecatedProps }\n}, u.tup(gridSystem, gridComponentPropsSystem))\n\nconst GridItems: FC = React.memo(function GridItems() {\n  const gridState = useEmitterValue('gridState')\n  const listClassName = useEmitterValue('listClassName')\n  const itemClassName = useEmitterValue('itemClassName')\n  const itemContent = useEmitterValue('itemContent')\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const scrollHeightCallback = usePublisher('scrollHeight')\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder')!\n  const context = useEmitterValue('context')\n  const itemDimensions = usePublisher('itemDimensions')\n  const gridGap = usePublisher('gap')\n  const log = useEmitterValue('log')\n\n  const listRef = useSize((el) => {\n    const scrollHeight = el.parentElement!.parentElement!.scrollHeight\n    scrollHeightCallback(scrollHeight)\n    const firstItem = el.firstChild as HTMLElement\n    if (firstItem) {\n      itemDimensions(firstItem.getBoundingClientRect())\n    }\n    gridGap({\n      row: resolveGapValue('row-gap', getComputedStyle(el).rowGap, log),\n      column: resolveGapValue('column-gap', getComputedStyle(el).columnGap, log),\n    })\n  })\n\n  return createElement(\n    ListComponent,\n    {\n      ref: listRef,\n      className: listClassName,\n      ...contextPropIfNotDomElement(ListComponent, context),\n      style: { paddingTop: gridState.offsetTop, paddingBottom: gridState.offsetBottom },\n    },\n    gridState.items.map((item) => {\n      const key = computeItemKey(item.index)\n      return isSeeking\n        ? createElement(ScrollSeekPlaceholder, {\n            key,\n            ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n            index: item.index,\n            height: gridState.itemHeight,\n            width: gridState.itemWidth,\n          })\n        : createElement(\n            ItemComponent,\n            { ...contextPropIfNotDomElement(ItemComponent, context), className: itemClassName, 'data-index': item.index, key },\n            itemContent(item.index, context)\n          )\n    })\n  )\n})\n\nconst Viewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const viewportDimensions = usePublisher('viewportDimensions')\n\n  const viewportRef = useSize((el) => {\n    viewportDimensions(el.getBoundingClientRect())\n  })\n\n  return (\n    <div style={viewportStyle} ref={viewportRef}>\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle}>\n      {children}\n    </div>\n  )\n}\n\nconst GridRoot: FC<GridRootProps> = React.memo(function GridRoot({ ...props }) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <GridItems />\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nconst {\n  Component: Grid,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    optional: {\n      totalCount: 'totalCount',\n      overscan: 'overscan',\n      itemContent: 'itemContent',\n      components: 'components',\n      computeItemKey: 'computeItemKey',\n      initialItemCount: 'initialItemCount',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      listClassName: 'listClassName',\n      itemClassName: 'itemClassName',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n\n      // deprecated\n      item: 'item',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      scrollToIndex: 'scrollToIndex',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n    },\n  },\n  GridRoot\n)\n\nexport type foo<T> = T extends React.ForwardRefExoticComponent<React.RefAttributes<infer Handle>> ? Handle : never\n\nexport type GridHandle = RefHandle<typeof Grid>\nexport { Grid }\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n\nfunction resolveGapValue(property: string, value: string | undefined, log: Log) {\n  if (value !== 'normal' && !value?.endsWith('px')) {\n    log(`${property} was not resolved to pixel value correctly`, value, LogLevel.WARN)\n  }\n  if (value === 'normal') {\n    return 0\n  }\n  return parseInt(value ?? '0', 10)\n}\n","import { systemToComponent } from '@virtuoso.dev/react-urx'\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC, PropsWithChildren } from 'react'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport { ComputeItemKey, ItemContent, FixedHeaderContent, TableComponents, TableRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { identity, buildScroller, buildWindowScroller, viewportStyle, contextPropIfNotDomElement } from './List'\nimport useSize from './hooks/useSize'\nimport { correctItemSize } from './utils/correctItemSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\n\nconst tableComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<ItemContent<any, unknown>>((index: number) => <td>Item ${index}</td>)\n  const context = u.statefulStream<unknown>(null)\n  const fixedHeaderContent = u.statefulStream<FixedHeaderContent>(null)\n  const components = u.statefulStream<TableComponents>({})\n  const computeItemKey = u.statefulStream<ComputeItemKey<any, unknown>>(identity)\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | Window | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof TableComponents>(\n    propName: K,\n    defaultValue: TableComponents[K] | null | 'thead' | 'table' | 'tbody' | 'tr' | 'div' = null\n  ) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    fixedHeaderContent,\n    components,\n    computeItemKey,\n    scrollerRef,\n    TableComponent: distinctProp('Table', 'table'),\n    TableHeadComponent: distinctProp('TableHead', 'thead'),\n    TableBodyComponent: distinctProp('TableBody', 'tbody'),\n    TableRowComponent: distinctProp('TableRow', 'tr'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n    FillerRow: distinctProp('FillerRow'),\n  }\n})\n\nconst combinedSystem = u.system(([listSystem, propsSystem]) => {\n  return { ...listSystem, ...propsSystem }\n}, u.tup(listSystem, tableComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height }}></td>\n  </tr>\n)\n\nconst DefaultFillerRow = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height: height, padding: 0, border: 0 }}></td>\n  </tr>\n)\n\nexport const Items = React.memo(function VirtuosoItems() {\n  const listState = useEmitterValue('listState')\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n\n  const { callbackRef, ref } = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    scrollContainerStateCallback,\n    log,\n    undefined,\n    customScrollParent\n  )\n\n  const [deviation, setDeviation] = React.useState(0)\n  useEmitter('deviation', (value) => {\n    if (deviation !== value) {\n      ref.current!.style.marginTop = `${value}px`\n      setDeviation(value)\n    }\n  })\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const FillerRow = useEmitterValue('FillerRow') || DefaultFillerRow\n  const TableBodyComponent = useEmitterValue('TableBodyComponent')!\n  const TableRowComponent = useEmitterValue('TableRowComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n  const firstItemIndex = useEmitterValue('firstItemIndex')\n  const statefulTotalCount = useEmitterValue('statefulTotalCount')\n  const context = useEmitterValue('context')\n\n  if (statefulTotalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context))\n  }\n\n  const paddingTop = listState.offsetTop + paddingTopAddition + deviation\n  const paddingBottom = listState.offsetBottom\n\n  const paddingTopEl = paddingTop > 0 ? <FillerRow height={paddingTop} key=\"padding-top\" /> : null\n\n  const paddingBottomEl = paddingBottom > 0 ? <FillerRow height={paddingBottom} key=\"padding-bottom\" /> : null\n\n  const items = listState.items.map((item) => {\n    const index = item.originalIndex!\n    const key = computeItemKey(index + firstItemIndex, item.data, context)\n\n    if (isSeeking) {\n      return createElement(ScrollSeekPlaceholder, {\n        ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n        key,\n        index: item.index,\n        height: item.size,\n        type: item.type || 'item',\n      })\n    }\n    return createElement(\n      TableRowComponent,\n      {\n        ...contextPropIfNotDomElement(TableRowComponent, context),\n        key,\n        'data-index': index,\n        'data-known-size': item.size,\n        'data-item-index': item.index,\n        style: { overflowAnchor: 'none' },\n      },\n      itemContent(item.index, item.data, context)\n    )\n  })\n\n  return createElement(\n    TableBodyComponent,\n    { ref: callbackRef, 'data-test-id': 'virtuoso-item-list', ...contextPropIfNotDomElement(TableBodyComponent, context) },\n    [paddingTopEl, ...items, paddingBottomEl]\n  )\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nconst Viewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const viewportHeight = usePublisher('viewportHeight')\n  const viewportRef = useSize(u.compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TableRoot: FC<TableRootProps> = React.memo(function TableVirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const fixedHeaderHeight = usePublisher('fixedHeaderHeight')\n  const fixedHeaderContent = useEmitterValue('fixedHeaderContent')\n  const context = useEmitterValue('context')\n  const theadRef = useSize(u.compose(fixedHeaderHeight, (el) => correctItemSize(el, 'height')))\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  const TheTable = useEmitterValue('TableComponent')\n  const TheTHead = useEmitterValue('TableHeadComponent')\n\n  const theHead = fixedHeaderContent\n    ? React.createElement(\n        TheTHead!,\n        {\n          key: 'TableHead',\n          style: { zIndex: 1, position: 'sticky', top: 0 },\n          ref: theadRef,\n          ...contextPropIfNotDomElement(TheTHead, context),\n        },\n        fixedHeaderContent()\n      )\n    : null\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        {React.createElement(TheTable!, { style: { borderSpacing: 0 }, ...contextPropIfNotDomElement(TheTable, context) }, [\n          theHead,\n          <Items key=\"TableBody\" />,\n        ])}\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nexport const {\n  Component: Table,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      context: 'context',\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      fixedHeaderContent: 'fixedHeaderContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      atTopThreshold: 'atTopThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n      react18ConcurrentRendering: 'react18ConcurrentRendering',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  TableRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import { ReactElement, Ref } from 'react'\n\nimport {\n  Components,\n  ComputeItemKey,\n  FollowOutput,\n  GridComponents,\n  GridComputeItemKey,\n  GridItemContent,\n  GroupContent,\n  GroupItemContent,\n  IndexLocationWithAlign,\n  ItemContent,\n  ListItem,\n  ListRange,\n  ScrollSeekConfiguration,\n  TableComponents,\n  FixedHeaderContent,\n  ScrollIntoViewLocation,\n  ListRootProps,\n  GridRootProps,\n  FlatIndexLocationWithAlign,\n  FlatScrollIntoViewLocation,\n  SizeFunction,\n} from './interfaces'\nimport { List } from './List'\nimport { Grid } from './Grid'\nimport { Table } from './Table'\n\nexport interface VirtuosoProps<D, C> extends ListRootProps {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Additional context available in the custom components and content callbacks\n   */\n  context?: C\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in react-window).\n   *\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   *\n   * *The property accepts pixel values.*\n   *\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   *\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set the amount of items to remain fixed at the top of the list.\n   *\n   * For a header that scrolls away when scrolling, check the `components.Header` property.\n   */\n  topItemCount?: number\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   * Pass in an object to achieve additional effects similar to `scrollToIndex`.\n   */\n  initialTopMostItemIndex?: number | IndexLocationWithAlign\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: Components<C>\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D, C>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D, C>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: SizeFunction\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Set to customize the wrapper tag for the header and footer components (default is `div`).\n   */\n  headerFooterTag?: string\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the list won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * By default `0`. Redefine to change how much away from the top the scroller can be before the list is not considered not at top.\n   */\n  atTopThreshold?: number\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n\n  /**\n   * No longer necessary after 2.10.2. component should work out of the box.\n   */\n  react18ConcurrentRendering?: boolean\n}\n\nexport interface GroupedVirtuosoProps<D, C> extends Omit<VirtuosoProps<D, C>, 'totalCount' | 'itemContent'> {\n  /**\n   * Specifies the amount of items in each group (and, actually, how many groups are there).\n   * For example, passing [20, 30] will display 2 groups with 20 and 30 items each.\n   */\n  groupCounts?: number[]\n\n  /**\n   * Specifies how each each group header gets rendered. The callback receives the zero-based index of the group.\n   */\n  groupContent?: GroupContent\n\n  /**\n   * Specifies how each each item gets rendered.\n   */\n  itemContent?: GroupItemContent<D, C>\n}\n\nexport interface TableVirtuosoProps<D, C> extends Omit<VirtuosoProps<D, C>, 'components' | 'headerFooterTag' | 'topItemCount'> {\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the table.\n   */\n  components?: TableComponents<C>\n  /**\n   * Set the contents of the table header.\n   */\n  fixedHeaderContent?: FixedHeaderContent\n\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in `react-window`).\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   */\n  initialTopMostItemIndex?: number\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D, C>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D, C>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: SizeFunction\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the table won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * By default `0`. Redefine to change how much away from the top the scroller can be before the list is not considered not at top.\n   */\n  atTopThreshold?: number\n\n  /**\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n\n  /**\n   * No longer necessary after 2.10.2. component should work out of the box.\n   */\n  react18ConcurrentRendering?: boolean\n}\n\nexport interface VirtuosoGridProps<C = unknown> extends GridRootProps {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: GridItemContent<C>\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: GridComponents<C>\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: GridComputeItemKey\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | null) => any\n\n  /**\n   * Sets the className for the list DOM element\n   */\n  listClassName?: string\n\n  /**\n   * Sets the grid items' className\n   */\n  itemClassName?: string\n\n  /**\n   * Uses the document scroller rather than wrapping the grid in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the grid won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n}\n\nexport interface VirtuosoHandle {\n  /**\n   * Scrolls the component to the specified item index. See {@link IndexLocationWithAlign} for more options.\n   */\n  scrollToIndex(location: number | FlatIndexLocationWithAlign): void\n  /**\n   * Scrolls the item into view if necessary. See [the website example](http://virtuoso.dev/keyboard-navigation/) for an implementation.\n   */\n  scrollIntoView(location: FlatScrollIntoViewLocation): void\n  /**\n   * Scrolls the component to the specified location. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollTo(location: ScrollToOptions): void\n  /**\n   * Scrolls the component with the specified amount. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollBy(location: ScrollToOptions): void\n  /**\n   * Use this with combination with follow output if you have images loading in the list. Listen to the image loading and call the method.\n   */\n  autoscrollToBottom(): void\n}\n\nexport interface GroupedVirtuosoHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollIntoView(location: number | ScrollIntoViewLocation): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n  autoscrollToBottom(): void\n}\n\nexport interface VirtuosoGridHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport interface TableVirtuosoHandle {\n  scrollIntoView(location: number | FlatScrollIntoViewLocation): void\n  scrollToIndex(location: number | FlatIndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport const Virtuoso = List as <ItemData = any, Context = any>(\n  props: VirtuosoProps<ItemData, Context> & { ref?: Ref<VirtuosoHandle> }\n) => ReactElement\n\nexport const GroupedVirtuoso = List as <ItemData = any, Context = any>(\n  props: GroupedVirtuosoProps<ItemData, Context> & { ref?: Ref<GroupedVirtuosoHandle> }\n) => ReactElement\n\nexport const TableVirtuoso = Table as <ItemData = any, Context = any>(\n  props: TableVirtuosoProps<ItemData, Context> & { ref?: Ref<TableVirtuosoHandle> }\n) => ReactElement\n\nexport const VirtuosoGrid = Grid as <Context = any>(props: VirtuosoGridProps<Context> & { ref?: Ref<VirtuosoGridHandle> }) => ReactElement\n"]},"metadata":{},"sourceType":"module"}